(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}var zd={exports:{}},Ai={},Bd={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mn=Symbol.for("react.element"),Im=Symbol.for("react.portal"),Om=Symbol.for("react.fragment"),$m=Symbol.for("react.strict_mode"),Lm=Symbol.for("react.profiler"),Mm=Symbol.for("react.provider"),Um=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),zm=Symbol.for("react.suspense"),Bm=Symbol.for("react.memo"),Vm=Symbol.for("react.lazy"),sc=Symbol.iterator;function Hm(t){return t===null||typeof t!="object"?null:(t=sc&&t[sc]||t["@@iterator"],typeof t=="function"?t:null)}var Vd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hd=Object.assign,Wd={};function dr(t,e,s){this.props=t,this.context=e,this.refs=Wd,this.updater=s||Vd}dr.prototype.isReactComponent={};dr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kd(){}Kd.prototype=dr.prototype;function ql(t,e,s){this.props=t,this.context=e,this.refs=Wd,this.updater=s||Vd}var Gl=ql.prototype=new Kd;Gl.constructor=ql;Hd(Gl,dr.prototype);Gl.isPureReactComponent=!0;var rc=Array.isArray,qd=Object.prototype.hasOwnProperty,Jl={current:null},Gd={key:!0,ref:!0,__self:!0,__source:!0};function Jd(t,e,s){var n,i={},a=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)qd.call(e,n)&&!Gd.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:mn,type:t,key:a,ref:l,props:i,_owner:Jl.current}}function Wm(t,e){return{$$typeof:mn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ql(t){return typeof t=="object"&&t!==null&&t.$$typeof===mn}function Km(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var nc=/\/+/g;function ra(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Km(""+t.key):e.toString(36)}function Hn(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case mn:case Im:l=!0}}if(l)return l=t,i=i(l),t=n===""?"."+ra(l,0):n,rc(i)?(s="",t!=null&&(s=t.replace(nc,"$&/")+"/"),Hn(i,e,s,"",function(d){return d})):i!=null&&(Ql(i)&&(i=Wm(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(nc,"$&/")+"/")+t)),e.push(i)),1;if(l=0,n=n===""?".":n+":",rc(t))for(var o=0;o<t.length;o++){a=t[o];var c=n+ra(a,o);l+=Hn(a,e,s,c,i)}else if(c=Hm(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=n+ra(a,o++),l+=Hn(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function jn(t,e,s){if(t==null)return t;var n=[],i=0;return Hn(t,n,"","",function(a){return e.call(s,a,i++)}),n}function qm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _e={current:null},Wn={transition:null},Gm={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Wn,ReactCurrentOwner:Jl};function Qd(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:jn,forEach:function(t,e,s){jn(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return jn(t,function(){e++}),e},toArray:function(t){return jn(t,function(e){return e})||[]},only:function(t){if(!Ql(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=dr;V.Fragment=Om;V.Profiler=Lm;V.PureComponent=ql;V.StrictMode=$m;V.Suspense=zm;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gm;V.act=Qd;V.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Hd({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Jl.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)qd.call(e,c)&&!Gd.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:mn,type:t.type,key:i,ref:a,props:n,_owner:l}};V.createContext=function(t){return t={$$typeof:Um,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mm,_context:t},t.Consumer=t};V.createElement=Jd;V.createFactory=function(t){var e=Jd.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Fm,render:t}};V.isValidElement=Ql;V.lazy=function(t){return{$$typeof:Vm,_payload:{_status:-1,_result:t},_init:qm}};V.memo=function(t,e){return{$$typeof:Bm,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Wn.transition;Wn.transition={};try{t()}finally{Wn.transition=e}};V.unstable_act=Qd;V.useCallback=function(t,e){return _e.current.useCallback(t,e)};V.useContext=function(t){return _e.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return _e.current.useDeferredValue(t)};V.useEffect=function(t,e){return _e.current.useEffect(t,e)};V.useId=function(){return _e.current.useId()};V.useImperativeHandle=function(t,e,s){return _e.current.useImperativeHandle(t,e,s)};V.useInsertionEffect=function(t,e){return _e.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return _e.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return _e.current.useMemo(t,e)};V.useReducer=function(t,e,s){return _e.current.useReducer(t,e,s)};V.useRef=function(t){return _e.current.useRef(t)};V.useState=function(t){return _e.current.useState(t)};V.useSyncExternalStore=function(t,e,s){return _e.current.useSyncExternalStore(t,e,s)};V.useTransition=function(){return _e.current.useTransition()};V.version="18.3.1";Bd.exports=V;var _=Bd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm=_,Qm=Symbol.for("react.element"),Ym=Symbol.for("react.fragment"),Xm=Object.prototype.hasOwnProperty,Zm=Jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ef={key:!0,ref:!0,__self:!0,__source:!0};function Yd(t,e,s){var n,i={},a=null,l=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)Xm.call(e,n)&&!ef.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Qm,type:t,key:a,ref:l,props:i,_owner:Zm.current}}Ai.Fragment=Ym;Ai.jsx=Yd;Ai.jsxs=Yd;zd.exports=Ai;var r=zd.exports,Xd={exports:{}},Be={},Zd={exports:{}},eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,w){var D=A.length;A.push(w);e:for(;0<D;){var R=D-1>>>1,$=A[R];if(0<i($,w))A[R]=w,A[D]=$,D=R;else break e}}function s(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var w=A[0],D=A.pop();if(D!==w){A[0]=D;e:for(var R=0,$=A.length,L=$>>>1;R<L;){var Q=2*(R+1)-1,Tt=A[Q],He=Q+1,ns=A[He];if(0>i(Tt,D))He<$&&0>i(ns,Tt)?(A[R]=ns,A[He]=D,R=He):(A[R]=Tt,A[Q]=D,R=Q);else if(He<$&&0>i(ns,D))A[R]=ns,A[He]=D,R=He;else break e}}return w}function i(A,w){var D=A.sortIndex-w.sortIndex;return D!==0?D:A.id-w.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,v=!1,x=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var w=s(d);w!==null;){if(w.callback===null)n(d);else if(w.startTime<=A)n(d),w.sortIndex=w.expirationTime,e(c,w);else break;w=s(d)}}function g(A){if(b=!1,p(A),!x)if(s(c)!==null)x=!0,we(N);else{var w=s(d);w!==null&&Ce(g,w.startTime-A)}}function N(A,w){x=!1,b&&(b=!1,y(j),j=-1),v=!0;var D=f;try{for(p(w),h=s(c);h!==null&&(!(h.expirationTime>w)||A&&!E());){var R=h.callback;if(typeof R=="function"){h.callback=null,f=h.priorityLevel;var $=R(h.expirationTime<=w);w=t.unstable_now(),typeof $=="function"?h.callback=$:h===s(c)&&n(c),p(w)}else n(c);h=s(c)}if(h!==null)var L=!0;else{var Q=s(d);Q!==null&&Ce(g,Q.startTime-w),L=!1}return L}finally{h=null,f=D,v=!1}}var k=!1,C=null,j=-1,M=5,U=-1;function E(){return!(t.unstable_now()-U<M)}function P(){if(C!==null){var A=t.unstable_now();U=A;var w=!0;try{w=C(!0,A)}finally{w?z():(k=!1,C=null)}}else k=!1}var z;if(typeof m=="function")z=function(){m(P)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,$e=se.port2;se.port1.onmessage=P,z=function(){$e.postMessage(null)}}else z=function(){S(P,0)};function we(A){C=A,k||(k=!0,z())}function Ce(A,w){j=S(function(){A(t.unstable_now())},w)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,we(N))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var w=3;break;default:w=f}var D=f;f=w;try{return A()}finally{f=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,w){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=f;f=A;try{return w()}finally{f=D}},t.unstable_scheduleCallback=function(A,w,D){var R=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?R+D:R):D=R,A){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=D+$,A={id:u++,callback:w,priorityLevel:A,startTime:D,expirationTime:$,sortIndex:-1},D>R?(A.sortIndex=D,e(d,A),s(c)===null&&A===s(d)&&(b?(y(j),j=-1):b=!0,Ce(g,D-R))):(A.sortIndex=$,e(c,A),x||v||(x=!0,we(N))),A},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(A){var w=f;return function(){var D=f;f=w;try{return A.apply(this,arguments)}finally{f=D}}}})(eu);Zd.exports=eu;var tf=Zd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf=_,ze=tf;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tu=new Set,Kr={};function _s(t,e){tr(t,e),tr(t+"Capture",e)}function tr(t,e){for(Kr[t]=e,t=0;t<e.length;t++)tu.add(e[t])}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=Object.prototype.hasOwnProperty,rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ic={},ac={};function nf(t){return Ua.call(ac,t)?!0:Ua.call(ic,t)?!1:rf.test(t)?ac[t]=!0:(ic[t]=!0,!1)}function af(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lf(t,e,s,n){if(e===null||typeof e>"u"||af(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Se(t,e,s,n,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Se(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Se(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Se(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Se(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Se(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Se(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new Se(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new Se(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new Se(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yl=/[\-:]([a-z])/g;function Xl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yl,Xl);xe[e]=new Se(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yl,Xl);xe[e]=new Se(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yl,Xl);xe[e]=new Se(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Se(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new Se(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zl(t,e,s,n){var i=xe.hasOwnProperty(e)?xe[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lf(e,s,i,n)&&(s=null),n||i===null?nf(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Pt=sf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nn=Symbol.for("react.element"),$s=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),eo=Symbol.for("react.strict_mode"),Fa=Symbol.for("react.profiler"),su=Symbol.for("react.provider"),ru=Symbol.for("react.context"),to=Symbol.for("react.forward_ref"),za=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),so=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),nu=Symbol.for("react.offscreen"),lc=Symbol.iterator;function xr(t){return t===null||typeof t!="object"?null:(t=lc&&t[lc]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,na;function Pr(t){if(na===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);na=e&&e[1]||""}return`
`+na+t}var ia=!1;function aa(t,e){if(!t||ia)return"";ia=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{ia=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Pr(t):""}function of(t){switch(t.tag){case 5:return Pr(t.type);case 16:return Pr("Lazy");case 13:return Pr("Suspense");case 19:return Pr("SuspenseList");case 0:case 2:case 15:return t=aa(t.type,!1),t;case 11:return t=aa(t.type.render,!1),t;case 1:return t=aa(t.type,!0),t;default:return""}}function Va(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case $s:return"Portal";case Fa:return"Profiler";case eo:return"StrictMode";case za:return"Suspense";case Ba:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ru:return(t.displayName||"Context")+".Consumer";case su:return(t._context.displayName||"Context")+".Provider";case to:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case so:return e=t.displayName||null,e!==null?e:Va(t.type)||"Memo";case It:e=t._payload,t=t._init;try{return Va(t(e))}catch{}}return null}function cf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(e);case 8:return e===eo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function df(t){var e=iu(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kn(t){t._valueTracker||(t._valueTracker=df(t))}function au(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=iu(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ha(t,e){var s=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function oc(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Jt(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lu(t,e){e=e.checked,e!=null&&Zl(t,"checked",e,!1)}function Wa(t,e){lu(t,e);var s=Jt(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ka(t,e.type,s):e.hasOwnProperty("defaultValue")&&Ka(t,e.type,Jt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cc(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Ka(t,e,s){(e!=="number"||ni(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Tr=Array.isArray;function Gs(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Jt(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dc(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(T(92));if(Tr(s)){if(1<s.length)throw Error(T(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Jt(s)}}function ou(t,e){var s=Jt(e.value),n=Jt(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function uc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _n,du=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_n=_n||document.createElement("div"),_n.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_n.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qr(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uf=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(t){uf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ir[e]=Ir[t]})});function uu(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Ir.hasOwnProperty(t)&&Ir[t]?(""+e).trim():e+"px"}function hu(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=uu(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var hf=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(t,e){if(e){if(hf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Qa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ya=null;function ro(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xa=null,Js=null,Qs=null;function hc(t){if(t=xn(t)){if(typeof Xa!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Li(e),Xa(t.stateNode,t.type,e))}}function mu(t){Js?Qs?Qs.push(t):Qs=[t]:Js=t}function fu(){if(Js){var t=Js,e=Qs;if(Qs=Js=null,hc(t),e)for(t=0;t<e.length;t++)hc(e[t])}}function pu(t,e){return t(e)}function xu(){}var la=!1;function gu(t,e,s){if(la)return t(e,s);la=!0;try{return pu(t,e,s)}finally{la=!1,(Js!==null||Qs!==null)&&(xu(),fu())}}function Gr(t,e){var s=t.stateNode;if(s===null)return null;var n=Li(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(T(231,e,typeof s));return s}var Za=!1;if(_t)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Za=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Za=!1}function mf(t,e,s,n,i,a,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Or=!1,ii=null,ai=!1,el=null,ff={onError:function(t){Or=!0,ii=t}};function pf(t,e,s,n,i,a,l,o,c){Or=!1,ii=null,mf.apply(ff,arguments)}function xf(t,e,s,n,i,a,l,o,c){if(pf.apply(this,arguments),Or){if(Or){var d=ii;Or=!1,ii=null}else throw Error(T(198));ai||(ai=!0,el=d)}}function Ss(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function yu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mc(t){if(Ss(t)!==t)throw Error(T(188))}function gf(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error(T(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return mc(i),t;if(a===n)return mc(i),e;a=a.sibling}throw Error(T(188))}if(s.return!==n.return)s=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l)throw Error(T(189))}}if(s.alternate!==n)throw Error(T(190))}if(s.tag!==3)throw Error(T(188));return s.stateNode.current===s?t:e}function vu(t){return t=gf(t),t!==null?bu(t):null}function bu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bu(t);if(e!==null)return e;t=t.sibling}return null}var wu=ze.unstable_scheduleCallback,fc=ze.unstable_cancelCallback,yf=ze.unstable_shouldYield,vf=ze.unstable_requestPaint,re=ze.unstable_now,bf=ze.unstable_getCurrentPriorityLevel,no=ze.unstable_ImmediatePriority,ju=ze.unstable_UserBlockingPriority,li=ze.unstable_NormalPriority,wf=ze.unstable_LowPriority,Nu=ze.unstable_IdlePriority,Ri=null,ht=null;function jf(t){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ri,t,void 0,(t.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:_f,Nf=Math.log,kf=Math.LN2;function _f(t){return t>>>=0,t===0?32:31-(Nf(t)/kf|0)|0}var Sn=64,Cn=4194304;function Dr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oi(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,l=s&268435455;if(l!==0){var o=l&~i;o!==0?n=Dr(o):(a&=l,a!==0&&(n=Dr(a)))}else l=s&~i,l!==0?n=Dr(l):a!==0&&(n=Dr(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-nt(e),i=1<<s,n|=t[s],e&=~i;return n}function Sf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cf(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-nt(a),o=1<<l,c=i[l];c===-1?(!(o&s)||o&n)&&(i[l]=Sf(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function tl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ku(){var t=Sn;return Sn<<=1,!(Sn&4194240)&&(Sn=64),t}function oa(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function fn(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nt(e),t[e]=s}function Ef(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-nt(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function io(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-nt(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var W=0;function _u(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Su,ao,Cu,Eu,Pu,sl=!1,En=[],zt=null,Bt=null,Vt=null,Jr=new Map,Qr=new Map,$t=[],Pf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pc(t,e){switch(t){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Bt=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Jr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(e.pointerId)}}function yr(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=xn(e),e!==null&&ao(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Tf(t,e,s,n,i){switch(e){case"focusin":return zt=yr(zt,t,e,s,n,i),!0;case"dragenter":return Bt=yr(Bt,t,e,s,n,i),!0;case"mouseover":return Vt=yr(Vt,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return Jr.set(a,yr(Jr.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Qr.set(a,yr(Qr.get(a)||null,t,e,s,n,i)),!0}return!1}function Tu(t){var e=us(t.target);if(e!==null){var s=Ss(e);if(s!==null){if(e=s.tag,e===13){if(e=yu(s),e!==null){t.blockedOn=e,Pu(t.priority,function(){Cu(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kn(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=rl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Ya=n,s.target.dispatchEvent(n),Ya=null}else return e=xn(s),e!==null&&ao(e),t.blockedOn=s,!1;e.shift()}return!0}function xc(t,e,s){Kn(t)&&s.delete(e)}function Df(){sl=!1,zt!==null&&Kn(zt)&&(zt=null),Bt!==null&&Kn(Bt)&&(Bt=null),Vt!==null&&Kn(Vt)&&(Vt=null),Jr.forEach(xc),Qr.forEach(xc)}function vr(t,e){t.blockedOn===e&&(t.blockedOn=null,sl||(sl=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,Df)))}function Yr(t){function e(i){return vr(i,t)}if(0<En.length){vr(En[0],t);for(var s=1;s<En.length;s++){var n=En[s];n.blockedOn===t&&(n.blockedOn=null)}}for(zt!==null&&vr(zt,t),Bt!==null&&vr(Bt,t),Vt!==null&&vr(Vt,t),Jr.forEach(e),Qr.forEach(e),s=0;s<$t.length;s++)n=$t[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<$t.length&&(s=$t[0],s.blockedOn===null);)Tu(s),s.blockedOn===null&&$t.shift()}var Ys=Pt.ReactCurrentBatchConfig,ci=!0;function Af(t,e,s,n){var i=W,a=Ys.transition;Ys.transition=null;try{W=1,lo(t,e,s,n)}finally{W=i,Ys.transition=a}}function Rf(t,e,s,n){var i=W,a=Ys.transition;Ys.transition=null;try{W=4,lo(t,e,s,n)}finally{W=i,Ys.transition=a}}function lo(t,e,s,n){if(ci){var i=rl(t,e,s,n);if(i===null)ya(t,e,n,di,s),pc(t,n);else if(Tf(i,t,e,s,n))n.stopPropagation();else if(pc(t,n),e&4&&-1<Pf.indexOf(t)){for(;i!==null;){var a=xn(i);if(a!==null&&Su(a),a=rl(t,e,s,n),a===null&&ya(t,e,n,di,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else ya(t,e,n,null,s)}}var di=null;function rl(t,e,s,n){if(di=null,t=ro(n),t=us(t),t!==null)if(e=Ss(t),e===null)t=null;else if(s=e.tag,s===13){if(t=yu(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return di=t,null}function Du(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bf()){case no:return 1;case ju:return 4;case li:case wf:return 16;case Nu:return 536870912;default:return 16}default:return 16}}var Ut=null,oo=null,qn=null;function Au(){if(qn)return qn;var t,e=oo,s=e.length,n,i="value"in Ut?Ut.value:Ut.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var l=s-t;for(n=1;n<=l&&e[s-n]===i[a-n];n++);return qn=i.slice(t,1<n?1-n:void 0)}function Gn(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pn(){return!0}function gc(){return!1}function Ve(t){function e(s,n,i,a,l){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Pn:gc,this.isPropagationStopped=gc,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pn)},persist:function(){},isPersistent:Pn}),e}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=Ve(ur),pn=ee({},ur,{view:0,detail:0}),If=Ve(pn),ca,da,br,Ii=ee({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==br&&(br&&t.type==="mousemove"?(ca=t.screenX-br.screenX,da=t.screenY-br.screenY):da=ca=0,br=t),ca)},movementY:function(t){return"movementY"in t?t.movementY:da}}),yc=Ve(Ii),Of=ee({},Ii,{dataTransfer:0}),$f=Ve(Of),Lf=ee({},pn,{relatedTarget:0}),ua=Ve(Lf),Mf=ee({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Uf=Ve(Mf),Ff=ee({},ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zf=Ve(Ff),Bf=ee({},ur,{data:0}),vc=Ve(Bf),Vf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kf(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wf[t])?!!e[t]:!1}function uo(){return Kf}var qf=ee({},pn,{key:function(t){if(t.key){var e=Vf[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(t){return t.type==="keypress"?Gn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gf=Ve(qf),Jf=ee({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=Ve(Jf),Qf=ee({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),Yf=Ve(Qf),Xf=ee({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zf=Ve(Xf),e0=ee({},Ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),t0=Ve(e0),s0=[9,13,27,32],ho=_t&&"CompositionEvent"in window,$r=null;_t&&"documentMode"in document&&($r=document.documentMode);var r0=_t&&"TextEvent"in window&&!$r,Ru=_t&&(!ho||$r&&8<$r&&11>=$r),wc=" ",jc=!1;function Iu(t,e){switch(t){case"keyup":return s0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ou(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ms=!1;function n0(t,e){switch(t){case"compositionend":return Ou(e);case"keypress":return e.which!==32?null:(jc=!0,wc);case"textInput":return t=e.data,t===wc&&jc?null:t;default:return null}}function i0(t,e){if(Ms)return t==="compositionend"||!ho&&Iu(t,e)?(t=Au(),qn=oo=Ut=null,Ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ru&&e.locale!=="ko"?null:e.data;default:return null}}var a0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!a0[t.type]:e==="textarea"}function $u(t,e,s,n){mu(n),e=ui(e,"onChange"),0<e.length&&(s=new co("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Lr=null,Xr=null;function l0(t){qu(t,0)}function Oi(t){var e=zs(t);if(au(e))return t}function o0(t,e){if(t==="change")return e}var Lu=!1;if(_t){var ha;if(_t){var ma="oninput"in document;if(!ma){var kc=document.createElement("div");kc.setAttribute("oninput","return;"),ma=typeof kc.oninput=="function"}ha=ma}else ha=!1;Lu=ha&&(!document.documentMode||9<document.documentMode)}function _c(){Lr&&(Lr.detachEvent("onpropertychange",Mu),Xr=Lr=null)}function Mu(t){if(t.propertyName==="value"&&Oi(Xr)){var e=[];$u(e,Xr,t,ro(t)),gu(l0,e)}}function c0(t,e,s){t==="focusin"?(_c(),Lr=e,Xr=s,Lr.attachEvent("onpropertychange",Mu)):t==="focusout"&&_c()}function d0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oi(Xr)}function u0(t,e){if(t==="click")return Oi(e)}function h0(t,e){if(t==="input"||t==="change")return Oi(e)}function m0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:m0;function Zr(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Ua.call(e,i)||!at(t[i],e[i]))return!1}return!0}function Sc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cc(t,e){var s=Sc(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Sc(s)}}function Uu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fu(){for(var t=window,e=ni();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ni(t.document)}return e}function mo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f0(t){var e=Fu(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Uu(s.ownerDocument.documentElement,s)){if(n!==null&&mo(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Cc(s,a);var l=Cc(s,n);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var p0=_t&&"documentMode"in document&&11>=document.documentMode,Us=null,nl=null,Mr=null,il=!1;function Ec(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;il||Us==null||Us!==ni(n)||(n=Us,"selectionStart"in n&&mo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mr&&Zr(Mr,n)||(Mr=n,n=ui(nl,"onSelect"),0<n.length&&(e=new co("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Us)))}function Tn(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Fs={animationend:Tn("Animation","AnimationEnd"),animationiteration:Tn("Animation","AnimationIteration"),animationstart:Tn("Animation","AnimationStart"),transitionend:Tn("Transition","TransitionEnd")},fa={},zu={};_t&&(zu=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function $i(t){if(fa[t])return fa[t];if(!Fs[t])return t;var e=Fs[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in zu)return fa[t]=e[s];return t}var Bu=$i("animationend"),Vu=$i("animationiteration"),Hu=$i("animationstart"),Wu=$i("transitionend"),Ku=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){Ku.set(t,e),_s(e,[t])}for(var pa=0;pa<Pc.length;pa++){var xa=Pc[pa],x0=xa.toLowerCase(),g0=xa[0].toUpperCase()+xa.slice(1);es(x0,"on"+g0)}es(Bu,"onAnimationEnd");es(Vu,"onAnimationIteration");es(Hu,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(Wu,"onTransitionEnd");tr("onMouseEnter",["mouseout","mouseover"]);tr("onMouseLeave",["mouseout","mouseover"]);tr("onPointerEnter",["pointerout","pointerover"]);tr("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Tc(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,xf(n,e,void 0,t),t.currentTarget=null}function qu(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;Tc(i,o,d),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;Tc(i,o,d),a=c}}}if(ai)throw t=el,ai=!1,el=null,t}function G(t,e){var s=e[dl];s===void 0&&(s=e[dl]=new Set);var n=t+"__bubble";s.has(n)||(Gu(e,t,2,!1),s.add(n))}function ga(t,e,s){var n=0;e&&(n|=4),Gu(s,t,n,e)}var Dn="_reactListening"+Math.random().toString(36).slice(2);function en(t){if(!t[Dn]){t[Dn]=!0,tu.forEach(function(s){s!=="selectionchange"&&(y0.has(s)||ga(s,!1,t),ga(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dn]||(e[Dn]=!0,ga("selectionchange",!1,e))}}function Gu(t,e,s,n){switch(Du(e)){case 1:var i=Af;break;case 4:i=Rf;break;default:i=lo}s=i.bind(null,e,s,t),i=void 0,!Za||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function ya(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=us(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}gu(function(){var d=a,u=ro(s),h=[];e:{var f=Ku.get(t);if(f!==void 0){var v=co,x=t;switch(t){case"keypress":if(Gn(s)===0)break e;case"keydown":case"keyup":v=Gf;break;case"focusin":x="focus",v=ua;break;case"focusout":x="blur",v=ua;break;case"beforeblur":case"afterblur":v=ua;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Yf;break;case Bu:case Vu:case Hu:v=Uf;break;case Wu:v=Zf;break;case"scroll":v=If;break;case"wheel":v=t0;break;case"copy":case"cut":case"paste":v=zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=bc}var b=(e&4)!==0,S=!b&&t==="scroll",y=b?f!==null?f+"Capture":null:f;b=[];for(var m=d,p;m!==null;){p=m;var g=p.stateNode;if(p.tag===5&&g!==null&&(p=g,y!==null&&(g=Gr(m,y),g!=null&&b.push(tn(m,g,p)))),S)break;m=m.return}0<b.length&&(f=new v(f,x,null,s,u),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&s!==Ya&&(x=s.relatedTarget||s.fromElement)&&(us(x)||x[St]))break e;if((v||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,v?(x=s.relatedTarget||s.toElement,v=d,x=x?us(x):null,x!==null&&(S=Ss(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=d),v!==x)){if(b=yc,g="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(b=bc,g="onPointerLeave",y="onPointerEnter",m="pointer"),S=v==null?f:zs(v),p=x==null?f:zs(x),f=new b(g,m+"leave",v,s,u),f.target=S,f.relatedTarget=p,g=null,us(u)===d&&(b=new b(y,m+"enter",x,s,u),b.target=p,b.relatedTarget=S,g=b),S=g,v&&x)t:{for(b=v,y=x,m=0,p=b;p;p=Es(p))m++;for(p=0,g=y;g;g=Es(g))p++;for(;0<m-p;)b=Es(b),m--;for(;0<p-m;)y=Es(y),p--;for(;m--;){if(b===y||y!==null&&b===y.alternate)break t;b=Es(b),y=Es(y)}b=null}else b=null;v!==null&&Dc(h,f,v,b,!1),x!==null&&S!==null&&Dc(h,S,x,b,!0)}}e:{if(f=d?zs(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var N=o0;else if(Nc(f))if(Lu)N=h0;else{N=d0;var k=c0}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=u0);if(N&&(N=N(t,d))){$u(h,N,s,u);break e}k&&k(t,f,d),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Ka(f,"number",f.value)}switch(k=d?zs(d):window,t){case"focusin":(Nc(k)||k.contentEditable==="true")&&(Us=k,nl=d,Mr=null);break;case"focusout":Mr=nl=Us=null;break;case"mousedown":il=!0;break;case"contextmenu":case"mouseup":case"dragend":il=!1,Ec(h,s,u);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":Ec(h,s,u)}var C;if(ho)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ms?Iu(t,s)&&(j="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(j="onCompositionStart");j&&(Ru&&s.locale!=="ko"&&(Ms||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ms&&(C=Au()):(Ut=u,oo="value"in Ut?Ut.value:Ut.textContent,Ms=!0)),k=ui(d,j),0<k.length&&(j=new vc(j,t,null,s,u),h.push({event:j,listeners:k}),C?j.data=C:(C=Ou(s),C!==null&&(j.data=C)))),(C=r0?n0(t,s):i0(t,s))&&(d=ui(d,"onBeforeInput"),0<d.length&&(u=new vc("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=C))}qu(h,e)})}function tn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function ui(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Gr(t,s),a!=null&&n.unshift(tn(t,a,i)),a=Gr(t,e),a!=null&&n.push(tn(t,a,i))),t=t.return}return n}function Es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dc(t,e,s,n,i){for(var a=e._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,i?(c=Gr(s,a),c!=null&&l.unshift(tn(s,c,o))):i||(c=Gr(s,a),c!=null&&l.push(tn(s,c,o)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var v0=/\r\n?/g,b0=/\u0000|\uFFFD/g;function Ac(t){return(typeof t=="string"?t:""+t).replace(v0,`
`).replace(b0,"")}function An(t,e,s){if(e=Ac(e),Ac(t)!==e&&s)throw Error(T(425))}function hi(){}var al=null,ll=null;function ol(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cl=typeof setTimeout=="function"?setTimeout:void 0,w0=typeof clearTimeout=="function"?clearTimeout:void 0,Rc=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof Rc<"u"?function(t){return Rc.resolve(null).then(t).catch(N0)}:cl;function N0(t){setTimeout(function(){throw t})}function va(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Yr(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Yr(e)}function Ht(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ic(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),ut="__reactFiber$"+hr,sn="__reactProps$"+hr,St="__reactContainer$"+hr,dl="__reactEvents$"+hr,k0="__reactListeners$"+hr,_0="__reactHandles$"+hr;function us(t){var e=t[ut];if(e)return e;for(var s=t.parentNode;s;){if(e=s[St]||s[ut]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Ic(t);t!==null;){if(s=t[ut])return s;t=Ic(t)}return e}t=s,s=t.parentNode}return null}function xn(t){return t=t[ut]||t[St],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Li(t){return t[sn]||null}var ul=[],Bs=-1;function ts(t){return{current:t}}function J(t){0>Bs||(t.current=ul[Bs],ul[Bs]=null,Bs--)}function q(t,e){Bs++,ul[Bs]=t.current,t.current=e}var Qt={},be=ts(Qt),Re=ts(!1),ys=Qt;function sr(t,e){var s=t.type.contextTypes;if(!s)return Qt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ie(t){return t=t.childContextTypes,t!=null}function mi(){J(Re),J(be)}function Oc(t,e,s){if(be.current!==Qt)throw Error(T(168));q(be,e),q(Re,s)}function Ju(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(T(108,cf(t)||"Unknown",i));return ee({},s,n)}function fi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qt,ys=be.current,q(be,t),q(Re,Re.current),!0}function $c(t,e,s){var n=t.stateNode;if(!n)throw Error(T(169));s?(t=Ju(t,e,ys),n.__reactInternalMemoizedMergedChildContext=t,J(Re),J(be),q(be,t)):J(Re),q(Re,s)}var yt=null,Mi=!1,ba=!1;function Qu(t){yt===null?yt=[t]:yt.push(t)}function S0(t){Mi=!0,Qu(t)}function ss(){if(!ba&&yt!==null){ba=!0;var t=0,e=W;try{var s=yt;for(W=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}yt=null,Mi=!1}catch(i){throw yt!==null&&(yt=yt.slice(t+1)),wu(no,ss),i}finally{W=e,ba=!1}}return null}var Vs=[],Hs=0,pi=null,xi=0,Ke=[],qe=0,vs=null,vt=1,bt="";function ls(t,e){Vs[Hs++]=xi,Vs[Hs++]=pi,pi=t,xi=e}function Yu(t,e,s){Ke[qe++]=vt,Ke[qe++]=bt,Ke[qe++]=vs,vs=t;var n=vt;t=bt;var i=32-nt(n)-1;n&=~(1<<i),s+=1;var a=32-nt(e)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,vt=1<<32-nt(e)+i|s<<i|n,bt=a+t}else vt=1<<a|s<<i|n,bt=t}function fo(t){t.return!==null&&(ls(t,1),Yu(t,1,0))}function po(t){for(;t===pi;)pi=Vs[--Hs],Vs[Hs]=null,xi=Vs[--Hs],Vs[Hs]=null;for(;t===vs;)vs=Ke[--qe],Ke[qe]=null,bt=Ke[--qe],Ke[qe]=null,vt=Ke[--qe],Ke[qe]=null}var Ue=null,Me=null,Y=!1,rt=null;function Xu(t,e){var s=Ge(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Lc(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ue=t,Me=Ht(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ue=t,Me=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=vs!==null?{id:vt,overflow:bt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Ge(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ue=t,Me=null,!0):!1;default:return!1}}function hl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ml(t){if(Y){var e=Me;if(e){var s=e;if(!Lc(t,e)){if(hl(t))throw Error(T(418));e=Ht(s.nextSibling);var n=Ue;e&&Lc(t,e)?Xu(n,s):(t.flags=t.flags&-4097|2,Y=!1,Ue=t)}}else{if(hl(t))throw Error(T(418));t.flags=t.flags&-4097|2,Y=!1,Ue=t}}}function Mc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ue=t}function Rn(t){if(t!==Ue)return!1;if(!Y)return Mc(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ol(t.type,t.memoizedProps)),e&&(e=Me)){if(hl(t))throw Zu(),Error(T(418));for(;e;)Xu(t,e),e=Ht(e.nextSibling)}if(Mc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Me=Ht(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Me=null}}else Me=Ue?Ht(t.stateNode.nextSibling):null;return!0}function Zu(){for(var t=Me;t;)t=Ht(t.nextSibling)}function rr(){Me=Ue=null,Y=!1}function xo(t){rt===null?rt=[t]:rt.push(t)}var C0=Pt.ReactCurrentBatchConfig;function wr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(T(309));var n=s.stateNode}if(!n)throw Error(T(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(T(284));if(!s._owner)throw Error(T(290,t))}return t}function In(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uc(t){var e=t._init;return e(t._payload)}function eh(t){function e(y,m){if(t){var p=y.deletions;p===null?(y.deletions=[m],y.flags|=16):p.push(m)}}function s(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Gt(y,m),y.index=0,y.sibling=null,y}function a(y,m,p){return y.index=p,t?(p=y.alternate,p!==null?(p=p.index,p<m?(y.flags|=2,m):p):(y.flags|=2,m)):(y.flags|=1048576,m)}function l(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,m,p,g){return m===null||m.tag!==6?(m=Ca(p,y.mode,g),m.return=y,m):(m=i(m,p),m.return=y,m)}function c(y,m,p,g){var N=p.type;return N===Ls?u(y,m,p.props.children,g,p.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===It&&Uc(N)===m.type)?(g=i(m,p.props),g.ref=wr(y,m,p),g.return=y,g):(g=ti(p.type,p.key,p.props,null,y.mode,g),g.ref=wr(y,m,p),g.return=y,g)}function d(y,m,p,g){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Ea(p,y.mode,g),m.return=y,m):(m=i(m,p.children||[]),m.return=y,m)}function u(y,m,p,g,N){return m===null||m.tag!==7?(m=gs(p,y.mode,g,N),m.return=y,m):(m=i(m,p),m.return=y,m)}function h(y,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ca(""+m,y.mode,p),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Nn:return p=ti(m.type,m.key,m.props,null,y.mode,p),p.ref=wr(y,null,m),p.return=y,p;case $s:return m=Ea(m,y.mode,p),m.return=y,m;case It:var g=m._init;return h(y,g(m._payload),p)}if(Tr(m)||xr(m))return m=gs(m,y.mode,p,null),m.return=y,m;In(y,m)}return null}function f(y,m,p,g){var N=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return N!==null?null:o(y,m,""+p,g);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Nn:return p.key===N?c(y,m,p,g):null;case $s:return p.key===N?d(y,m,p,g):null;case It:return N=p._init,f(y,m,N(p._payload),g)}if(Tr(p)||xr(p))return N!==null?null:u(y,m,p,g,null);In(y,p)}return null}function v(y,m,p,g,N){if(typeof g=="string"&&g!==""||typeof g=="number")return y=y.get(p)||null,o(m,y,""+g,N);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Nn:return y=y.get(g.key===null?p:g.key)||null,c(m,y,g,N);case $s:return y=y.get(g.key===null?p:g.key)||null,d(m,y,g,N);case It:var k=g._init;return v(y,m,p,k(g._payload),N)}if(Tr(g)||xr(g))return y=y.get(p)||null,u(m,y,g,N,null);In(m,g)}return null}function x(y,m,p,g){for(var N=null,k=null,C=m,j=m=0,M=null;C!==null&&j<p.length;j++){C.index>j?(M=C,C=null):M=C.sibling;var U=f(y,C,p[j],g);if(U===null){C===null&&(C=M);break}t&&C&&U.alternate===null&&e(y,C),m=a(U,m,j),k===null?N=U:k.sibling=U,k=U,C=M}if(j===p.length)return s(y,C),Y&&ls(y,j),N;if(C===null){for(;j<p.length;j++)C=h(y,p[j],g),C!==null&&(m=a(C,m,j),k===null?N=C:k.sibling=C,k=C);return Y&&ls(y,j),N}for(C=n(y,C);j<p.length;j++)M=v(C,y,j,p[j],g),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?j:M.key),m=a(M,m,j),k===null?N=M:k.sibling=M,k=M);return t&&C.forEach(function(E){return e(y,E)}),Y&&ls(y,j),N}function b(y,m,p,g){var N=xr(p);if(typeof N!="function")throw Error(T(150));if(p=N.call(p),p==null)throw Error(T(151));for(var k=N=null,C=m,j=m=0,M=null,U=p.next();C!==null&&!U.done;j++,U=p.next()){C.index>j?(M=C,C=null):M=C.sibling;var E=f(y,C,U.value,g);if(E===null){C===null&&(C=M);break}t&&C&&E.alternate===null&&e(y,C),m=a(E,m,j),k===null?N=E:k.sibling=E,k=E,C=M}if(U.done)return s(y,C),Y&&ls(y,j),N;if(C===null){for(;!U.done;j++,U=p.next())U=h(y,U.value,g),U!==null&&(m=a(U,m,j),k===null?N=U:k.sibling=U,k=U);return Y&&ls(y,j),N}for(C=n(y,C);!U.done;j++,U=p.next())U=v(C,y,j,U.value,g),U!==null&&(t&&U.alternate!==null&&C.delete(U.key===null?j:U.key),m=a(U,m,j),k===null?N=U:k.sibling=U,k=U);return t&&C.forEach(function(P){return e(y,P)}),Y&&ls(y,j),N}function S(y,m,p,g){if(typeof p=="object"&&p!==null&&p.type===Ls&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Nn:e:{for(var N=p.key,k=m;k!==null;){if(k.key===N){if(N=p.type,N===Ls){if(k.tag===7){s(y,k.sibling),m=i(k,p.props.children),m.return=y,y=m;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===It&&Uc(N)===k.type){s(y,k.sibling),m=i(k,p.props),m.ref=wr(y,k,p),m.return=y,y=m;break e}s(y,k);break}else e(y,k);k=k.sibling}p.type===Ls?(m=gs(p.props.children,y.mode,g,p.key),m.return=y,y=m):(g=ti(p.type,p.key,p.props,null,y.mode,g),g.ref=wr(y,m,p),g.return=y,y=g)}return l(y);case $s:e:{for(k=p.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){s(y,m.sibling),m=i(m,p.children||[]),m.return=y,y=m;break e}else{s(y,m);break}else e(y,m);m=m.sibling}m=Ea(p,y.mode,g),m.return=y,y=m}return l(y);case It:return k=p._init,S(y,m,k(p._payload),g)}if(Tr(p))return x(y,m,p,g);if(xr(p))return b(y,m,p,g);In(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(s(y,m.sibling),m=i(m,p),m.return=y,y=m):(s(y,m),m=Ca(p,y.mode,g),m.return=y,y=m),l(y)):s(y,m)}return S}var nr=eh(!0),th=eh(!1),gi=ts(null),yi=null,Ws=null,go=null;function yo(){go=Ws=yi=null}function vo(t){var e=gi.current;J(gi),t._currentValue=e}function fl(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Xs(t,e){yi=t,go=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function Ye(t){var e=t._currentValue;if(go!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(yi===null)throw Error(T(308));Ws=t,yi.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var hs=null;function bo(t){hs===null?hs=[t]:hs.push(t)}function sh(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,bo(e)):(s.next=i.next,i.next=s),e.interleaved=s,Ct(t,n)}function Ct(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ot=!1;function wo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wt(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,H&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ct(t,s)}return i=n.interleaved,i===null?(e.next=e,bo(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ct(t,s)}function Jn(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,io(t,s)}}function Fc(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=l:a=a.next=l,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function vi(t,e,s,n){var i=t.updateQueue;Ot=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?a=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;l=0,u=d=c=null,o=a;do{var f=o.lane,v=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,b=o;switch(f=e,v=s,b.tag){case 1:if(x=b.payload,typeof x=="function"){h=x.call(v,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(v,h,f):x,f==null)break e;h=ee({},h,f);break e;case 2:Ot=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else v={eventTime:v,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=v,c=h):u=u.next=v,l|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);ws|=l,t.lanes=l,t.memoizedState=h}}function zc(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(T(191,i));i.call(n)}}}var gn={},mt=ts(gn),rn=ts(gn),nn=ts(gn);function ms(t){if(t===gn)throw Error(T(174));return t}function jo(t,e){switch(q(nn,e),q(rn,t),q(mt,gn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ga(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ga(e,t)}J(mt),q(mt,e)}function ir(){J(mt),J(rn),J(nn)}function nh(t){ms(nn.current);var e=ms(mt.current),s=Ga(e,t.type);e!==s&&(q(rn,t),q(mt,s))}function No(t){rn.current===t&&(J(mt),J(rn))}var X=ts(0);function bi(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wa=[];function ko(){for(var t=0;t<wa.length;t++)wa[t]._workInProgressVersionPrimary=null;wa.length=0}var Qn=Pt.ReactCurrentDispatcher,ja=Pt.ReactCurrentBatchConfig,bs=0,Z=null,oe=null,de=null,wi=!1,Ur=!1,an=0,E0=0;function ge(){throw Error(T(321))}function _o(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!at(t[s],e[s]))return!1;return!0}function So(t,e,s,n,i,a){if(bs=a,Z=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qn.current=t===null||t.memoizedState===null?A0:R0,t=s(n,i),Ur){a=0;do{if(Ur=!1,an=0,25<=a)throw Error(T(301));a+=1,de=oe=null,e.updateQueue=null,Qn.current=I0,t=s(n,i)}while(Ur)}if(Qn.current=ji,e=oe!==null&&oe.next!==null,bs=0,de=oe=Z=null,wi=!1,e)throw Error(T(300));return t}function Co(){var t=an!==0;return an=0,t}function ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?Z.memoizedState=de=t:de=de.next=t,de}function Xe(){if(oe===null){var t=Z.alternate;t=t!==null?t.memoizedState:null}else t=oe.next;var e=de===null?Z.memoizedState:de.next;if(e!==null)de=e,oe=t;else{if(t===null)throw Error(T(310));oe=t,t={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},de===null?Z.memoizedState=de=t:de=de.next=t}return de}function ln(t,e){return typeof e=="function"?e(t):e}function Na(t){var e=Xe(),s=e.queue;if(s===null)throw Error(T(311));s.lastRenderedReducer=t;var n=oe,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,d=a;do{var u=d.lane;if((bs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,Z.lanes|=u,ws|=u}d=d.next}while(d!==null&&d!==a);c===null?l=n:c.next=o,at(n,e.memoizedState)||(Ae=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,Z.lanes|=a,ws|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function ka(t){var e=Xe(),s=e.queue;if(s===null)throw Error(T(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);at(a,e.memoizedState)||(Ae=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function ih(){}function ah(t,e){var s=Z,n=Xe(),i=e(),a=!at(n.memoizedState,i);if(a&&(n.memoizedState=i,Ae=!0),n=n.queue,Eo(ch.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||de!==null&&de.memoizedState.tag&1){if(s.flags|=2048,on(9,oh.bind(null,s,n,i,e),void 0,null),he===null)throw Error(T(349));bs&30||lh(s,e,i)}return i}function lh(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function oh(t,e,s,n){e.value=s,e.getSnapshot=n,dh(e)&&uh(t)}function ch(t,e,s){return s(function(){dh(e)&&uh(t)})}function dh(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!at(t,s)}catch{return!0}}function uh(t){var e=Ct(t,1);e!==null&&it(e,t,1,-1)}function Bc(t){var e=ct();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:t},e.queue=t,t=t.dispatch=D0.bind(null,Z,t),[e.memoizedState,t]}function on(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Z.updateQueue,e===null?(e={lastEffect:null,stores:null},Z.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function hh(){return Xe().memoizedState}function Yn(t,e,s,n){var i=ct();Z.flags|=t,i.memoizedState=on(1|e,s,void 0,n===void 0?null:n)}function Ui(t,e,s,n){var i=Xe();n=n===void 0?null:n;var a=void 0;if(oe!==null){var l=oe.memoizedState;if(a=l.destroy,n!==null&&_o(n,l.deps)){i.memoizedState=on(e,s,a,n);return}}Z.flags|=t,i.memoizedState=on(1|e,s,a,n)}function Vc(t,e){return Yn(8390656,8,t,e)}function Eo(t,e){return Ui(2048,8,t,e)}function mh(t,e){return Ui(4,2,t,e)}function fh(t,e){return Ui(4,4,t,e)}function ph(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xh(t,e,s){return s=s!=null?s.concat([t]):null,Ui(4,4,ph.bind(null,e,t),s)}function Po(){}function gh(t,e){var s=Xe();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&_o(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function yh(t,e){var s=Xe();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&_o(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function vh(t,e,s){return bs&21?(at(s,e)||(s=ku(),Z.lanes|=s,ws|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=s)}function P0(t,e){var s=W;W=s!==0&&4>s?s:4,t(!0);var n=ja.transition;ja.transition={};try{t(!1),e()}finally{W=s,ja.transition=n}}function bh(){return Xe().memoizedState}function T0(t,e,s){var n=qt(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},wh(t))jh(e,s);else if(s=sh(t,e,s,n),s!==null){var i=ke();it(s,t,n,i),Nh(s,e,n)}}function D0(t,e,s){var n=qt(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(wh(t))jh(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,s);if(i.hasEagerState=!0,i.eagerState=o,at(o,l)){var c=e.interleaved;c===null?(i.next=i,bo(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=sh(t,e,i,n),s!==null&&(i=ke(),it(s,t,n,i),Nh(s,e,n))}}function wh(t){var e=t.alternate;return t===Z||e!==null&&e===Z}function jh(t,e){Ur=wi=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Nh(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,io(t,s)}}var ji={readContext:Ye,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useInsertionEffect:ge,useLayoutEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useMutableSource:ge,useSyncExternalStore:ge,useId:ge,unstable_isNewReconciler:!1},A0={readContext:Ye,useCallback:function(t,e){return ct().memoizedState=[t,e===void 0?null:e],t},useContext:Ye,useEffect:Vc,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Yn(4194308,4,ph.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Yn(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yn(4,2,t,e)},useMemo:function(t,e){var s=ct();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=ct();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=T0.bind(null,Z,t),[n.memoizedState,t]},useRef:function(t){var e=ct();return t={current:t},e.memoizedState=t},useState:Bc,useDebugValue:Po,useDeferredValue:function(t){return ct().memoizedState=t},useTransition:function(){var t=Bc(!1),e=t[0];return t=P0.bind(null,t[1]),ct().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Z,i=ct();if(Y){if(s===void 0)throw Error(T(407));s=s()}else{if(s=e(),he===null)throw Error(T(349));bs&30||lh(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,Vc(ch.bind(null,n,a,t),[t]),n.flags|=2048,on(9,oh.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=ct(),e=he.identifierPrefix;if(Y){var s=bt,n=vt;s=(n&~(1<<32-nt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=an++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=E0++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R0={readContext:Ye,useCallback:gh,useContext:Ye,useEffect:Eo,useImperativeHandle:xh,useInsertionEffect:mh,useLayoutEffect:fh,useMemo:yh,useReducer:Na,useRef:hh,useState:function(){return Na(ln)},useDebugValue:Po,useDeferredValue:function(t){var e=Xe();return vh(e,oe.memoizedState,t)},useTransition:function(){var t=Na(ln)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:ih,useSyncExternalStore:ah,useId:bh,unstable_isNewReconciler:!1},I0={readContext:Ye,useCallback:gh,useContext:Ye,useEffect:Eo,useImperativeHandle:xh,useInsertionEffect:mh,useLayoutEffect:fh,useMemo:yh,useReducer:ka,useRef:hh,useState:function(){return ka(ln)},useDebugValue:Po,useDeferredValue:function(t){var e=Xe();return oe===null?e.memoizedState=t:vh(e,oe.memoizedState,t)},useTransition:function(){var t=ka(ln)[0],e=Xe().memoizedState;return[t,e]},useMutableSource:ih,useSyncExternalStore:ah,useId:bh,unstable_isNewReconciler:!1};function et(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function pl(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:ee({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Fi={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=ke(),i=qt(t),a=wt(n,i);a.payload=e,s!=null&&(a.callback=s),e=Wt(t,a,i),e!==null&&(it(e,t,i,n),Jn(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=ke(),i=qt(t),a=wt(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Wt(t,a,i),e!==null&&(it(e,t,i,n),Jn(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=ke(),n=qt(t),i=wt(s,n);i.tag=2,e!=null&&(i.callback=e),e=Wt(t,i,n),e!==null&&(it(e,t,n,s),Jn(e,t,n))}};function Hc(t,e,s,n,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,l):e.prototype&&e.prototype.isPureReactComponent?!Zr(s,n)||!Zr(i,a):!0}function kh(t,e,s){var n=!1,i=Qt,a=e.contextType;return typeof a=="object"&&a!==null?a=Ye(a):(i=Ie(e)?ys:be.current,n=e.contextTypes,a=(n=n!=null)?sr(t,i):Qt),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Wc(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Fi.enqueueReplaceState(e,e.state,null)}function xl(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},wo(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ye(a):(a=Ie(e)?ys:be.current,i.context=sr(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(pl(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fi.enqueueReplaceState(i,i.state,null),vi(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ar(t,e){try{var s="",n=e;do s+=of(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function _a(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function gl(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var O0=typeof WeakMap=="function"?WeakMap:Map;function _h(t,e,s){s=wt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){ki||(ki=!0,Cl=n),gl(t,e)},s}function Sh(t,e,s){s=wt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){gl(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){gl(t,e),typeof n!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function Kc(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new O0;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=J0.bind(null,t,e,s),e.then(t,t))}function qc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gc(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=wt(-1,1),e.tag=2,Wt(s,e,1))),s.lanes|=1),t)}var $0=Pt.ReactCurrentOwner,Ae=!1;function je(t,e,s,n){e.child=t===null?th(e,null,s,n):nr(e,t.child,s,n)}function Jc(t,e,s,n,i){s=s.render;var a=e.ref;return Xs(e,i),n=So(t,e,s,n,a,i),s=Co(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Et(t,e,i)):(Y&&s&&fo(e),e.flags|=1,je(t,e,n,i),e.child)}function Qc(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!Lo(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,Ch(t,e,a,n,i)):(t=ti(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(s=s.compare,s=s!==null?s:Zr,s(l,n)&&t.ref===e.ref)return Et(t,e,i)}return e.flags|=1,t=Gt(a,n),t.ref=e.ref,t.return=e,e.child=t}function Ch(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(Zr(a,n)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Et(t,e,i)}return yl(t,e,s,n,i)}function Eh(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(qs,Le),Le|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,q(qs,Le),Le|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,q(qs,Le),Le|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,q(qs,Le),Le|=n;return je(t,e,i,s),e.child}function Ph(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function yl(t,e,s,n,i){var a=Ie(s)?ys:be.current;return a=sr(e,a),Xs(e,i),s=So(t,e,s,n,a,i),n=Co(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Et(t,e,i)):(Y&&n&&fo(e),e.flags|=1,je(t,e,s,i),e.child)}function Yc(t,e,s,n,i){if(Ie(s)){var a=!0;fi(e)}else a=!1;if(Xs(e,i),e.stateNode===null)Xn(t,e),kh(e,s,n),xl(e,s,n,i),n=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ye(d):(d=Ie(s)?ys:be.current,d=sr(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Wc(e,l,n,d),Ot=!1;var f=e.memoizedState;l.state=f,vi(e,n,l,i),c=e.memoizedState,o!==n||f!==c||Re.current||Ot?(typeof u=="function"&&(pl(e,s,u,n),c=e.memoizedState),(o=Ot||Hc(e,s,o,n,f,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,rh(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:et(e.type,o),l.props=d,h=e.pendingProps,f=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ye(c):(c=Ie(s)?ys:be.current,c=sr(e,c));var v=s.getDerivedStateFromProps;(u=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&Wc(e,l,n,c),Ot=!1,f=e.memoizedState,l.state=f,vi(e,n,l,i);var x=e.memoizedState;o!==h||f!==x||Re.current||Ot?(typeof v=="function"&&(pl(e,s,v,n),x=e.memoizedState),(d=Ot||Hc(e,s,d,n,f,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,x,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),l.props=n,l.state=x,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return vl(t,e,s,n,a,i)}function vl(t,e,s,n,i,a){Ph(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return i&&$c(e,s,!1),Et(t,e,a);n=e.stateNode,$0.current=e;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=nr(e,t.child,null,a),e.child=nr(e,null,o,a)):je(t,e,o,a),e.memoizedState=n.state,i&&$c(e,s,!0),e.child}function Th(t){var e=t.stateNode;e.pendingContext?Oc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oc(t,e.context,!1),jo(t,e.containerInfo)}function Xc(t,e,s,n,i){return rr(),xo(i),e.flags|=256,je(t,e,s,n),e.child}var bl={dehydrated:null,treeContext:null,retryLane:0};function wl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dh(t,e,s){var n=e.pendingProps,i=X.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),q(X,i&1),t===null)return ml(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,a?(n=e.mode,a=e.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Vi(l,n,0,null),t=gs(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=wl(s),e.memoizedState=bl,t):To(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return L0(t,e,l,n,o,i,s);if(a){a=n.fallback,l=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Gt(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Gt(o,a):(a=gs(a,l,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,l=t.child.memoizedState,l=l===null?wl(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~s,e.memoizedState=bl,n}return a=t.child,t=a.sibling,n=Gt(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function To(t,e){return e=Vi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function On(t,e,s,n){return n!==null&&xo(n),nr(e,t.child,null,s),t=To(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L0(t,e,s,n,i,a,l){if(s)return e.flags&256?(e.flags&=-257,n=_a(Error(T(422))),On(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Vi({mode:"visible",children:n.children},i,0,null),a=gs(a,i,l,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&nr(e,t.child,null,l),e.child.memoizedState=wl(l),e.memoizedState=bl,a);if(!(e.mode&1))return On(t,e,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(T(419)),n=_a(a,n,void 0),On(t,e,l,n)}if(o=(l&t.childLanes)!==0,Ae||o){if(n=he,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ct(t,i),it(n,t,i,-1))}return $o(),n=_a(Error(T(421))),On(t,e,l,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Q0.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Me=Ht(i.nextSibling),Ue=e,Y=!0,rt=null,t!==null&&(Ke[qe++]=vt,Ke[qe++]=bt,Ke[qe++]=vs,vt=t.id,bt=t.overflow,vs=e),e=To(e,n.children),e.flags|=4096,e)}function Zc(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),fl(t.return,e,s)}function Sa(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function Ah(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(je(t,e,n.children,s),n=X.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zc(t,s,e);else if(t.tag===19)Zc(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(q(X,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&bi(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Sa(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bi(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Sa(e,!0,s,null,a);break;case"together":Sa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xn(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Et(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),ws|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,s=Gt(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Gt(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function M0(t,e,s){switch(e.tag){case 3:Th(e),rr();break;case 5:nh(e);break;case 1:Ie(e.type)&&fi(e);break;case 4:jo(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;q(gi,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(q(X,X.current&1),e.flags|=128,null):s&e.child.childLanes?Dh(t,e,s):(q(X,X.current&1),t=Et(t,e,s),t!==null?t.sibling:null);q(X,X.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Ah(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),q(X,X.current),n)break;return null;case 22:case 23:return e.lanes=0,Eh(t,e,s)}return Et(t,e,s)}var Rh,jl,Ih,Oh;Rh=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};jl=function(){};Ih=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ms(mt.current);var a=null;switch(s){case"input":i=Ha(t,i),n=Ha(t,n),a=[];break;case"select":i=ee({},i,{value:void 0}),n=ee({},n,{value:void 0}),a=[];break;case"textarea":i=qa(t,i),n=qa(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hi)}Ja(s,n);var l;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Kr.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(o=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Kr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&G("scroll",t),a||o===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Oh=function(t,e,s,n){s!==n&&(e.flags|=4)};function jr(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function U0(t,e,s){var n=e.pendingProps;switch(po(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return Ie(e.type)&&mi(),ye(e),null;case 3:return n=e.stateNode,ir(),J(Re),J(be),ko(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Rn(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rt!==null&&(Tl(rt),rt=null))),jl(t,e),ye(e),null;case 5:No(e);var i=ms(nn.current);if(s=e.type,t!==null&&e.stateNode!=null)Ih(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return ye(e),null}if(t=ms(mt.current),Rn(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[ut]=e,n[sn]=a,t=(e.mode&1)!==0,s){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(i=0;i<Ar.length;i++)G(Ar[i],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":oc(n,a),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},G("invalid",n);break;case"textarea":dc(n,a),G("invalid",n)}Ja(s,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&An(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&An(n.textContent,o,t),i=["children",""+o]):Kr.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&G("scroll",n)}switch(s){case"input":kn(n),cc(n,a,!0);break;case"textarea":kn(n),uc(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=hi)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cu(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[ut]=e,t[sn]=n,Rh(t,e,!1,!1),e.stateNode=t;e:{switch(l=Qa(s,n),s){case"dialog":G("cancel",t),G("close",t),i=n;break;case"iframe":case"object":case"embed":G("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ar.length;i++)G(Ar[i],t);i=n;break;case"source":G("error",t),i=n;break;case"img":case"image":case"link":G("error",t),G("load",t),i=n;break;case"details":G("toggle",t),i=n;break;case"input":oc(t,n),i=Ha(t,n),G("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ee({},n,{value:void 0}),G("invalid",t);break;case"textarea":dc(t,n),i=qa(t,n),G("invalid",t);break;default:i=n}Ja(s,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?hu(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&du(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&qr(t,c):typeof c=="number"&&qr(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Kr.hasOwnProperty(a)?c!=null&&a==="onScroll"&&G("scroll",t):c!=null&&Zl(t,a,c,l))}switch(s){case"input":kn(t),cc(t,n,!1);break;case"textarea":kn(t),uc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Jt(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Gs(t,!!n.multiple,a,!1):n.defaultValue!=null&&Gs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hi)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ye(e),null;case 6:if(t&&e.stateNode!=null)Oh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(s=ms(nn.current),ms(mt.current),Rn(e)){if(n=e.stateNode,s=e.memoizedProps,n[ut]=e,(a=n.nodeValue!==s)&&(t=Ue,t!==null))switch(t.tag){case 3:An(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&An(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ut]=e,e.stateNode=n}return ye(e),null;case 13:if(J(X),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Me!==null&&e.mode&1&&!(e.flags&128))Zu(),rr(),e.flags|=98560,a=!1;else if(a=Rn(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(T(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(T(317));a[ut]=e}else rr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ye(e),a=!1}else rt!==null&&(Tl(rt),rt=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||X.current&1?ce===0&&(ce=3):$o())),e.updateQueue!==null&&(e.flags|=4),ye(e),null);case 4:return ir(),jl(t,e),t===null&&en(e.stateNode.containerInfo),ye(e),null;case 10:return vo(e.type._context),ye(e),null;case 17:return Ie(e.type)&&mi(),ye(e),null;case 19:if(J(X),a=e.memoizedState,a===null)return ye(e),null;if(n=(e.flags&128)!==0,l=a.rendering,l===null)if(n)jr(a,!1);else{if(ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=bi(t),l!==null){for(e.flags|=128,jr(a,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return q(X,X.current&1|2),e.child}t=t.sibling}a.tail!==null&&re()>lr&&(e.flags|=128,n=!0,jr(a,!1),e.lanes=4194304)}else{if(!n)if(t=bi(l),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),jr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Y)return ye(e),null}else 2*re()-a.renderingStartTime>lr&&s!==1073741824&&(e.flags|=128,n=!0,jr(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(s=a.last,s!==null?s.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=re(),e.sibling=null,s=X.current,q(X,n?s&1|2:s&1),e):(ye(e),null);case 22:case 23:return Oo(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Le&1073741824&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function F0(t,e){switch(po(e),e.tag){case 1:return Ie(e.type)&&mi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ir(),J(Re),J(be),ko(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return No(e),null;case 13:if(J(X),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));rr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return J(X),null;case 4:return ir(),null;case 10:return vo(e.type._context),null;case 22:case 23:return Oo(),null;case 24:return null;default:return null}}var $n=!1,ve=!1,z0=typeof WeakSet=="function"?WeakSet:Set,I=null;function Ks(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){te(t,e,n)}else s.current=null}function Nl(t,e,s){try{s()}catch(n){te(t,e,n)}}var ed=!1;function B0(t,e){if(al=ci,t=Fu(),mo(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var v;h!==s||i!==0&&h.nodeType!==3||(o=l+i),h!==a||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===s&&++d===i&&(o=l),f===a&&++u===n&&(c=l),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(ll={focusedElem:t,selectionRange:s},ci=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,S=x.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?b:et(e.type,b),S);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(g){te(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return x=ed,ed=!1,x}function Fr(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Nl(e,s,a)}i=i.next}while(i!==n)}}function zi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function kl(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function $h(t){var e=t.alternate;e!==null&&(t.alternate=null,$h(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ut],delete e[sn],delete e[dl],delete e[k0],delete e[_0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lh(t){return t.tag===5||t.tag===3||t.tag===4}function td(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _l(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=hi));else if(n!==4&&(t=t.child,t!==null))for(_l(t,e,s),t=t.sibling;t!==null;)_l(t,e,s),t=t.sibling}function Sl(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Sl(t,e,s),t=t.sibling;t!==null;)Sl(t,e,s),t=t.sibling}var me=null,tt=!1;function Dt(t,e,s){for(s=s.child;s!==null;)Mh(t,e,s),s=s.sibling}function Mh(t,e,s){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ri,s)}catch{}switch(s.tag){case 5:ve||Ks(s,e);case 6:var n=me,i=tt;me=null,Dt(t,e,s),me=n,tt=i,me!==null&&(tt?(t=me,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):me.removeChild(s.stateNode));break;case 18:me!==null&&(tt?(t=me,s=s.stateNode,t.nodeType===8?va(t.parentNode,s):t.nodeType===1&&va(t,s),Yr(t)):va(me,s.stateNode));break;case 4:n=me,i=tt,me=s.stateNode.containerInfo,tt=!0,Dt(t,e,s),me=n,tt=i;break;case 0:case 11:case 14:case 15:if(!ve&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Nl(s,e,l),i=i.next}while(i!==n)}Dt(t,e,s);break;case 1:if(!ve&&(Ks(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){te(s,e,o)}Dt(t,e,s);break;case 21:Dt(t,e,s);break;case 22:s.mode&1?(ve=(n=ve)||s.memoizedState!==null,Dt(t,e,s),ve=n):Dt(t,e,s);break;default:Dt(t,e,s)}}function sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new z0),e.forEach(function(n){var i=Y0.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function Ze(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:me=o.stateNode,tt=!1;break e;case 3:me=o.stateNode.containerInfo,tt=!0;break e;case 4:me=o.stateNode.containerInfo,tt=!0;break e}o=o.return}if(me===null)throw Error(T(160));Mh(a,l,i),me=null,tt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){te(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uh(e,t),e=e.sibling}function Uh(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ze(e,t),lt(t),n&4){try{Fr(3,t,t.return),zi(3,t)}catch(b){te(t,t.return,b)}try{Fr(5,t,t.return)}catch(b){te(t,t.return,b)}}break;case 1:Ze(e,t),lt(t),n&512&&s!==null&&Ks(s,s.return);break;case 5:if(Ze(e,t),lt(t),n&512&&s!==null&&Ks(s,s.return),t.flags&32){var i=t.stateNode;try{qr(i,"")}catch(b){te(t,t.return,b)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=s!==null?s.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&lu(i,a),Qa(o,l);var d=Qa(o,a);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?hu(i,h):u==="dangerouslySetInnerHTML"?du(i,h):u==="children"?qr(i,h):Zl(i,u,h,d)}switch(o){case"input":Wa(i,a);break;case"textarea":ou(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Gs(i,!!a.multiple,v,!1):f!==!!a.multiple&&(a.defaultValue!=null?Gs(i,!!a.multiple,a.defaultValue,!0):Gs(i,!!a.multiple,a.multiple?[]:"",!1))}i[sn]=a}catch(b){te(t,t.return,b)}}break;case 6:if(Ze(e,t),lt(t),n&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(b){te(t,t.return,b)}}break;case 3:if(Ze(e,t),lt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Yr(e.containerInfo)}catch(b){te(t,t.return,b)}break;case 4:Ze(e,t),lt(t);break;case 13:Ze(e,t),lt(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Ro=re())),n&4&&sd(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(ve=(d=ve)||u,Ze(e,t),ve=d):Ze(e,t),lt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(I=t,u=t.child;u!==null;){for(h=I=u;I!==null;){switch(f=I,v=f.child,f.tag){case 0:case 11:case 14:case 15:Fr(4,f,f.return);break;case 1:Ks(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){te(n,s,b)}}break;case 5:Ks(f,f.return);break;case 22:if(f.memoizedState!==null){nd(h);continue}}v!==null?(v.return=f,I=v):nd(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=uu("display",l))}catch(b){te(t,t.return,b)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(b){te(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ze(e,t),lt(t),n&4&&sd(t);break;case 21:break;default:Ze(e,t),lt(t)}}function lt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Lh(s)){var n=s;break e}s=s.return}throw Error(T(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(qr(i,""),n.flags&=-33);var a=td(t);Sl(t,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=td(t);_l(t,o,l);break;default:throw Error(T(161))}}catch(c){te(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function V0(t,e,s){I=t,Fh(t)}function Fh(t,e,s){for(var n=(t.mode&1)!==0;I!==null;){var i=I,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||$n;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||ve;o=$n;var d=ve;if($n=l,(ve=c)&&!d)for(I=i;I!==null;)l=I,c=l.child,l.tag===22&&l.memoizedState!==null?id(i):c!==null?(c.return=l,I=c):id(i);for(;a!==null;)I=a,Fh(a),a=a.sibling;I=i,$n=o,ve=d}rd(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,I=a):rd(t)}}function rd(t){for(;I!==null;){var e=I;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ve||zi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ve)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:et(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&zc(e,a,n);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}zc(e,l,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Yr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}ve||e.flags&512&&kl(e)}catch(f){te(e,e.return,f)}}if(e===t){I=null;break}if(s=e.sibling,s!==null){s.return=e.return,I=s;break}I=e.return}}function nd(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var s=e.sibling;if(s!==null){s.return=e.return,I=s;break}I=e.return}}function id(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{zi(4,e)}catch(c){te(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){te(e,i,c)}}var a=e.return;try{kl(e)}catch(c){te(e,a,c)}break;case 5:var l=e.return;try{kl(e)}catch(c){te(e,l,c)}}}catch(c){te(e,e.return,c)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var H0=Math.ceil,Ni=Pt.ReactCurrentDispatcher,Do=Pt.ReactCurrentOwner,Je=Pt.ReactCurrentBatchConfig,H=0,he=null,ie=null,pe=0,Le=0,qs=ts(0),ce=0,cn=null,ws=0,Bi=0,Ao=0,zr=null,Pe=null,Ro=0,lr=1/0,xt=null,ki=!1,Cl=null,Kt=null,Ln=!1,Ft=null,_i=0,Br=0,El=null,Zn=-1,ei=0;function ke(){return H&6?re():Zn!==-1?Zn:Zn=re()}function qt(t){return t.mode&1?H&2&&pe!==0?pe&-pe:C0.transition!==null?(ei===0&&(ei=ku()),ei):(t=W,t!==0||(t=window.event,t=t===void 0?16:Du(t.type)),t):1}function it(t,e,s,n){if(50<Br)throw Br=0,El=null,Error(T(185));fn(t,s,n),(!(H&2)||t!==he)&&(t===he&&(!(H&2)&&(Bi|=s),ce===4&&Lt(t,pe)),Oe(t,n),s===1&&H===0&&!(e.mode&1)&&(lr=re()+500,Mi&&ss()))}function Oe(t,e){var s=t.callbackNode;Cf(t,e);var n=oi(t,t===he?pe:0);if(n===0)s!==null&&fc(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&fc(s),e===1)t.tag===0?S0(ad.bind(null,t)):Qu(ad.bind(null,t)),j0(function(){!(H&6)&&ss()}),s=null;else{switch(_u(n)){case 1:s=no;break;case 4:s=ju;break;case 16:s=li;break;case 536870912:s=Nu;break;default:s=li}s=Gh(s,zh.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function zh(t,e){if(Zn=-1,ei=0,H&6)throw Error(T(327));var s=t.callbackNode;if(Zs()&&t.callbackNode!==s)return null;var n=oi(t,t===he?pe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Si(t,n);else{e=n;var i=H;H|=2;var a=Vh();(he!==t||pe!==e)&&(xt=null,lr=re()+500,xs(t,e));do try{q0();break}catch(o){Bh(t,o)}while(!0);yo(),Ni.current=a,H=i,ie!==null?e=0:(he=null,pe=0,e=ce)}if(e!==0){if(e===2&&(i=tl(t),i!==0&&(n=i,e=Pl(t,i))),e===1)throw s=cn,xs(t,0),Lt(t,n),Oe(t,re()),s;if(e===6)Lt(t,n);else{if(i=t.current.alternate,!(n&30)&&!W0(i)&&(e=Si(t,n),e===2&&(a=tl(t),a!==0&&(n=a,e=Pl(t,a))),e===1))throw s=cn,xs(t,0),Lt(t,n),Oe(t,re()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:os(t,Pe,xt);break;case 3:if(Lt(t,n),(n&130023424)===n&&(e=Ro+500-re(),10<e)){if(oi(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){ke(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cl(os.bind(null,t,Pe,xt),e);break}os(t,Pe,xt);break;case 4:if(Lt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var l=31-nt(n);a=1<<l,l=e[l],l>i&&(i=l),n&=~a}if(n=i,n=re()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*H0(n/1960))-n,10<n){t.timeoutHandle=cl(os.bind(null,t,Pe,xt),n);break}os(t,Pe,xt);break;case 5:os(t,Pe,xt);break;default:throw Error(T(329))}}}return Oe(t,re()),t.callbackNode===s?zh.bind(null,t):null}function Pl(t,e){var s=zr;return t.current.memoizedState.isDehydrated&&(xs(t,e).flags|=256),t=Si(t,e),t!==2&&(e=Pe,Pe=s,e!==null&&Tl(e)),t}function Tl(t){Pe===null?Pe=t:Pe.push.apply(Pe,t)}function W0(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!at(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lt(t,e){for(e&=~Ao,e&=~Bi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-nt(e),n=1<<s;t[s]=-1,e&=~n}}function ad(t){if(H&6)throw Error(T(327));Zs();var e=oi(t,0);if(!(e&1))return Oe(t,re()),null;var s=Si(t,e);if(t.tag!==0&&s===2){var n=tl(t);n!==0&&(e=n,s=Pl(t,n))}if(s===1)throw s=cn,xs(t,0),Lt(t,e),Oe(t,re()),s;if(s===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,Pe,xt),Oe(t,re()),null}function Io(t,e){var s=H;H|=1;try{return t(e)}finally{H=s,H===0&&(lr=re()+500,Mi&&ss())}}function js(t){Ft!==null&&Ft.tag===0&&!(H&6)&&Zs();var e=H;H|=1;var s=Je.transition,n=W;try{if(Je.transition=null,W=1,t)return t()}finally{W=n,Je.transition=s,H=e,!(H&6)&&ss()}}function Oo(){Le=qs.current,J(qs)}function xs(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,w0(s)),ie!==null)for(s=ie.return;s!==null;){var n=s;switch(po(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mi();break;case 3:ir(),J(Re),J(be),ko();break;case 5:No(n);break;case 4:ir();break;case 13:J(X);break;case 19:J(X);break;case 10:vo(n.type._context);break;case 22:case 23:Oo()}s=s.return}if(he=t,ie=t=Gt(t.current,null),pe=Le=e,ce=0,cn=null,Ao=Bi=ws=0,Pe=zr=null,hs!==null){for(e=0;e<hs.length;e++)if(s=hs[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}s.pending=n}hs=null}return t}function Bh(t,e){do{var s=ie;try{if(yo(),Qn.current=ji,wi){for(var n=Z.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wi=!1}if(bs=0,de=oe=Z=null,Ur=!1,an=0,Do.current=null,s===null||s.return===null){ce=1,cn=e,ie=null;break}e:{var a=t,l=s.return,o=s,c=e;if(e=pe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=qc(l);if(v!==null){v.flags&=-257,Gc(v,l,o,a,e),v.mode&1&&Kc(a,d,e),e=v,c=d;var x=e.updateQueue;if(x===null){var b=new Set;b.add(c),e.updateQueue=b}else x.add(c);break e}else{if(!(e&1)){Kc(a,d,e),$o();break e}c=Error(T(426))}}else if(Y&&o.mode&1){var S=qc(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Gc(S,l,o,a,e),xo(ar(c,o));break e}}a=c=ar(c,o),ce!==4&&(ce=2),zr===null?zr=[a]:zr.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=_h(a,c,e);Fc(a,y);break e;case 1:o=c;var m=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Kt===null||!Kt.has(p)))){a.flags|=65536,e&=-e,a.lanes|=e;var g=Sh(a,o,e);Fc(a,g);break e}}a=a.return}while(a!==null)}Wh(s)}catch(N){e=N,ie===s&&s!==null&&(ie=s=s.return);continue}break}while(!0)}function Vh(){var t=Ni.current;return Ni.current=ji,t===null?ji:t}function $o(){(ce===0||ce===3||ce===2)&&(ce=4),he===null||!(ws&268435455)&&!(Bi&268435455)||Lt(he,pe)}function Si(t,e){var s=H;H|=2;var n=Vh();(he!==t||pe!==e)&&(xt=null,xs(t,e));do try{K0();break}catch(i){Bh(t,i)}while(!0);if(yo(),H=s,Ni.current=n,ie!==null)throw Error(T(261));return he=null,pe=0,ce}function K0(){for(;ie!==null;)Hh(ie)}function q0(){for(;ie!==null&&!yf();)Hh(ie)}function Hh(t){var e=qh(t.alternate,t,Le);t.memoizedProps=t.pendingProps,e===null?Wh(t):ie=e,Do.current=null}function Wh(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=F0(s,e),s!==null){s.flags&=32767,ie=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ce=6,ie=null;return}}else if(s=U0(s,e,Le),s!==null){ie=s;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);ce===0&&(ce=5)}function os(t,e,s){var n=W,i=Je.transition;try{Je.transition=null,W=1,G0(t,e,s,n)}finally{Je.transition=i,W=n}return null}function G0(t,e,s,n){do Zs();while(Ft!==null);if(H&6)throw Error(T(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(Ef(t,a),t===he&&(ie=he=null,pe=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ln||(Ln=!0,Gh(li,function(){return Zs(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Je.transition,Je.transition=null;var l=W;W=1;var o=H;H|=4,Do.current=null,B0(t,s),Uh(s,t),f0(ll),ci=!!al,ll=al=null,t.current=s,V0(s),vf(),H=o,W=l,Je.transition=a}else t.current=s;if(Ln&&(Ln=!1,Ft=t,_i=i),a=t.pendingLanes,a===0&&(Kt=null),jf(s.stateNode),Oe(t,re()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(ki)throw ki=!1,t=Cl,Cl=null,t;return _i&1&&t.tag!==0&&Zs(),a=t.pendingLanes,a&1?t===El?Br++:(Br=0,El=t):Br=0,ss(),null}function Zs(){if(Ft!==null){var t=_u(_i),e=Je.transition,s=W;try{if(Je.transition=null,W=16>t?16:t,Ft===null)var n=!1;else{if(t=Ft,Ft=null,_i=0,H&6)throw Error(T(331));var i=H;for(H|=4,I=t.current;I!==null;){var a=I,l=a.child;if(I.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(I=d;I!==null;){var u=I;switch(u.tag){case 0:case 11:case 15:Fr(8,u,a)}var h=u.child;if(h!==null)h.return=u,I=h;else for(;I!==null;){u=I;var f=u.sibling,v=u.return;if($h(u),u===d){I=null;break}if(f!==null){f.return=v,I=f;break}I=v}}}var x=a.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}I=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,I=l;else e:for(;I!==null;){if(a=I,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fr(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,I=y;break e}I=a.return}}var m=t.current;for(I=m;I!==null;){l=I;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,I=p;else e:for(l=m;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zi(9,o)}}catch(N){te(o,o.return,N)}if(o===l){I=null;break e}var g=o.sibling;if(g!==null){g.return=o.return,I=g;break e}I=o.return}}if(H=i,ss(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ri,t)}catch{}n=!0}return n}finally{W=s,Je.transition=e}}return!1}function ld(t,e,s){e=ar(s,e),e=_h(t,e,1),t=Wt(t,e,1),e=ke(),t!==null&&(fn(t,1,e),Oe(t,e))}function te(t,e,s){if(t.tag===3)ld(t,t,s);else for(;e!==null;){if(e.tag===3){ld(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kt===null||!Kt.has(n))){t=ar(s,t),t=Sh(e,t,1),e=Wt(e,t,1),t=ke(),e!==null&&(fn(e,1,t),Oe(e,t));break}}e=e.return}}function J0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=ke(),t.pingedLanes|=t.suspendedLanes&s,he===t&&(pe&s)===s&&(ce===4||ce===3&&(pe&130023424)===pe&&500>re()-Ro?xs(t,0):Ao|=s),Oe(t,e)}function Kh(t,e){e===0&&(t.mode&1?(e=Cn,Cn<<=1,!(Cn&130023424)&&(Cn=4194304)):e=1);var s=ke();t=Ct(t,e),t!==null&&(fn(t,e,s),Oe(t,s))}function Q0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Kh(t,s)}function Y0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),Kh(t,s)}var qh;qh=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Re.current)Ae=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ae=!1,M0(t,e,s);Ae=!!(t.flags&131072)}else Ae=!1,Y&&e.flags&1048576&&Yu(e,xi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xn(t,e),t=e.pendingProps;var i=sr(e,be.current);Xs(e,s),i=So(null,e,n,t,i,s);var a=Co();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ie(n)?(a=!0,fi(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wo(e),i.updater=Fi,e.stateNode=i,i._reactInternals=e,xl(e,n,t,s),e=vl(null,e,n,!0,a,s)):(e.tag=0,Y&&a&&fo(e),je(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Xn(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Z0(n),t=et(n,t),i){case 0:e=yl(null,e,n,t,s);break e;case 1:e=Yc(null,e,n,t,s);break e;case 11:e=Jc(null,e,n,t,s);break e;case 14:e=Qc(null,e,n,et(n.type,t),s);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:et(n,i),yl(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:et(n,i),Yc(t,e,n,i,s);case 3:e:{if(Th(e),t===null)throw Error(T(387));n=e.pendingProps,a=e.memoizedState,i=a.element,rh(t,e),vi(e,n,null,s);var l=e.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=ar(Error(T(423)),e),e=Xc(t,e,n,s,i);break e}else if(n!==i){i=ar(Error(T(424)),e),e=Xc(t,e,n,s,i);break e}else for(Me=Ht(e.stateNode.containerInfo.firstChild),Ue=e,Y=!0,rt=null,s=th(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(rr(),n===i){e=Et(t,e,s);break e}je(t,e,n,s)}e=e.child}return e;case 5:return nh(e),t===null&&ml(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,ol(n,i)?l=null:a!==null&&ol(n,a)&&(e.flags|=32),Ph(t,e),je(t,e,l,s),e.child;case 6:return t===null&&ml(e),null;case 13:return Dh(t,e,s);case 4:return jo(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=nr(e,null,n,s):je(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:et(n,i),Jc(t,e,n,i,s);case 7:return je(t,e,e.pendingProps,s),e.child;case 8:return je(t,e,e.pendingProps.children,s),e.child;case 12:return je(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,q(gi,n._currentValue),n._currentValue=l,a!==null)if(at(a.value,l)){if(a.children===i.children&&!Re.current){e=Et(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=wt(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),fl(a.return,s,e),o.lanes|=s;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(T(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),fl(l,s,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}je(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Xs(e,s),i=Ye(i),n=n(i),e.flags|=1,je(t,e,n,s),e.child;case 14:return n=e.type,i=et(n,e.pendingProps),i=et(n.type,i),Qc(t,e,n,i,s);case 15:return Ch(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:et(n,i),Xn(t,e),e.tag=1,Ie(n)?(t=!0,fi(e)):t=!1,Xs(e,s),kh(e,n,i),xl(e,n,i,s),vl(null,e,n,!0,t,s);case 19:return Ah(t,e,s);case 22:return Eh(t,e,s)}throw Error(T(156,e.tag))};function Gh(t,e){return wu(t,e)}function X0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(t,e,s,n){return new X0(t,e,s,n)}function Lo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z0(t){if(typeof t=="function")return Lo(t)?1:0;if(t!=null){if(t=t.$$typeof,t===to)return 11;if(t===so)return 14}return 2}function Gt(t,e){var s=t.alternate;return s===null?(s=Ge(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function ti(t,e,s,n,i,a){var l=2;if(n=t,typeof t=="function")Lo(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ls:return gs(s.children,i,a,e);case eo:l=8,i|=8;break;case Fa:return t=Ge(12,s,e,i|2),t.elementType=Fa,t.lanes=a,t;case za:return t=Ge(13,s,e,i),t.elementType=za,t.lanes=a,t;case Ba:return t=Ge(19,s,e,i),t.elementType=Ba,t.lanes=a,t;case nu:return Vi(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case su:l=10;break e;case ru:l=9;break e;case to:l=11;break e;case so:l=14;break e;case It:l=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Ge(l,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function gs(t,e,s,n){return t=Ge(7,t,n,e),t.lanes=s,t}function Vi(t,e,s,n){return t=Ge(22,t,n,e),t.elementType=nu,t.lanes=s,t.stateNode={isHidden:!1},t}function Ca(t,e,s){return t=Ge(6,t,null,e),t.lanes=s,t}function Ea(t,e,s){return e=Ge(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ep(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oa(0),this.expirationTimes=oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mo(t,e,s,n,i,a,l,o,c){return t=new ep(t,e,s,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ge(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},wo(a),t}function tp(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Jh(t){if(!t)return Qt;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ie(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var s=t.type;if(Ie(s))return Ju(t,s,e)}return e}function Qh(t,e,s,n,i,a,l,o,c){return t=Mo(s,n,!0,t,i,a,l,o,c),t.context=Jh(null),s=t.current,n=ke(),i=qt(s),a=wt(n,i),a.callback=e??null,Wt(s,a,i),t.current.lanes=i,fn(t,i,n),Oe(t,n),t}function Hi(t,e,s,n){var i=e.current,a=ke(),l=qt(i);return s=Jh(s),e.context===null?e.context=s:e.pendingContext=s,e=wt(a,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Wt(i,e,l),t!==null&&(it(t,i,l,a),Jn(t,i,l)),l}function Ci(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function od(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Uo(t,e){od(t,e),(t=t.alternate)&&od(t,e)}function sp(){return null}var Yh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fo(t){this._internalRoot=t}Wi.prototype.render=Fo.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Hi(t,e,null,null)};Wi.prototype.unmount=Fo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){Hi(null,t,null,null)}),e[St]=null}};function Wi(t){this._internalRoot=t}Wi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Eu();t={blockedOn:null,target:t,priority:e};for(var s=0;s<$t.length&&e!==0&&e<$t[s].priority;s++);$t.splice(s,0,t),s===0&&Tu(t)}};function zo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ki(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cd(){}function rp(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Ci(l);a.call(d)}}var l=Qh(e,n,t,0,null,!1,!1,"",cd);return t._reactRootContainer=l,t[St]=l.current,en(t.nodeType===8?t.parentNode:t),js(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var d=Ci(c);o.call(d)}}var c=Mo(t,0,!1,null,null,!1,!1,"",cd);return t._reactRootContainer=c,t[St]=c.current,en(t.nodeType===8?t.parentNode:t),js(function(){Hi(e,c,s,n)}),c}function qi(t,e,s,n,i){var a=s._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=Ci(l);o.call(c)}}Hi(e,l,t,i)}else l=rp(s,e,t,i,n);return Ci(l)}Su=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Dr(e.pendingLanes);s!==0&&(io(e,s|1),Oe(e,re()),!(H&6)&&(lr=re()+500,ss()))}break;case 13:js(function(){var n=Ct(t,1);if(n!==null){var i=ke();it(n,t,1,i)}}),Uo(t,1)}};ao=function(t){if(t.tag===13){var e=Ct(t,134217728);if(e!==null){var s=ke();it(e,t,134217728,s)}Uo(t,134217728)}};Cu=function(t){if(t.tag===13){var e=qt(t),s=Ct(t,e);if(s!==null){var n=ke();it(s,t,e,n)}Uo(t,e)}};Eu=function(){return W};Pu=function(t,e){var s=W;try{return W=t,e()}finally{W=s}};Xa=function(t,e,s){switch(e){case"input":if(Wa(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=Li(n);if(!i)throw Error(T(90));au(n),Wa(n,i)}}}break;case"textarea":ou(t,s);break;case"select":e=s.value,e!=null&&Gs(t,!!s.multiple,e,!1)}};pu=Io;xu=js;var np={usingClientEntryPoint:!1,Events:[xn,zs,Li,mu,fu,Io]},Nr={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ip={bundleType:Nr.bundleType,version:Nr.version,rendererPackageName:Nr.rendererPackageName,rendererConfig:Nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vu(t),t===null?null:t.stateNode},findFiberByHostInstance:Nr.findFiberByHostInstance||sp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mn.isDisabled&&Mn.supportsFiber)try{Ri=Mn.inject(ip),ht=Mn}catch{}}Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=np;Be.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zo(e))throw Error(T(200));return tp(t,e,null,s)};Be.createRoot=function(t,e){if(!zo(t))throw Error(T(299));var s=!1,n="",i=Yh;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mo(t,1,!1,null,null,s,!1,n,i),t[St]=e.current,en(t.nodeType===8?t.parentNode:t),new Fo(e)};Be.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=vu(e),t=t===null?null:t.stateNode,t};Be.flushSync=function(t){return js(t)};Be.hydrate=function(t,e,s){if(!Ki(e))throw Error(T(200));return qi(null,t,e,!0,s)};Be.hydrateRoot=function(t,e,s){if(!zo(t))throw Error(T(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",l=Yh;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=Qh(e,null,t,1,s??null,i,!1,a,l),t[St]=e.current,en(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new Wi(e)};Be.render=function(t,e,s){if(!Ki(e))throw Error(T(200));return qi(null,t,e,!1,s)};Be.unmountComponentAtNode=function(t){if(!Ki(t))throw Error(T(40));return t._reactRootContainer?(js(function(){qi(null,null,t,!1,function(){t._reactRootContainer=null,t[St]=null})}),!0):!1};Be.unstable_batchedUpdates=Io;Be.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Ki(s))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return qi(t,e,s,!1,n)};Be.version="18.3.1-next-f1338f8080-20240426";function Xh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xh)}catch(t){console.error(t)}}Xh(),Xd.exports=Be;var ap=Xd.exports,Zh,dd=ap;Zh=dd.createRoot,dd.hydrateRoot;const lp="modulepreload",op=function(t){return"/-ai-sales-app/"+t},ud={},yn=function(e,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(s.map(c=>{if(c=op(c),c in ud)return;ud[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":lp,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},cp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>yn(async()=>{const{default:n}=await Promise.resolve().then(()=>mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Bo extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class hd extends Bo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class md extends Bo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fd extends Bo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Dl||(Dl={}));var dp=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class up{constructor(e,{headers:s={},customFetch:n,region:i=Dl.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=cp(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return dp(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l,signal:o}=s;let c={},{region:d}=s;d||(d=this.region);const u=new URL(`${this.url}/${e}`);d&&d!=="any"&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d));let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(c["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:o}).catch(S=>{throw S.name==="AbortError"?S:new hd(S)}),v=f.headers.get("x-relay-error");if(v&&v==="true")throw new md(f);if(!f.ok)throw new fd(f);let x=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield f.json():x==="application/octet-stream"?b=yield f.blob():x==="text/event-stream"?b=f:x==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null,response:f}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new hd(i)}:{data:null,error:i,response:i instanceof fd||i instanceof md?i.context:void 0}}})}}var Te={},Vo={},Gi={},vn={},Ji={},Qi={},hp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},or=hp();const mp=or.fetch,em=or.fetch.bind(or),tm=or.Headers,fp=or.Request,pp=or.Response,mr=Object.freeze(Object.defineProperty({__proto__:null,Headers:tm,Request:fp,Response:pp,default:em,fetch:mp},Symbol.toStringTag,{value:"Module"})),xp=Rm(mr);var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});let gp=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Yi.default=gp;var sm=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qi,"__esModule",{value:!0});const yp=sm(xp),vp=sm(Yi);let bp=class{constructor(e){var s,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=yp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c,d;let u=null,h=null,f=null,v=a.status,x=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const S=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");S&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,v=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const S=await a.text();try{u=JSON.parse(S),Array.isArray(u)&&a.status===404&&(h=[],u=null,v=200,x="OK")}catch{a.status===404&&S===""?(v=204,x="No Content"):u={message:S}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,v=200,x="OK"),u&&this.shouldThrowOnError)throw new vp.default(u)}return{error:u,data:h,count:f,status:v,statusText:x}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};Qi.default=bp;var wp=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});const jp=wp(Qi);let Np=class extends jp.default{select(e){let s=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ji.default=Np;var kp=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vn,"__esModule",{value:!0});const _p=kp(Ji);let Sp=class extends _p.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${l}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};vn.default=Sp;var Cp=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});const kr=Cp(vn);let Ep=class{constructor(e,{headers:s={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(s),this.schema=n,this.fetch=i}select(e,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new kr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:n=!0}={}){var i;const a="POST";if(s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new kr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new kr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:s}={}){var n;const i="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new kr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var s;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new kr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Gi.default=Ep;var rm=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vo,"__esModule",{value:!0});const Pp=rm(Gi),Tp=rm(vn);let Dp=class nm{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(s),this.schemaName=n,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new Pp.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new nm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:a}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let d;n||i?(o=n?"HEAD":"GET",Object.entries(s).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(o="POST",d=s);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new Tp.default({method:o,url:c,headers:u,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Vo.default=Dp;var fr=Qe&&Qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Te,"__esModule",{value:!0});Te.PostgrestError=Te.PostgrestBuilder=Te.PostgrestTransformBuilder=Te.PostgrestFilterBuilder=Te.PostgrestQueryBuilder=Te.PostgrestClient=void 0;const im=fr(Vo);Te.PostgrestClient=im.default;const am=fr(Gi);Te.PostgrestQueryBuilder=am.default;const lm=fr(vn);Te.PostgrestFilterBuilder=lm.default;const om=fr(Ji);Te.PostgrestTransformBuilder=om.default;const cm=fr(Qi);Te.PostgrestBuilder=cm.default;const dm=fr(Yi);Te.PostgrestError=dm.default;var Ap=Te.default={PostgrestClient:im.default,PostgrestQueryBuilder:am.default,PostgrestFilterBuilder:lm.default,PostgrestTransformBuilder:om.default,PostgrestBuilder:cm.default,PostgrestError:dm.default};const{PostgrestClient:Rp,PostgrestQueryBuilder:qy,PostgrestFilterBuilder:Gy,PostgrestTransformBuilder:Jy,PostgrestBuilder:Qy,PostgrestError:Yy}=Ap;class Ip{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Op="2.15.5",$p=`realtime-js/${Op}`,Lp="1.0.0",Al=1e4,Mp=1e3,Up=100;var Vr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vr||(Vr={}));var le;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(le||(le={}));var st;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(st||(st={}));var Rl;(function(t){t.websocket="websocket"})(Rl||(Rl={}));var ds;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ds||(ds={}));class Fp{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const i=s.getUint8(1),a=s.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(e.slice(l,l+i));l=l+i;const c=n.decode(e.slice(l,l+a));l=l+a;const d=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class um{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(K||(K={}));const pd=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,l)=>(a[l]=zp(l,t,e,i),a),{})},zp=(t,e,s,n)=>{const i=e.find(o=>o.name===t),a=i==null?void 0:i.type,l=s[t];return a&&!n.includes(a)?hm(a,l):Il(l)},hm=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Wp(e,s)}switch(t){case K.bool:return Bp(e);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return Vp(e);case K.json:case K.jsonb:return Hp(e);case K.timestamp:return Kp(e);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return Il(e);default:return Il(e)}},Il=t=>t,Bp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Vp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Hp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Wp=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let a;const l=t.slice(1,s);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>hm(e,o))}return t},Kp=t=>typeof t=="string"?t.replace(" ","T"):t,mm=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Pa{constructor(e,s,n={},i=Al){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xd||(xd={}));class Hr{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hr.syncState(this.state,i,a,l),this.pendingDiffs.forEach(c=>{this.state=Hr.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hr.syncDiff(this.state,i,a,l),o())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const a=this.cloneDeep(e),l=this.transformState(s),o={},c={};return this.map(a,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const h=a[d];if(h){const f=u.map(S=>S.presence_ref),v=h.map(S=>S.presence_ref),x=u.filter(S=>v.indexOf(S.presence_ref)<0),b=h.filter(S=>f.indexOf(S.presence_ref)<0);x.length>0&&(o[d]=x),b.length>0&&(c[d]=b)}else o[d]=u}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(e,s,n,i){const{joins:a,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var d;const u=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(c),u.length>0){const h=e[o].map(v=>v.presence_ref),f=u.filter(v=>h.indexOf(v.presence_ref)<0);e[o].unshift(...f)}n(o,u,c)}),this.map(l,(o,c)=>{let d=e[o];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=d,i(o,d,c),d.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(gd||(gd={}));var Wr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wr||(Wr={}));var gt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gt||(gt={}));class Ho{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Pa(this,st.join,this.params,this.timeout),this.rejoinTimer=new um(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Hr(this),this.broadcastEndpointURL=mm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Wr.PRESENCE]&&this.bindings[Wr.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(gt.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(gt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:v})=>{var x;if(this.socket.setAuth(),v===void 0){e==null||e(gt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,S=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,y=[];for(let m=0;m<S;m++){const p=b[m],{filter:{event:g,schema:N,table:k,filter:C}}=p,j=v&&v[m];if(j&&j.event===g&&j.schema===N&&j.table===k&&j.filter===C)y.push(Object.assign(Object.assign({},p),{id:j.id}));else{this.unsubscribe(),this.state=le.errored,e==null||e(gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(gt.SUBSCRIBED);return}}).receive("error",v=>{this.state=le.errored,e==null||e(gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===le.joined&&e===Wr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Pa(this,st.leave,{},e),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(a),l}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Pa(this,e,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Up){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,a;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=st;if(n&&[o,c,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let f=this._onMessage(l,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var x,b,S;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((S=(b=v.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(v=>v.callback(f,n)):(a=this.bindings[l])===null||a===void 0||a.filter(v=>{var x,b,S,y,m,p;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const g=v.id,N=(x=v.filter)===null||x===void 0?void 0:x.event;return g&&((b=s.ids)===null||b===void 0?void 0:b.includes(g))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((S=s.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const g=(m=(y=v==null?void 0:v.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return g==="*"||g===((p=s==null?void 0:s.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:b,table:S,commit_timestamp:y,type:m,errors:p}=x;f=Object.assign(Object.assign({},{schema:b,table:S,commit_timestamp:y,eventType:m,new:{},old:{},errors:p}),this._getPayloadRecords(x))}v.callback(f,n)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),a={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Ho.isEqual(i.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(st.close,{},e)}_onError(e){this._on(st.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=pd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=pd(e.columns,e.old_record)),s}}const Ta=()=>{},Un={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qp=[1e3,2e3,5e3,1e4],Gp=1e4,Jp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qp{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Al,this.transport=null,this.heartbeatIntervalMs=Un.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ta,this.ref=0,this.reconnectTimer=null,this.logger=Ta,this.conn=null,this.sendBuffer=[],this.serializer=new Fp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>yn(async()=>{const{default:o}=await Promise.resolve().then(()=>mr);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Rl.websocket}`,this.httpEndpoint=mm(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ip.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Lp}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Vr.connecting:return ds.Connecting;case Vr.open:return ds.Open;case Vr.closing:return ds.Closing;default:return ds.Closed}}isConnected(){return this.connectionState()===ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Ho(`realtime:${e}`,s,this);return this.channels.push(a),a}}push(e){const{topic:s,event:n,payload:i,ref:a}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Mp,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Un.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:l}=s,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(i,a,l)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(st.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Jp],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:$p};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(st.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new um(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Un.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,i,a,l,o,c,d,u;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Al,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Un.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Ta,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>qp[h-1]||Gp,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,f)=>f(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Wo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Yp extends Wo{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ol extends Wo{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Xp=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const fm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>yn(async()=>{const{default:n}=await Promise.resolve().then(()=>mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Zp=()=>Xp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yn(()=>Promise.resolve().then(()=>mr),void 0)).Response:Response}),$l=t=>{if(Array.isArray(t))return t.map(s=>$l(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=$l(n)}),e},ex=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Cs=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const Da=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tx=(t,e,s)=>Cs(void 0,void 0,void 0,function*(){const n=yield Zp();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{const a=t.status||500,l=(i==null?void 0:i.statusCode)||a+"";e(new Yp(Da(i),a,l))}).catch(i=>{e(new Ol(Da(i),i))}):e(new Ol(Da(t),t))}),sx=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(ex(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),s))};function bn(t,e,s,n,i,a){return Cs(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(s,sx(e,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>tx(c,o,n))})})}function Ei(t,e,s,n){return Cs(this,void 0,void 0,function*(){return bn(t,"GET",e,s,n)})}function dt(t,e,s,n,i){return Cs(this,void 0,void 0,function*(){return bn(t,"POST",e,n,i,s)})}function Ll(t,e,s,n,i){return Cs(this,void 0,void 0,function*(){return bn(t,"PUT",e,n,i,s)})}function rx(t,e,s,n){return Cs(this,void 0,void 0,function*(){return bn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function pm(t,e,s,n,i){return Cs(this,void 0,void 0,function*(){return bn(t,"DELETE",e,n,i,s)})}var nx=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class ix{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}execute(){return nx(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}var ax=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class lx{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}asStream(){return new ix(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.execute().then(e,s)}execute(){return ax(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}var Ee=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const ox={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cx{constructor(e,s={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=n,this.fetch=fm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,n,i){return Ee(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},yd),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?Ll:dt)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ne(a))return{data:null,error:a};throw a}})}upload(e,s,n){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,i){return Ee(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:yd.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield Ll(this.fetch,o.toString(),c,{headers:u});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ne(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return Ee(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const a=yield dt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new Wo("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}update(e,s,n){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Ee(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}copy(e,s,n){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,n){return Ee(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield dt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,n){return Ee(this,void 0,void 0,function*(){try{const i=yield dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}download(e,s){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=a?`?${a}`:"",o=this._getFinalPath(e),c=()=>Ei(this.fetch,`${this.url}/${i}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new lx(c,this.shouldThrowOnError)}info(e){return Ee(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ei(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:$l(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}exists(e){return Ee(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield rx(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n)&&n instanceof Ol){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),i=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&i.push(a);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}list(e,s,n){return Ee(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ox),s),{prefix:e||""});return{data:yield dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}listV2(e,s){return Ee(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield dt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const dx="2.12.2",ux={"X-Client-Info":`storage-js/${dx}`};var Ps=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class hx{constructor(e,s={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},ux),s),this.fetch=fm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ps(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ps(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Ps(this,void 0,void 0,function*(){try{return{data:yield Ll(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ps(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}}class mx extends hx{constructor(e,s={},n,i){super(e,s,n,i)}from(e){return new cx(this.url,this.headers,e,this.fetch)}}const fx="2.58.0";let Rr="";typeof Deno<"u"?Rr="deno":typeof document<"u"?Rr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rr="react-native":Rr="node";const px={"X-Client-Info":`supabase-js-${Rr}/${fx}`},xx={headers:px},gx={schema:"public"},yx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vx={};var bx=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};const wx=t=>{let e;return t?e=t:typeof fetch>"u"?e=em:e=fetch,(...s)=>e(...s)},jx=()=>typeof Headers>"u"?tm:Headers,Nx=(t,e,s)=>{const n=wx(s),i=jx();return(a,l)=>bx(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let d=new i(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:d}))})};var kx=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};function _x(t){return t.endsWith("/")?t:t+"/"}function Sx(t,e){var s,n;const{db:i,auth:a,realtime:l,global:o}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),l),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>kx(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Cx(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_x(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xm="2.72.0",Is=30*1e3,Ml=3,Aa=Ml*Is,Ex="http://localhost:9999",Px="supabase.auth.token",Tx={"X-Client-Info":`gotrue-js/${xm}`},Ul="X-Supabase-Api-Version",gm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ax=10*60*1e3;class Ko extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function F(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Rx extends Ko{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Ix(t){return F(t)&&t.name==="AuthApiError"}class ym extends Ko{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class rs extends Ko{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class Rt extends rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ox(t){return F(t)&&t.name==="AuthSessionMissingError"}class _r extends rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fn extends rs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zn extends rs{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $x(t){return F(t)&&t.name==="AuthImplicitGrantRedirectError"}class vd extends rs{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fl extends rs{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Ra(t){return F(t)&&t.name==="AuthRetryableFetchError"}class bd extends rs{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class zl extends rs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wd=` 	
\r=`.split(""),Lx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wd.length;e+=1)t[wd[e].charCodeAt(0)]=-2;for(let e=0;e<Pi.length;e+=1)t[Pi[e].charCodeAt(0)]=e;return t})();function jd(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Pi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Pi[n]),e.queuedBits-=6}}function vm(t,e,s){const n=Lx[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Nd(t){const e=[],s=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{Fx(l,n,s)};for(let l=0;l<t.length;l+=1)vm(t.charCodeAt(l),i,a);return e.join("")}function Mx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ux(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}Mx(n,e)}}function Fx(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function zx(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)vm(t.charCodeAt(i),s,n);return new Uint8Array(e)}function Bx(t){const e=[];return Ux(t,s=>e.push(s)),new Uint8Array(e)}function Vx(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>jd(i,s,n)),jd(null,s,n),e.join("")}function Hx(t){return Math.round(Date.now()/1e3)+t}function Wx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const We=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},bm=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function Kx(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const wm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>yn(async()=>{const{default:n}=await Promise.resolve().then(()=>mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},qx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Os=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},as=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},At=async(t,e)=>{await t.removeItem(e)};class Xi{constructor(){this.promise=new Xi.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Xi.promiseConstructor=Promise;function Ia(t){const e=t.split(".");if(e.length!==3)throw new zl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Dx.test(e[n]))throw new zl("JWT not in base64url format");return{header:JSON.parse(Nd(e[0])),payload:JSON.parse(Nd(e[1])),signature:zx(e[2]),raw:{header:e[0],payload:e[1]}}}async function Gx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Jx(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function Qx(t){return("0"+t.toString(16)).substr(-2)}function Yx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let a=0;a<56;a++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Qx).join("")}async function Xx(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Zx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Xx(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ts(t,e,s=!1){const n=Yx();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await Os(t,`${e}-code-verifier`,i);const a=await Zx(n);return[a,n===a?"plain":"s256"]}const eg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tg(t){const e=t.headers.get(Ul);if(!e||!e.match(eg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function sg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function rg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ng=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ds(t){if(!ng.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oa(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kd(t){return JSON.parse(JSON.stringify(t))}var ig=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const cs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ag=[502,503,504];async function _d(t){var e;if(!qx(t))throw new Fl(cs(t),0);if(ag.includes(t.status))throw new Fl(cs(t),t.status);let s;try{s=await t.json()}catch(a){throw new ym(cs(a),a)}let n;const i=tg(t);if(i&&i.getTime()>=gm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new bd(cs(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Rt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new bd(cs(s),t.status,s.weak_password.reasons);throw new Rx(cs(s),t.status||500,n)}const lg=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function B(t,e,s,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Ul]||(a[Ul]=gm["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await og(t,e,s+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function og(t,e,s,n,i,a){const l=lg(e,n,i,a);let o;try{o=await t(s,Object.assign({},l))}catch(c){throw console.error(c),new Fl(cs(c),0)}if(o.ok||await _d(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await _d(c)}}function ot(t){var e;let s=null;hg(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Hx(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Sd(t){const e=ot(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Mt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cg(t){return{data:t,error:null}}function dg(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a}=t,l=ig(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function ug(t){return t}function hg(t){return t.access_token&&t.refresh_token&&t.expires_in}const $a=["global","local","others"];var mg=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};class fg{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=wm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=$a[0]){if($a.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$a.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Mt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=mg(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:dg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(F(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mt})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,a,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ug});if(u.error)throw u.error;const h=await u.json(),f=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(x.split(";")[1].split("=")[1]);d[`${S}Page`]=b}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(F(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ds(e);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mt})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ds(e);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Mt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ds(e);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Mt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ds(e.userId);try{const{data:s,error:n}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(F(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ds(e.userId),Ds(e.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}}function Cd(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function pg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const As={debug:!!(globalThis&&bm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xg extends jm{}async function gg(t,e,s){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),As.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){As.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{As.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw As.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(As.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Nm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function yg(t){return parseInt(t,16)}function vg(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function bg(t){var e;const{chainId:s,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:o,requestId:c,resources:d,scheme:u,uri:h,version:f}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=Nm(t.address),x=u?`${u}://${n}`:n,b=t.statement?`${t.statement}
`:"",S=`${x} wants you to sign in with your Ethereum account:
${v}

${b}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${s}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let m=`
Resources:`;for(const p of d){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);m+=`
- ${p}`}y+=m}return`${S}
${y}`}pg();const wg={url:Ex,storageKey:Px,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ed(t,e,s){return await s()}const Rs={};class dn{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dn.nextInstanceID,dn.nextInstanceID+=1,this.instanceID>0&&We()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},wg),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=wm(i.fetch),this.lock=i.lock||Ed,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:We()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=gg:this.lock=Ed,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:bm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Cd(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Rs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Rs[this.storageKey]=Object.assign(Object.assign({},Rs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Rs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Rs[this.storageKey]=Object.assign(Object.assign({},Rs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xm}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Kx(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),We()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(s,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),$x(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return F(s)?{error:s}:{error:new ym("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const a=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ot}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(F(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var s,n,i;try{let a;if("email"in e){const{email:u,password:h,options:f}=e;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Ts(this.storage,this.storageKey)),a=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:x},xform:ot})}else if("phone"in e){const{phone:u,password:h,options:f}=e;a=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ot})}else throw new Fn("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(F(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let s;if("email"in e){const{email:a,password:l,options:o}=e;s=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sd})}else if("phone"in e){const{phone:a,password:l,options:o}=e;s=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sd})}else throw new Fn("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new _r}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,n,i,a,l,o,c,d,u,h,f;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:b,wallet:S,statement:y,options:m}=e;let p;if(We())if(typeof S=="object")p=S;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")p=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=S}const g=new URL((s=m==null?void 0:m.url)!==null&&s!==void 0?s:window.location.href),N=await p.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=Nm(N[0]);let C=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const M=await p.request({method:"eth_chainId"});C=yg(M)}const j={domain:g.host,address:k,statement:y,uri:g.href,version:"1",chainId:C,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.resources};v=bg(j),x=await p.request({method:"personal_sign",params:[vg(v),k]})}try{const{data:b,error:S}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ot});if(S)throw S;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new _r}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:S})}catch(b){if(F(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(e){var s,n,i,a,l,o,c,d,u,h,f,v;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:S,wallet:y,statement:m,options:p}=e;let g;if(We())if(typeof y=="object")g=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))g=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=y}const N=new URL((s=p==null?void 0:p.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in g&&g.signIn){const k=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),m?{statement:m}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)x=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),b=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((d=p==null?void 0:p.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(u=p==null?void 0:p.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await g.signMessage(new TextEncoder().encode(x),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=k}}try{const{data:S,error:y}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Vx(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ot});if(y)throw y;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new _r}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:y})}catch(S){if(F(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(e){const s=await as(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ot});if(await At(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new _r}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(F(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:a,nonce:l}=e,o=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ot}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _r}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,i,a,l;try{if("email"in e){const{email:o,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ts(this.storage,this.storageKey));const{error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:c}=e,{data:d,error:u}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Fn("You must provide either an email or phone number.")}catch(o){if(F(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var s,n;try{let i,a;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ot});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,n,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Ts(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:cg})}catch(a){if(F(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Rt;const{error:i}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(F(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:l}=await B(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:l,error:o}=await B(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Fn("You must provide either an email or phone number and a type")}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await as(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Aa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await as(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Oa()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mt}):await this._useSession(async s=>{var n,i,a;const{data:l,error:o}=s;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rt}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Mt})})}catch(s){if(F(s))return Ox(s)&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Rt;const l=i.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Ts(this.storage,this.storageKey));const{data:d,error:u}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Mt});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rt;const s=Date.now()/1e3;let n=s,i=!0,a=null;const{payload:l}=Ia(e.access_token);if(l.exp&&(n=l.exp,i=n<=s),i){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(F(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:l,error:o}=s;if(o)throw o;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Rt;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!We())throw new zn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new vd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zn("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vd("No code detected.");const{data:m,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=e;if(!a||!o||!l||!d)throw new zn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;c&&(f=parseInt(c));const v=f-u;v*1e3<=Is&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const x=f-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,u);const{data:b,error:S}=await this._getUser(a);if(S)throw S;const y={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:f,refresh_token:l,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(F(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await as(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{error:a};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(Ix(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Wx(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:a},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Ts(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(F(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:i}=await this._useSession(async a=>{var l,o,c,d,u;const{data:h,error:f}=a;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return We()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(F(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:a,error:l}=s;if(l)throw l;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(F(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Jx(async i=>(i>0&&await Gx(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Ra(a)&&Date.now()+l-n<Is})}catch(n){if(this._debug(s,"error",n),F(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),We()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await as(this.storage,this.storageKey);if(i&&this.userStorage){let l=await as(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Os(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Oa()}else if(i&&!i.user&&!i.user){const l=await as(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await At(this.storage,this.storageKey+"-user"),await Os(this.storage,this.storageKey,i)):i.user=Oa()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Aa;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Aa}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Ra(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(i.access_token);!o&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Xi;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Rt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),F(a)){const l={session:null,error:a};return Ra(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,s)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Os(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const a=kd(i);await Os(this.storage,this.storageKey,a)}else{const i=kd(s);await Os(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await At(this.storage,this.storageKey),await At(this.storage,this.storageKey+"-code-verifier"),await At(this.storage,this.storageKey+"-user"),this.userStorage&&await At(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&We()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Is);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Is);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Is}ms, refresh threshold is ${Ml} ticks`),i<=Ml&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!We()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Ts(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(F(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:a,error:l}=s;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await B(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(F(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:o}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(s){if(F(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(F(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],i=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ia(i.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Ax>i)return n;const{data:a,error:l}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:v,error:x}=await this.getSession();if(x||!v.session)return{data:null,error:x};n=v.session.access_token}const{header:i,payload:a,signature:l,raw:{header:o,payload:c}}=Ia(n);s!=null&&s.allowExpired||sg(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:a,header:i,signature:l},error:null}}const u=rg(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,l,Bx(`${o}.${c}`)))throw new zl("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}}dn.nextInstanceID=0;const jg=dn;class Ng extends jg{constructor(e){super(e)}}var kg=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(t,e||[])).next())})};class _g{constructor(e,s,n){var i,a,l;this.supabaseUrl=e,this.supabaseKey=s;const o=Cx(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:gx,realtime:vx,auth:Object.assign(Object.assign({},yx),{storageKey:c}),global:xx},u=Sx(n??{},d);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=Nx(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Rp(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new mx(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new up(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return kg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:l,flowType:o,lock:c,debug:d},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ng({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:l,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,userStorage:a,flowType:o,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Qp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sg=(t,e,s)=>new _g(t,e,s);function Cg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Cg()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Eg="",Pg="";console.warn("[Supabase] VITE_SUPABASE_URL/ANON_KEY が未設定です。envとVite再起動を確認してください。");const Fe=Sg(Eg,Pg);async function Bl(t){try{console.log("📖 参加イベント読み込み開始 - ユーザーID:",t);const{data:e,error:s}=await Fe.from("user_event_participation").select("event_id").eq("user_id",t).eq("is_active",!0);if(s)return console.error("❌ Get user participating events error:",s),[];const n=e?e.map(i=>i.event_id):[];return console.log("✅ 参加イベント読み込み完了:",n),n}catch(e){return console.error("❌ Get user participating events failed:",e),[]}}async function Tg(t,e){try{console.log("💾 参加イベント保存開始:",{userId:t,eventIds:e});const{error:s}=await Fe.from("user_event_participation").delete().eq("user_id",t);if(s)return console.error("❌ Delete existing events error:",s),!1;if(console.log("✅ 既存データを削除しました"),e.length>0){const n=e.map(a=>({user_id:t,event_id:a,is_active:!0}));console.log("📝 新規データを挿入中...",n);const{error:i}=await Fe.from("user_event_participation").insert(n);if(i)return console.error("❌ Insert participation error:",i),console.error("❌ エラー詳細 - コード:",i.code,"メッセージ:",i.message,"詳細:",i.details),!1;console.log("✅ 新規データ挿入成功")}return console.log("✅ 参加イベント保存完了"),!0}catch(s){return console.error("❌ Save user participating events failed:",s),!1}}async function Dg(t){try{const{data:e,error:s}=await Fe.from("users").select("*").eq("email",t.email).eq("password",t.password).limit(1);if(s)return console.error("Login error:",s),null;if(!e||e.length===0)return console.error("User not found or password incorrect"),null;const n=e[0],i=await Bl(n.id);return{id:n.id,name:n.name,email:n.email,department:n.department,role:n.role,avatar:n.avatar,participatingEvents:i}}catch(e){return console.error("Login failed:",e),null}}async function Ag(t){try{const{data:e,error:s}=await Fe.from("users").select("email").eq("email",t.email).limit(1);if(s)return console.error("Email check error:",s),null;if(e&&e.length>0)return console.error("Email already exists"),null;const{data:n,error:i}=await Fe.from("users").insert([{name:t.name,email:t.email,password:t.password,department:t.department,role:t.role||"learner"}]).select().single();return i?(console.error("Registration error:",i),null):{id:n.id,name:n.name,email:n.email,department:n.department,role:n.role,avatar:n.avatar}}catch(e){return console.error("Registration failed:",e),null}}async function Rg(t,e){try{const{data:s,error:n}=await Fe.from("users").update(e).eq("id",t).select().single();return n?(console.error("Update user error:",n),null):{id:s.id,name:s.name,email:s.email,department:s.department,role:s.role,avatar:s.avatar}}catch(s){return console.error("Update user failed:",s),null}}function Zi(){const[t,e]=_.useState({user:null,isAuthenticated:!1,isLoading:!0});_.useEffect(()=>{const a=localStorage.getItem("ai-teacher-user");if(a)try{const l=JSON.parse(a);e({user:l,isAuthenticated:!0,isLoading:!1})}catch(l){console.error("Failed to parse saved user:",l),localStorage.removeItem("ai-teacher-user"),e({user:null,isAuthenticated:!1,isLoading:!1})}else e({user:null,isAuthenticated:!1,isLoading:!1})},[]);const s=async(a,l)=>{try{const o=await Dg({email:a,password:l});return o?(localStorage.setItem("ai-teacher-user",JSON.stringify(o)),e({user:o,isAuthenticated:!0,isLoading:!1}),!0):!1}catch(o){return console.error("Login failed:",o),!1}},n=()=>{localStorage.removeItem("ai-teacher-user"),e({user:null,isAuthenticated:!1,isLoading:!1})},i=async a=>{if(t.user)try{const l=await Rg(t.user.id,a);return l?(localStorage.setItem("ai-teacher-user",JSON.stringify(l)),e(o=>({...o,user:l})),!0):!1}catch(l){return console.error("Update user failed:",l),!1}return!1};return{user:t.user,isAuthenticated:t.isAuthenticated,isLoading:t.isLoading,login:s,logout:n,updateUser:i}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ig={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),O=(t,e)=>{const s=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>_.createElement("svg",{ref:u,...Ig,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Og(t)}`,o].join(" "),...d},[...e.map(([h,f])=>_.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=O("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=O("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=O("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=O("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=O("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=O("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=O("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=O("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=O("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=O("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=O("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=O("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=O("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=O("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=O("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=O("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=O("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=O("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=O("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=O("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=O("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=O("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=O("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=O("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=O("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=O("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=O("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=O("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=O("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=O("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=O("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=O("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=O("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=O("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=O("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=O("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=O("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=O("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=O("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=O("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=O("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=O("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=O("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=O("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=O("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=O("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=O("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=O("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=O("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=O("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=O("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=O("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=O("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=O("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=O("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=O("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=O("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=O("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=O("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=O("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=O("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=O("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=O("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Dd=[{id:"1",email:"tanaka@marui.co.jp",password:"password123",name:"田中 太郎",department:"カード口コミ部",role:"learner",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{id:"2",email:"sato@marui.co.jp",password:"password123",name:"佐藤 花子",department:"アニメイト渋谷店",role:"learner",avatar:"https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},{id:"3",email:"admin@marui.co.jp",password:"admin123",name:"管理者",department:"本部",role:"admin",avatar:"https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"}];function ay({onLogin:t,onNavigateToSignup:e}){const[s,n]=_.useState({email:"",password:""}),[i,a]=_.useState(!1),[l,o]=_.useState(!1),[c,d]=_.useState(""),u=(v,x)=>{n(b=>({...b,[v]:x})),c&&d("")},h=async v=>{if(v.preventDefault(),!s.email||!s.password){d("メールアドレスとパスワードを入力してください");return}o(!0),d("");try{await t(s.email,s.password)||d("メールアドレスが見つかりません。デモアカウントをお試しください。")}catch{d("ログインに失敗しました。もう一度お試しください。")}finally{o(!1)}},f=async v=>{o(!0),d("");try{const x=v==="admin"?Dd[2]:Dd[0];await t(x.email,x.password)||d("ログインに失敗しました。データベースにユーザーが登録されていない可能性があります。")}catch(x){console.error("Demo login error:",x),d("ログインに失敗しました。")}finally{o(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-light-gray to-sky-blue/20 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-vivid-red rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ns,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI口コミ先生"}),r.jsx("p",{className:"text-gray-600",children:"社員ログイン"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"メールアドレス"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ns,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:"email",value:s.email,onChange:v=>u("email",v.target.value),placeholder:"your-email@marui.co.jp",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",disabled:l})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"パスワード"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ti,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:i?"text":"password",value:s.password,onChange:v=>u("password",v.target.value),placeholder:"パスワードを入力",className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",disabled:l}),r.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:l,children:i?r.jsx(Vl,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"}):r.jsx(Yt,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})]}),c&&r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(fe,{className:"w-5 h-5 text-vivid-red"}),r.jsx("span",{className:"text-sm text-red-700",children:c})]}),r.jsx("button",{type:"submit",disabled:l,className:"w-full flex items-center justify-center px-4 py-3 bg-vivid-red text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"ログイン中..."]}):"ログイン"})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:"デモアカウント"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("button",{onClick:()=>f("staff"),disabled:l,className:"px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors text-sm font-medium",children:"スタッフ"}),r.jsx("button",{onClick:()=>f("admin"),disabled:l,className:"px-4 py-2 bg-success-green text-white rounded-lg hover:bg-emerald-green disabled:opacity-50 transition-colors text-sm font-medium",children:"管理者"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("h4",{className:"text-sm font-medium text-sky-blue mb-2",children:"テスト用認証情報"}),r.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[r.jsx("div",{children:"スタッフ: tanaka@marui.co.jp / password123"}),r.jsx("div",{children:"管理者: admin@marui.co.jp / admin123"})]})]}),e&&r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"アカウントをお持ちでない方"}),r.jsx("button",{onClick:e,disabled:l,className:"w-full px-4 py-2 bg-white text-sky-blue border-2 border-sky-blue rounded-lg hover:bg-sky-blue hover:text-white disabled:opacity-50 transition-colors text-sm font-medium",children:"新規アカウント作成"})]})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 丸井グループ AI口コミ先生"})})]})})}const ly=["丸井新宿本店","丸井渋谷店","丸井池袋店","丸井有楽町店","丸井上野店","丸井北千住店","丸井錦糸町店","丸井吉祥寺店","丸井中野店","丸井国分寺店","マルイシティ横浜","マルイファミリー溝口","マルイシティ大宮","静岡マルイ","草加マルイ","本部","その他"];function oy({onSignup:t,onBackToLogin:e}){const[s,n]=_.useState({name:"",email:"",password:"",confirmPassword:"",department:""}),[i,a]=_.useState(!1),[l,o]=_.useState(!1),[c,d]=_.useState(!1),[u,h]=_.useState(""),f=(b,S)=>{n(y=>({...y,[b]:S})),u&&h("")},v=()=>s.name.trim()?s.email.trim()?s.email.includes("@")?s.password?s.password.length<6?(h("パスワードは6文字以上で入力してください"),!1):s.password!==s.confirmPassword?(h("パスワードが一致しません"),!1):s.department?!0:(h("部署を選択してください"),!1):(h("パスワードを入力してください"),!1):(h("有効なメールアドレスを入力してください"),!1):(h("メールアドレスを入力してください"),!1):(h("名前を入力してください"),!1),x=async b=>{if(b.preventDefault(),!!v()){d(!0),h("");try{await t(s.name,s.email,s.password,s.department)||h("アカウント作成に失敗しました。メールアドレスが既に登録されている可能性があります。")}catch(S){console.error("Signup error:",S),h("アカウント作成に失敗しました。もう一度お試しください。")}finally{d(!1)}}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-light-gray to-sky-blue/20 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-vivid-red rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ns,{className:"w-10 h-10 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI口コミ先生"}),r.jsx("p",{className:"text-gray-600",children:"新規アカウント作成"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["名前 ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ns,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:"text",value:s.name,onChange:b=>f("name",b.target.value),placeholder:"田中 太郎",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",disabled:c})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["メールアドレス ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Kg,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:"email",value:s.email,onChange:b=>f("email",b.target.value),placeholder:"your-email@marui.co.jp",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",disabled:c})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["部署 ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ug,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("select",{value:s.department,onChange:b=>f("department",b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent appearance-none",disabled:c,children:[r.jsx("option",{value:"",children:"部署を選択してください"}),ly.map(b=>r.jsx("option",{value:b,children:b},b))]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["パスワード ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ti,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:i?"text":"password",value:s.password,onChange:b=>f("password",b.target.value),placeholder:"6文字以上",className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",disabled:c}),r.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:c,children:i?r.jsx(Vl,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"}):r.jsx(Yt,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["パスワード（確認） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ti,{className:"w-5 h-5 text-gray-400"})}),r.jsx("input",{type:l?"text":"password",value:s.confirmPassword,onChange:b=>f("confirmPassword",b.target.value),placeholder:"パスワードを再入力",className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",disabled:c}),r.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:c,children:l?r.jsx(Vl,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"}):r.jsx(Yt,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]})]}),u&&r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(fe,{className:"w-5 h-5 text-vivid-red"}),r.jsx("span",{className:"text-sm text-red-700",children:u})]}),r.jsx("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center px-4 py-3 bg-vivid-red text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"登録中..."]}):"アカウントを作成"})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:r.jsxs("button",{onClick:e,disabled:c,className:"w-full flex items-center justify-center px-4 py-2 text-gray-700 hover:text-sky-blue transition-colors text-sm font-medium",children:[r.jsx(jt,{className:"w-4 h-4 mr-2"}),"ログインに戻る"]})})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 丸井グループ AI口コミ先生"})})]})})}function cy({onComplete:t}){var c;const[e,s]=_.useState(0),n=[{id:1,title:"ようこそ！",subtitle:"AI口コミ先生へ",description:'あなたの接客スキルを"楽しく"磨けるアプリです',bgColor:"bg-gradient-to-br from-light-gray to-sky-blue/20",accentColor:"sky-blue"},{id:2,title:'丸井の"口コミの力"を',subtitle:"だれでも、どこでも、身につけられる！",description:'属人的だったスキルをデジタルで学び、あなたの"強み"に変えます。',bgColor:"bg-gradient-to-br from-red-50 to-orange-50",accentColor:"vivid-red"},{id:3,title:"何ができるか",subtitle:"",description:"",bgColor:"bg-gradient-to-br from-light-gray to-blue-50",accentColor:"sky-blue",features:[{icon:Ne,title:"AIとの対話で接客スキルを体験",color:"sky-blue"},{icon:Xt,title:"あなたに合ったトレーニングプランを提案",color:"orange-500"},{icon:pr,title:"どこでも、何度でも、スキルを磨ける",color:"sunshine-yellow"}]},{id:4,title:"成長が見える！",subtitle:"トレーニングを重ねるごとに、あなたのスキルがどんどんレベルアップ！",description:'成長がグラフやバッジで"見える化"されます。',bgColor:"bg-gradient-to-br from-light-gray to-orange-50",accentColor:"orange-500"},{id:5,title:"まずはあなたのスキルを評価しましょう！",subtitle:'AIとの簡単な会話で、あなたの"得意"を診断します。',description:"",bgColor:"bg-gradient-to-br from-sky-blue/20 to-blue-100",accentColor:"sky-blue",isLast:!0}],i=()=>{e<n.length-1&&s(e+1)},a=()=>{e>0&&s(e-1)},l=()=>{t()},o=n[e];return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx("div",{className:`w-full max-w-4xl rounded-2xl shadow-2xl overflow-hidden ${o.bgColor}`,children:r.jsxs("div",{className:"relative min-h-[600px] flex flex-col",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-white/30",children:r.jsx("div",{className:"h-full bg-vivid-red transition-all duration-500",style:{width:`${(e+1)/n.length*100}%`}})}),r.jsxs("div",{className:"flex-1 p-8 sm:p-12 flex flex-col justify-center",children:[e===0&&r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-24 h-24 bg-vivid-red rounded-full flex items-center justify-center mx-auto mb-8",children:r.jsx(Ne,{className:"w-12 h-12 text-white"})}),r.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-4",children:o.title}),r.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-sky-blue mb-6",children:o.subtitle}),r.jsx("p",{className:"text-lg text-gray-700 max-w-2xl mx-auto",children:o.description})]}),e===1&&r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-vivid-red to-orange-500 rounded-full flex items-center justify-center mx-auto mb-8",children:r.jsx(Zt,{className:"w-16 h-16 text-white"})}),r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-vivid-red mb-4",children:o.title}),r.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-orange-600 mb-6",children:o.subtitle}),r.jsx("p",{className:"text-lg text-gray-700 max-w-3xl mx-auto leading-relaxed",children:o.description})]}),e===2&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 text-center mb-12",children:o.title}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:(c=o.features)==null?void 0:c.map((d,u)=>{const h=d.icon;return r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg text-center",children:[r.jsx("div",{className:`w-16 h-16 bg-${d.color}/10 rounded-full flex items-center justify-center mx-auto mb-4`,children:r.jsx(h,{className:`w-8 h-8 text-${d.color}`})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 leading-tight",children:d.title})]},u)})})]}),e===3&&r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"relative mb-8",children:[r.jsx("div",{className:"w-40 h-32 bg-white rounded-xl shadow-lg mx-auto p-4 border-4 border-orange-200",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-2 bg-orange-500 rounded-full w-full"}),r.jsx("div",{className:"h-2 bg-orange-400 rounded-full w-4/5"}),r.jsx("div",{className:"h-2 bg-orange-300 rounded-full w-3/5"}),r.jsx("div",{className:"h-2 bg-orange-200 rounded-full w-2/5"})]})}),r.jsxs("div",{className:"absolute -top-2 -right-2 flex space-x-1",children:[r.jsx("div",{className:"w-8 h-8 bg-sky-blue rounded-full flex items-center justify-center",children:r.jsx(ft,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:"w-8 h-8 bg-sunshine-yellow rounded-full flex items-center justify-center",children:r.jsx(ft,{className:"w-4 h-4 text-white"})})]})]}),r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:o.title}),r.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-orange-600 mb-6",children:o.subtitle}),r.jsx("p",{className:"text-lg text-gray-700 max-w-2xl mx-auto",children:o.description})]}),e===4&&r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"w-32 h-32 bg-gradient-to-r from-sky-blue to-blue-500 rounded-full flex items-center justify-center mx-auto mb-8 relative",children:[r.jsx(Zt,{className:"w-16 h-16 text-white"}),r.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-sunshine-yellow rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"GO!"})})]}),r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-6",children:o.title}),r.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-sky-blue mb-8",children:o.subtitle}),r.jsx("button",{onClick:l,className:"px-8 py-4 bg-vivid-red text-white text-xl font-bold rounded-xl hover:bg-red-600 transition-all duration-300 transform hover:scale-105 shadow-lg",children:"スキル評価をはじめる"})]})]}),r.jsxs("div",{className:"p-6 sm:p-8 flex items-center justify-between",children:[r.jsxs("button",{onClick:a,disabled:e===0,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${e===0?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[r.jsx(zg,{className:"w-5 h-5"}),r.jsx("span",{children:"戻る"})]}),r.jsx("div",{className:"flex space-x-2",children:n.map((d,u)=>r.jsx("button",{onClick:()=>s(u),className:`w-3 h-3 rounded-full transition-all duration-300 ${u===e?"bg-vivid-red scale-125":"bg-white/50 hover:bg-white/75"}`},u))}),e<n.length-1?r.jsxs("button",{onClick:i,className:"flex items-center space-x-2 px-6 py-3 bg-vivid-red text-white rounded-lg hover:bg-red-600 transition-all duration-300 font-semibold",children:[r.jsx("span",{children:"次へ"}),r.jsx(Nt,{className:"w-5 h-5"})]}):r.jsx("div",{className:"w-20"})]})]})})})}function dy({title:t,onMenuToggle:e,onProfileClick:s,onLogout:n,user:i}){return r.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:e,className:"lg:hidden p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(qg,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-vivid-red rounded-lg flex items-center justify-center",children:r.jsx(Ns,{className:"w-5 h-5 text-white"})}),r.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"AI口コミ先生"})]}),r.jsx("div",{className:"hidden md:block w-px h-6 bg-gray-300"}),r.jsx("h2",{className:"hidden md:block text-base lg:text-lg text-gray-700",children:t})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-sky-blue transition-colors hidden sm:block",children:[r.jsx(Lg,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-sunshine-yellow rounded-full"})]}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-sky-blue transition-colors hidden sm:block",children:r.jsx(Sm,{className:"w-5 h-5"})}),r.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-vivid-red transition-colors hidden sm:block",title:"ログアウト",children:r.jsx(Qo,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 sm:pl-4 sm:border-l border-gray-200",children:[r.jsx("button",{onClick:s,className:"flex items-center space-x-2 hover:bg-gray-100 rounded-lg p-1 transition-colors",children:r.jsx("img",{src:(i==null?void 0:i.avatar)||"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",alt:(i==null?void 0:i.name)||"ユーザー",className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full object-cover"})}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:i==null?void 0:i.name}),r.jsx("div",{className:"text-xs text-gray-500",children:i==null?void 0:i.department})]})]})]})]})})}const uy=[{id:"dashboard",label:"学習コンテンツ",icon:wn},{id:"cases",label:"事例集",icon:km},{id:"consultation",label:"相談コーナー",icon:Jo}];function hy({activeTab:t,onTabChange:e,onReturnToOnboarding:s,onProfileClick:n,onLogout:i}){return r.jsx("aside",{className:"hidden lg:block w-64 bg-white border-r border-gray-200 min-h-screen",children:r.jsxs("nav",{className:"px-4 py-6",children:[r.jsx("ul",{className:"space-y-2",children:uy.map(a=>{const l=a.icon,o=t===a.id;return r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(a.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all duration-200 ${o?"bg-red-50 text-vivid-red border border-red-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(l,{className:`w-5 h-5 ${o?"text-vivid-red":"text-gray-400"}`}),r.jsx("span",{className:"font-medium",children:a.label})]})},a.id)})}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsxs("button",{onClick:()=>e("evaluation"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all duration-200 mt-2 ${t==="evaluation"?"bg-red-50 text-vivid-red border border-red-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"} mt-2`,children:[r.jsx(qo,{className:`w-5 h-5 ${t==="evaluation"?"text-vivid-red":"text-gray-400"}`}),r.jsx("span",{className:"font-medium",children:"スキル評価"})]}),r.jsxs("button",{onClick:n,className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all duration-200 mt-2 ${t==="profile"?"bg-red-50 text-vivid-red border border-red-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(ri,{className:`w-5 h-5 ${t==="profile"?"text-vivid-red":"text-gray-400"}`}),r.jsx("span",{className:"font-medium",children:"プロフィール"})]}),r.jsxs("button",{onClick:s,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-400 hover:bg-gray-50 hover:text-gray-600 rounded-lg transition-all duration-200 mt-2",children:[r.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:r.jsx("span",{className:"text-xs",children:"?"})}),r.jsx("span",{className:"font-medium text-sm",children:"表紙に戻る"})]}),r.jsxs("button",{onClick:i,className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-400 hover:bg-red-50 hover:text-vivid-red rounded-lg transition-all duration-200 mt-2",children:[r.jsx(Qo,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium text-sm",children:"ログアウト"})]})]})]})})}const my=[{id:"dashboard",label:"学習コンテンツ",icon:wn},{id:"cases",label:"事例集",icon:km},{id:"consultation",label:"相談コーナー",icon:Jo}];function fy({isOpen:t,onClose:e,activeTab:s,onTabChange:n,onReturnToOnboarding:i,onLogout:a}){const l=d=>{n(d),e()},o=()=>{i(),e()},c=()=>{a(),e()};return t?r.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e}),r.jsxs("div",{className:"fixed left-0 top-0 bottom-0 w-80 bg-white shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"メニュー"}),r.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ks,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:c,className:"w-full flex items-center space-x-3 px-4 py-4 text-gray-400 hover:bg-red-50 hover:text-vivid-red rounded-lg transition-all duration-200 mt-2",children:[r.jsx(Qo,{className:"w-6 h-6"}),r.jsx("span",{className:"font-medium text-base",children:"ログアウト"})]})]}),r.jsxs("nav",{className:"px-4 py-6",children:[r.jsx("ul",{className:"space-y-2",children:my.map(d=>{const u=d.icon,h=s===d.id;return r.jsx("li",{children:r.jsxs("button",{onClick:()=>l(d.id),className:`w-full flex items-center space-x-3 px-4 py-4 rounded-lg text-left transition-all duration-200 ${h?"bg-red-50 text-vivid-red border border-red-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(u,{className:`w-6 h-6 ${h?"text-vivid-red":"text-gray-400"}`}),r.jsx("span",{className:"font-medium text-base",children:d.label})]})},d.id)})}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-4 text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg transition-all duration-200",children:[r.jsx(Sm,{className:"w-6 h-6 text-gray-400"}),r.jsx("span",{className:"font-medium text-base",children:"設定"})]}),r.jsxs("button",{onClick:()=>l("evaluation"),className:`w-full flex items-center space-x-3 px-4 py-4 rounded-lg text-left transition-all duration-200 mt-2 ${s==="evaluation"?"bg-red-50 text-vivid-red border border-red-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(qo,{className:`w-6 h-6 ${s==="evaluation"?"text-vivid-red":"text-gray-400"}`}),r.jsx("span",{className:"font-medium text-base",children:"スキル評価"})]}),r.jsxs("button",{onClick:o,className:"w-full flex items-center space-x-3 px-4 py-4 text-gray-400 hover:bg-gray-50 hover:text-gray-600 rounded-lg transition-all duration-200 mt-2",children:[r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("span",{className:"text-sm",children:"?"})}),r.jsx("span",{className:"font-medium text-base",children:"表紙に戻る"})]})]})]})]})]}):null}const Bn=5;function py({scenario:t,mode:e,onExit:s}){const[n,i]=_.useState(1),[a,l]=_.useState([{id:"1",sender:"ai",content:"こんにちは。先日購入した商品に不具合がありまして...",timestamp:new Date}]),[o,c]=_.useState(""),[d,u]=_.useState(75),[h,f]=_.useState(!1),[v,x]=_.useState(!1),[b,S]=_.useState(0),[y,m]=_.useState([]),[p,g]=_.useState([]),N=_.useRef(null),[k,C]=_.useState(null),j=()=>{var P;(P=N.current)==null||P.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{j()},[a]);const M=()=>{if(!o.trim())return;const P={id:Date.now().toString(),sender:"user",content:o,timestamp:new Date},z=[{type:"good",message:"共感が伝わっています 👍",icon:"👍"},{type:"good",message:"丁寧な言葉遣いですね 😊",icon:"😊"},{type:"warning",message:"提案が少し唐突です 🤔",icon:"🤔"},{type:"warning",message:"もう少し具体的に説明しましょう",icon:"💡"}],se=z[Math.floor(Math.random()*z.length)];P.feedback=se,C(se),se.type==="good"?u(Math.min(100,d+5)):se.type==="warning"&&u(Math.max(0,d-2)),l([...a,P]),c(""),setTimeout(()=>{const $e=["そうですか。詳しく教えていただけますか？","ありがとうございます。それでは、この方法はいかがでしょうか？","なるほど、わかりました。","それは良いですね。他に何かございますか？"],we={id:(Date.now()+1).toString(),sender:"ai",content:$e[Math.floor(Math.random()*$e.length)],timestamp:new Date};l(Ce=>[...Ce,we]),a.length>=8&&i(Math.min(Bn,n+1))},1e3)},U=()=>{S(d),m(["顧客の感情を受け止める姿勢ができていました","丁寧な言葉遣いで対応できていました","解決策を複数提示できていました"]),g(["解決策を提示する前に共感をもう一度示すと良い","顧客の要望を確認してから提案すると効果的です"]),x(!0)},E=()=>{l([{id:"1",sender:"ai",content:"こんにちは。先日購入した商品に不具合がありまして...",timestamp:new Date}]),i(1),u(75),c(""),C(null),x(!1)};return v?r.jsx("div",{className:"min-h-screen bg-light-gray p-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-success-green rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(pr,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"練習完了！"}),r.jsx("p",{className:"text-gray-600",children:t.title})]})}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"総合スコア"}),r.jsx("div",{className:"text-6xl font-bold text-success-green mb-2",children:b}),r.jsx("div",{className:"text-gray-600",children:"/ 100点"}),r.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:[1,2,3,4,5].map(P=>r.jsx("div",{className:`text-3xl ${P<=Math.floor(b/20)?"text-yellow-400":"text-gray-300"}`,children:"★"},P))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(Zt,{className:"w-5 h-5 text-success-green"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"よかったポイント"})]}),r.jsx("div",{className:"space-y-3",children:y.map((P,z)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-success-green text-sm",children:"✓"})}),r.jsx("p",{className:"text-gray-700",children:P})]},z))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(fe,{className:"w-5 h-5 text-orange-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"改善ポイント"})]}),r.jsx("div",{className:"space-y-3",children:p.map((P,z)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-orange-500 text-sm",children:"!"})}),r.jsx("p",{className:"text-gray-700",children:P})]},z))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"次のステップ"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:E,className:"p-4 border-2 border-success-green text-success-green rounded-lg hover:bg-green-50 transition-colors text-left",children:[r.jsx("div",{className:"font-semibold mb-1",children:"もう一度練習する"}),r.jsx("div",{className:"text-sm",children:"同じシナリオで復習"})]}),r.jsxs("button",{onClick:s,className:"p-4 border-2 border-sky-blue text-sky-blue rounded-lg hover:bg-blue-50 transition-colors text-left",children:[r.jsx("div",{className:"font-semibold mb-1",children:"類似シナリオを試す"}),r.jsx("div",{className:"text-sm",children:"別のシナリオで練習"})]}),r.jsxs("button",{onClick:s,className:"p-4 border-2 border-purple-500 text-purple-500 rounded-lg hover:bg-purple-50 transition-colors text-left",children:[r.jsx("div",{className:"font-semibold mb-1",children:"成功事例を見る"}),r.jsx("div",{className:"text-sm",children:"コミュニティの投稿を確認"})]}),r.jsxs("button",{onClick:s,className:"p-4 border-2 border-vivid-red text-vivid-red rounded-lg hover:bg-red-50 transition-colors text-left",children:[r.jsx("div",{className:"font-semibold mb-1",children:"教材で学習"}),r.jsx("div",{className:"text-sm",children:"関連する動画・音声を視聴"})]})]})]}),r.jsx("button",{onClick:s,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-semibold",children:"シナリオ選択に戻る"})]})}):r.jsxs("div",{className:"min-h-screen bg-light-gray flex flex-col",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(jt,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t.title}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[r.jsxs("span",{children:["👤 ",t.customerType]}),r.jsxs("span",{children:["⏱️ 約",t.duration,"分"]}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${e==="staff"?"bg-green-100 text-success-green":"bg-blue-100 text-sky-blue"}`,children:e==="staff"?"口コミ練習モード":"お客様モード"})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"現在のスコア"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold text-success-green",children:d}),r.jsx("div",{className:"text-gray-600",children:"/100"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[r.jsxs("span",{children:["Step ",n," / ",Bn]}),r.jsxs("span",{children:[Math.round(n/Bn*100),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-success-green rounded-full h-2 transition-all duration-300",style:{width:`${n/Bn*100}%`}})})]})]})}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:"flex-1 flex flex-col max-w-5xl mx-auto w-full",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(P=>r.jsx("div",{className:`flex ${P.sender==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-md ${P.sender==="user"?"ml-12":"mr-12"}`,children:[r.jsxs("div",{className:`rounded-2xl px-4 py-3 ${P.sender==="user"?"bg-success-green text-white rounded-br-none":"bg-white border border-gray-200 rounded-bl-none"}`,children:[P.sender==="ai"&&r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-sky-blue rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs",children:"AI"})}),r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"AI顧客"})]}),r.jsx("p",{className:P.sender==="user"?"text-white":"text-gray-900",children:P.content}),r.jsx("div",{className:`text-xs mt-1 ${P.sender==="user"?"text-green-100":"text-gray-500"}`,children:P.timestamp.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]}),P.sender==="user"&&P.feedback&&r.jsxs("div",{className:`mt-2 px-3 py-2 rounded-lg text-sm flex items-center space-x-2 ${P.feedback.type==="good"?"bg-green-50 text-green-700 border border-green-200":P.feedback.type==="warning"?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[r.jsx("span",{children:P.feedback.icon}),r.jsx("span",{children:P.feedback.message})]})]})},P.id)),r.jsx("div",{ref:N})]}),r.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{className:"p-3 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:r.jsx(Hl,{className:"w-5 h-5"})}),r.jsx("input",{type:"text",value:o,onChange:P=>c(P.target.value),onKeyPress:P=>P.key==="Enter"&&M(),placeholder:"メッセージを入力...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-blue"}),r.jsx("button",{onClick:M,className:"px-6 py-3 bg-success-green text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:r.jsx(Xo,{className:"w-5 h-5"})})]})})})]}),r.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto hidden lg:block",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"リアルタイムフィードバック"}),k&&r.jsxs("div",{className:`p-4 rounded-lg mb-4 ${k.type==="good"?"bg-green-50 border border-green-200":k.type==="warning"?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:[r.jsx("div",{className:"text-2xl mb-2",children:k.icon}),r.jsx("p",{className:`text-sm ${k.type==="good"?"text-green-700":k.type==="warning"?"text-yellow-700":"text-red-700"}`,children:k.message})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"学習目標"}),r.jsx("div",{className:"space-y-2",children:t.objectives.map((P,z)=>r.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[r.jsx("div",{className:"w-5 h-5 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-xs",children:z+1})}),r.jsx("span",{children:P})]},z))})]})]})]}),r.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:r.jsxs("div",{className:"max-w-5xl mx-auto flex justify-center space-x-3",children:[r.jsxs("button",{onClick:()=>f(!h),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(Jg,{className:"w-4 h-4"}),r.jsx("span",{children:"一時停止"})]}),r.jsxs("button",{onClick:E,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(Yo,{className:"w-4 h-4"}),r.jsx("span",{children:"やり直す"})]}),r.jsxs("button",{onClick:U,className:"flex items-center space-x-2 px-6 py-2 bg-vivid-red text-white rounded-lg hover:bg-red-600 transition-colors font-semibold",children:[r.jsx("span",{children:"練習を終了"}),r.jsx($g,{className:"w-4 h-4"})]})]})})]})}const Sr=[{id:"1",title:"クレーム対応：商品不良",description:"商品不良によるクレームへの対応シナリオです",difficulty:"beginner",category:"クレーム対応",customerType:"不満を持つ顧客",objectives:["顧客の不満を傾聴する","適切な謝罪を行う","解決策を提案する","顧客満足を得る"],duration:15,icon:"alert",completed:!0,score:85},{id:"2",title:"カード入会案内",description:"エポスカードへの入会を提案するシナリオです",difficulty:"intermediate",category:"接客・販売",customerType:"購入を検討している顧客",objectives:["カードのメリットを説明する","顧客の疑問に答える","入会を促進する"],duration:20,icon:"card",completed:!0,score:92},{id:"3",title:"難しい質問への対応",description:"専門的な質問にも適切に答えるシナリオです",difficulty:"advanced",category:"クレーム対応",customerType:"専門的な質問をする顧客",objectives:["専門知識を活用する","分かりやすく説明する","信頼関係を構築する"],duration:25,icon:"message",completed:!1},{id:"4",title:"電話応対：問い合わせ対応",description:"電話での商品問い合わせに対応するシナリオです",difficulty:"beginner",category:"電話応対",customerType:"商品について問い合わせる顧客",objectives:["明るく丁寧な応対をする","必要な情報を正確に伝える","次のアクションを案内する"],duration:10,icon:"phone",completed:!1},{id:"5",title:"返品・交換対応",description:"返品や交換を希望されるお客様への対応シナリオです",difficulty:"intermediate",category:"クレーム対応",customerType:"返品を希望する顧客",objectives:["返品理由を確認する","規定に基づいて対応する","顧客の理解を得る"],duration:15,icon:"alert",completed:!1},{id:"6",title:"セール時の混雑対応",description:"セール時の混雑した状況での接客シナリオです",difficulty:"intermediate",category:"接客・販売",customerType:"急いでいる顧客",objectives:["迅速に対応する","複数の顧客に気を配る","効率的に業務を進める"],duration:15,icon:"shopping",completed:!1}];function Ad(t){const e={className:"w-8 h-8"};switch(t){case"alert":return r.jsx(fe,{...e});case"card":return r.jsx(Vg,{...e});case"message":return r.jsx(Ne,{...e});case"phone":return r.jsx(Yg,{...e});case"shopping":return r.jsx(sy,{...e});default:return r.jsx(Xt,{...e})}}function Rd(t){return{beginner:"bg-green-100 text-green-700 border-green-200",intermediate:"bg-orange-100 text-orange-700 border-orange-200",advanced:"bg-red-100 text-red-700 border-red-200"}[t]||"bg-gray-100 text-gray-600 border-gray-200"}function Id(t){return{beginner:"初級",intermediate:"中級",advanced:"上級"}[t]||"不明"}function Cm({onBack:t}){const[e,s]=_.useState("staff"),[n,i]=_.useState(null),[a,l]=_.useState(!1),[o,c]=_.useState(!1),d=()=>{n&&(l(!1),c(!0))},u=()=>{c(!1),i(null)},h=x=>{i(x),l(!0)},f=Sr.filter(x=>x.completed).length,v=Sr.filter(x=>x.score).reduce((x,b)=>x+(b.score||0),0)/Sr.filter(x=>x.score).length||0;return o&&n?r.jsx(py,{scenario:n,mode:e,onExit:u}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AIシミュレーション"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"学習モードを選択してAIとの対話で実践的な接客スキルを身につけましょう"})]}),t&&r.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(jt,{className:"w-4 h-4"}),r.jsx("span",{children:"戻る"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:r.jsx(Xt,{className:"w-6 h-6 text-sky-blue"})}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f}),r.jsx("p",{className:"text-sm text-gray-600",children:"完了シナリオ"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:r.jsx(hn,{className:"w-6 h-6 text-success-green"})}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Math.round(v)}),r.jsx("p",{className:"text-sm text-gray-600",children:"平均スコア"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:r.jsx(Ne,{className:"w-6 h-6 text-purple-600"})}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Sr.length}),r.jsx("p",{className:"text-sm text-gray-600",children:"利用可能シナリオ"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsxs("button",{onClick:()=>s("staff"),className:`flex-1 flex items-center justify-center space-x-3 px-6 py-4 font-semibold transition-all ${e==="staff"?"bg-success-green text-white border-b-2 border-success-green":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Pd,{className:"w-5 h-5"}),r.jsx("span",{children:"口コミ練習モード"})]}),r.jsxs("button",{onClick:()=>s("customer"),className:`flex-1 flex items-center justify-center space-x-3 px-6 py-4 font-semibold transition-all ${e==="customer"?"bg-sky-blue text-white border-b-2 border-sky-blue":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Ns,{className:"w-5 h-5"}),r.jsx("span",{children:"お客様モード"})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:`mb-6 p-4 rounded-lg ${e==="customer"?"bg-blue-50 border border-blue-200":"bg-green-50 border border-green-200"}`,children:e==="customer"?r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sky-blue mb-2",children:"お客様モードとは"}),r.jsx("p",{className:"text-sm text-blue-700",children:"AIが店員役となり、あなたがお客様として体験します。店員の口コミ技術を客観的に学び、良い接客とは何かを理解できます。"})]}):r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-success-green mb-2",children:"口コミ練習モードとは"}),r.jsx("p",{className:"text-sm text-green-700",children:"AIがお客様役となり、あなたが店員として口コミ練習をします。実践的なスキルを身につけ、様々な状況での対応力を向上させられます。"})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Sr.map(x=>r.jsxs("button",{onClick:()=>h(x),className:"bg-white border-2 border-gray-200 rounded-xl p-5 hover:shadow-lg hover:border-sky-blue transition-all duration-200 text-left group",children:[r.jsx("div",{className:`w-16 h-16 rounded-xl flex items-center justify-center mb-4 transition-colors ${e==="customer"?"bg-blue-100 text-sky-blue group-hover:bg-sky-blue group-hover:text-white":"bg-green-100 text-success-green group-hover:bg-success-green group-hover:text-white"}`,children:Ad(x.icon)}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:x.title}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${Rd(x.difficulty)}`,children:Id(x.difficulty)}),r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full border border-gray-200",children:x.category})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ue,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"line-clamp-1",children:x.customerType})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(er,{className:"w-4 h-4 flex-shrink-0"}),r.jsxs("span",{children:["約",x.duration,"分"]})]})]}),e==="staff"&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"前回スコア"}),x.completed&&x.score?r.jsxs("span",{className:"text-lg font-bold text-success-green",children:[x.score,"点"]}):r.jsx("span",{className:"text-sm text-gray-400",children:"未履修"})]})})]},x.id))})]})]}),a&&n&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${e==="customer"?"bg-blue-100 text-sky-blue":"bg-green-100 text-success-green"}`,children:Ad(n.icon)}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n.title})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${Rd(n.difficulty)}`,children:Id(n.difficulty)}),r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full border border-gray-200",children:n.category})]})]}),r.jsx("button",{onClick:()=>l(!1),className:"ml-4 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ks,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:`p-4 rounded-lg ${e==="customer"?"bg-blue-50 border border-blue-200":"bg-green-50 border border-green-200"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e==="customer"?r.jsx(Ns,{className:"w-5 h-5 text-sky-blue"}):r.jsx(Pd,{className:"w-5 h-5 text-success-green"}),r.jsx("span",{className:`font-semibold ${e==="customer"?"text-sky-blue":"text-success-green"}`,children:e==="customer"?"お客様モード":"口コミ練習モード"})]}),r.jsx("p",{className:"text-sm text-gray-700",children:e==="customer"?"AIが店員として接客し、あなたは顧客として体験します":"あなたが店員として、AIの顧客に接客します"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"シナリオ説明"}),r.jsx("p",{className:"text-gray-700",children:n.description})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"想定顧客の特徴"}),r.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[r.jsx(ue,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{children:n.customerType})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"学習目標"}),r.jsx("div",{className:"space-y-2",children:n.objectives.map((x,b)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${e==="customer"?"bg-blue-100 text-sky-blue":"bg-green-100 text-success-green"}`,children:r.jsx("span",{className:"text-xs font-bold",children:b+1})}),r.jsx("span",{className:"text-gray-700",children:x})]},b))})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[r.jsx(er,{className:"w-5 h-5 text-gray-500"}),r.jsxs("span",{children:["所要時間：約",n.duration,"分"]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-semibold",children:"キャンセル"}),r.jsxs("button",{onClick:d,className:`flex-1 flex items-center justify-center space-x-2 px-6 py-3 text-white rounded-lg transition-colors font-semibold ${e==="customer"?"bg-sky-blue hover:bg-blue-600":"bg-success-green hover:bg-green-600"}`,children:[r.jsx(kt,{className:"w-5 h-5"}),r.jsx("span",{children:"このシナリオで練習する"})]})]})]})]})})]})}const xy=[{id:1,title:"基礎を知る",type:"video",duration:"10分",description:"口コミの全体像と基本行動を理解する",content:"「口コミって何？」成功事例の短いダイジェスト動画と基本フレーズ・態度を学びます",completed:!1,locked:!1},{id:2,title:"実際の会話を聴く",type:"audio",duration:"15分",description:"リアルな会話のテンポや言い回しを耳で覚える",content:"先輩スタッフの会話を実際に聴き、良い例と悪い例を比較します",completed:!1,locked:!0},{id:3,title:"練習してみる",type:"simulation",duration:"20分",description:"実践体験を通して自信をつける",content:"AIがお客様役になり、基本フレーズを言えるか確認します",completed:!1,locked:!0},{id:4,title:"まとめ＆確認テスト",type:"quiz",duration:"10分",description:"学習定着と達成感の提供",content:"確認クイズ（5問程度）で理解度をチェックします",completed:!1,locked:!0}];function Od(t,e="sm"){const s=e==="lg"?"w-8 h-8":"w-5 h-5";switch(t){case"video":return r.jsx(Zo,{className:s});case"audio":return r.jsx(Go,{className:s});case"simulation":return r.jsx(ta,{className:s});case"quiz":return r.jsx(Xt,{className:s});default:return r.jsx(Bg,{className:s})}}function $d(t){switch(t){case"video":return"bg-red-100 text-vivid-red";case"audio":return"bg-green-100 text-success-green";case"simulation":return"bg-purple-100 text-purple-600";case"quiz":return"bg-yellow-100 text-sunshine-yellow";default:return"bg-gray-100 text-gray-600"}}function Ld(t){switch(t){case"video":return"動画学習";case"audio":return"音声学習";case"simulation":return"AIシミュレーション";case"quiz":return"確認テスト";default:return t}}function gy(){const[t,e]=_.useState(xy),[s,n]=_.useState(null),i=t.filter(d=>d.completed).length,a=t.length,l=Math.round(i/a*100),o=d=>{e(u=>u.map((f,v)=>f.id===d?{...f,completed:!0}:f.id===d+1?{...f,locked:!1}:f)),n(null)},c=d=>{d.locked||n(d)};return s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["STEP",s.id,": ",s.title]}),r.jsx("p",{className:"text-gray-600 mt-1",children:s.description})]}),r.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"戻る"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8",children:[r.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 ${$d(s.type)}`,children:Od(s.type,"lg")}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-4",children:Ld(s.type)}),r.jsx("p",{className:"text-gray-600 text-center mb-8 max-w-2xl mx-auto",children:s.content}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-600 mb-8",children:[r.jsx("span",{children:"所要時間："}),r.jsx("span",{className:"font-semibold",children:s.duration})]}),r.jsx("div",{className:"bg-gray-50 rounded-xl p-12 mb-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(kt,{className:"w-12 h-12 text-gray-400"})}),r.jsxs("p",{className:"text-gray-500",children:[s.type==="video"&&"動画コンテンツがここに表示されます",s.type==="audio"&&"音声コンテンツがここに表示されます",s.type==="simulation"&&"AIシミュレーションがここで開始されます",s.type==="quiz"&&"確認テストがここに表示されます"]})]})}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:()=>o(s.id),className:"flex items-center space-x-2 px-8 py-3 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold text-lg",children:[r.jsx(Td,{className:"w-5 h-5"}),r.jsxs("span",{children:["完了してSTEP",s.id+1,"へ進む"]})]})})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 rounded-xl p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-sky-blue rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"🔰"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"初心者コース"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"1日30分×1週間で口コミの基礎をマスター"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"学習進捗"}),r.jsxs("span",{className:"text-sm font-bold text-sky-blue",children:[l,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-sky-blue h-3 rounded-full transition-all duration-500",style:{width:`${l}%`}})}),r.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[i,"/",a," ステップ完了",i===a&&r.jsx("span",{className:"ml-2 text-success-green font-semibold",children:"🎉 コース完了！"})]})]}),r.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(pr,{className:"w-4 h-4"}),r.jsx("span",{children:"合計学習時間：2〜3時間"})]})})]}),i===a&&r.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-6 border border-yellow-200",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-sunshine-yellow rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(ft,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"🎊 おめでとうございます！"}),r.jsxs("p",{className:"text-gray-700",children:["称号「",r.jsx("span",{className:"font-semibold text-sunshine-yellow",children:"口コミスターター"}),"」を獲得しました！"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"次は中級者コースに挑戦して、さらにスキルアップしましょう！"})]})]})}),r.jsx("div",{className:"space-y-4",children:t.map((d,u)=>{const h=d.completed,f=d.locked,v=!h&&!f;return r.jsx("div",{className:`bg-white rounded-xl border-2 p-6 transition-all ${h?"border-success-green bg-green-50":v?"border-sky-blue shadow-md":"border-gray-200 opacity-60"}`,children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsxs("div",{className:"flex flex-col items-center flex-shrink-0",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${h?"bg-success-green text-white":v?"bg-sky-blue text-white":"bg-gray-200 text-gray-400"}`,children:h?r.jsx(Td,{className:"w-8 h-8"}):f?r.jsx(Ti,{className:"w-8 h-8"}):r.jsx("span",{className:"text-2xl font-bold",children:d.id})}),u<t.length-1&&r.jsx("div",{className:`w-0.5 h-12 mt-2 ${h?"bg-success-green":"bg-gray-200"}`})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["STEP",d.id,": ",d.title]}),h&&r.jsx("span",{className:"text-xs bg-success-green text-white px-2 py-1 rounded-full font-medium",children:"完了"}),v&&r.jsxs("span",{className:"text-xs bg-sky-blue text-white px-2 py-1 rounded-full font-medium flex items-center space-x-1",children:[r.jsx(pt,{className:"w-3 h-3"}),r.jsx("span",{children:"受講可能"})]})]}),r.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium mb-2 ${$d(d.type)}`,children:[Od(d.type,"sm"),r.jsx("span",{children:Ld(d.type)})]})]}),r.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap ml-4",children:d.duration})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:d.description}),r.jsx("p",{className:"text-gray-500 text-sm mb-4",children:d.content}),!f&&!h&&r.jsxs("button",{onClick:()=>c(d),className:"flex items-center space-x-2 px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[r.jsx(kt,{className:"w-4 h-4"}),r.jsx("span",{children:"学習を開始"})]}),h&&r.jsxs("button",{onClick:()=>c(d),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:[r.jsx(kt,{className:"w-4 h-4"}),r.jsx("span",{children:"もう一度学習する"})]})]})]})},d.id)})}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-sky-blue mb-3 flex items-center space-x-2",children:[r.jsx(pt,{className:"w-5 h-5"}),r.jsx("span",{children:"💡 学習のポイント"})]}),r.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[r.jsx("li",{children:"• 1日1ステップずつ進めることで、無理なく学習できます"}),r.jsx("li",{children:"• 各ステップは順番に解除されていきます"}),r.jsx("li",{children:"• 動画→音声→シミュレーションの順で学ぶことで、段階的にスキルが身につきます"}),r.jsx("li",{children:"• すべてのステップを完了すると「口コミスターター」の称号を獲得できます"})]})]})]})}const yy=[{id:"1",title:"基本的なカード口コミマナー",type:"video",duration:"12分",difficulty:"beginner",category:"基礎知識",description:"カード口コミの基本マナーと声かけのポイントを学びます",completed:!0,isFavorite:!1,tags:["基礎","マナー"]},{id:"2",title:"カード口コミ入門シミュレーション",type:"simulation",duration:"10分",difficulty:"beginner",category:"基礎知識",description:"選択肢式で基本的な声かけを練習します",completed:!1,isFavorite:!0,scenarioCount:3,tags:["基礎","選択式"]},{id:"3",title:"カード特典の説明方法",type:"audio",duration:"15分",difficulty:"beginner",category:"カード知識",description:"カードの基本的な特典と説明のコツを音声で学びます",completed:!1,isFavorite:!1,tags:["カード特典","説明"]},{id:"4",title:"レジでの声かけ基本",type:"simulation",duration:"12分",difficulty:"beginner",category:"基礎知識",description:"レジでの基本的な声かけを選択肢形式で練習",completed:!1,isFavorite:!1,scenarioCount:4,tags:["レジ","基礎"]},{id:"5",title:"お客様への第一声",type:"video",duration:"8分",difficulty:"beginner",category:"コミュニケーション",description:"効果的な第一声と笑顔の重要性",completed:!0,isFavorite:!1,tags:["コミュニケーション","基礎"]},{id:"6",title:"簡単な声かけ練習",type:"simulation",duration:"10分",difficulty:"beginner",category:"コミュニケーション",description:"シンプルな声かけパターンを選択式で学習",completed:!1,isFavorite:!1,scenarioCount:5,tags:["声かけ","基礎"]},{id:"7",title:"アニメファン接客シミュレーション",type:"simulation",duration:"20分",difficulty:"intermediate",category:"実践事例",description:"アニメイベントでの複雑な接客を自由回答形式で練習",completed:!1,isFavorite:!0,scenarioCount:6,tags:["イベント","アニメ","自由回答"]},{id:"8",title:"断り対応の実践テクニック",type:"simulation",duration:"18分",difficulty:"intermediate",category:"コミュニケーション",description:"様々な断り文句への対応を自然言語で練習",completed:!1,isFavorite:!1,scenarioCount:8,tags:["断り対応","応用"]},{id:"9",title:"クレーム対応からの口コミ転換",type:"simulation",duration:"22分",difficulty:"intermediate",category:"コミュニケーション",description:"難易度の高いクレーム対応シナリオ",completed:!1,isFavorite:!1,scenarioCount:5,tags:["クレーム","応用"]},{id:"10",title:"シニア層への丁寧な説明術",type:"video",duration:"16分",difficulty:"intermediate",category:"実践事例",description:"シニア層への効果的なカード説明方法",completed:!0,isFavorite:!1,tags:["シニア","説明"]},{id:"11",title:"複雑なカード特典の説明",type:"audio",duration:"20分",difficulty:"intermediate",category:"カード知識",description:"詳細なカード特典と状況別の提案方法",completed:!1,isFavorite:!1,tags:["カード特典","応用"]},{id:"12",title:"ファミリー層への提案術",type:"simulation",duration:"18分",difficulty:"intermediate",category:"実践事例",description:"家族連れへの効果的なアプローチ",completed:!1,isFavorite:!1,scenarioCount:7,tags:["ファミリー","応用"]},{id:"13",title:"忙しい時間帯の効率的な口コミ",type:"simulation",duration:"15分",difficulty:"intermediate",category:"コミュニケーション",description:"混雑時の素早く効果的な声かけ",completed:!1,isFavorite:!1,scenarioCount:6,tags:["効率化","応用"]},{id:"14",title:"上級者インタビュー集",type:"audio",duration:"25分",difficulty:"intermediate",category:"実践事例",description:"トップセールスの実践テクニックを学ぶ",completed:!1,isFavorite:!1,tags:["上級者","ノウハウ"]}];function La(t){return{video:Zo,audio:Go,simulation:ta}[t]||wn}function Ma(t){return{video:"bg-red-100 text-vivid-red",audio:"bg-green-100 text-success-green",simulation:"bg-purple-100 text-purple-600"}[t]||"bg-gray-100 text-gray-600"}function Md(t){return{video:"動画学習",audio:"音声学習",simulation:"AIシミュレーション"}[t]||t}function Ud(t){return t==="beginner"?"初心者向け":"中級者向け"}function vy(t){return t==="beginner"?"bg-blue-100 text-sky-blue":"bg-orange-100 text-orange-600"}function Fd({onNavigateToSimulation:t}){const[e,s]=_.useState("beginner"),[n,i]=_.useState(null),[a,l]=_.useState(!1),[o,c]=_.useState(yy),[d,u]=_.useState(!1),h=o.filter(N=>N.difficulty===e),f=d?h.filter(N=>N.isFavorite):h,v=h.filter(N=>!N.completed).slice(0,2),x=f.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),b=h.filter(N=>N.type==="video").length,S=h.filter(N=>N.type==="audio").length,y=h.filter(N=>N.type==="simulation").length,m=N=>{N==="simulation"?l(!0):(i(N),l(!1))},p=()=>{i(null),l(!1)},g=N=>{c(k=>k.map(C=>C.id===N?{...C,isFavorite:!C.isFavorite}:C))};if(a)return r.jsx(Cm,{onBack:p});if(n){const N=f.filter(k=>k.type===n);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:Md(n)}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[Ud(e)," - ",Md(n)]})]}),r.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"戻る"})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:r.jsx("div",{className:"grid grid-cols-1 gap-4",children:N.map(k=>{const C=La(k.type);return r.jsxs("div",{className:"flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors group",children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${Ma(k.type)}`,children:r.jsx(C,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-base font-semibold text-gray-900",children:k.title}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description})]}),r.jsx("button",{onClick:()=>g(k.id),className:`p-1 rounded-full transition-colors ml-2 ${k.isFavorite?"text-vivid-red hover:text-red-600":"text-gray-400 hover:text-vivid-red"}`,children:r.jsx(fs,{className:`w-5 h-5 ${k.isFavorite?"fill-current":""}`})})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[r.jsx(er,{className:"w-4 h-4"}),r.jsx("span",{children:k.duration})]}),k.scenarioCount&&r.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:[k.scenarioCount,"シナリオ"]}),k.completed&&r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"完了"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${vy(k.difficulty)}`,children:Ud(k.difficulty)})]}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:k.tags.map((j,M)=>r.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:j},M))})]}),r.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors flex-shrink-0",onClick:k.type==="simulation"?()=>t():void 0,children:[r.jsx(kt,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"開始"})]})]},k.id)})})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"学習コンテンツ"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"あなたのレベルに合わせた学習で口コミスキルを向上させましょう"})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-1",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:()=>s("beginner"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors ${e==="beginner"?"bg-sky-blue text-white":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(wn,{className:"w-5 h-5"}),r.jsx("span",{children:"初心者"})]}),r.jsx("p",{className:"text-xs mt-1 opacity-90",children:"基礎から学びたい方"})]}),r.jsxs("button",{onClick:()=>s("intermediate"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors ${e==="intermediate"?"bg-orange-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(ft,{className:"w-5 h-5"}),r.jsx("span",{children:"中級者"})]}),r.jsx("p",{className:"text-xs mt-1 opacity-90",children:"応用スキルを習得したい方"})]})]})}),e==="beginner"?r.jsx(gy,{}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(pt,{className:"w-6 h-6 text-sky-blue"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"今日のおすすめ学習"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"あなたの学習履歴とスキル評価に基づいて、AIが最適な学習コンテンツを選びました"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(N=>{const k=La(N.type);return r.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${Ma(N.type)}`,children:r.jsx(k,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:N.title}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:N.description}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsx(er,{className:"w-3 h-3"}),r.jsx("span",{children:N.duration}),N.scenarioCount&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{children:[N.scenarioCount,"シナリオ"]})]})]})]})]})},N.id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"学習コンテンツ分類"}),r.jsxs("button",{onClick:()=>u(!d),className:`flex items-center space-x-2 px-3 py-1 rounded-lg text-sm font-medium transition-colors ${d?"bg-vivid-red text-white":"text-gray-600 hover:text-vivid-red"}`,children:[r.jsx(fs,{className:`w-4 h-4 ${d?"fill-current":""}`}),r.jsx("span",{children:d?"お気に入り":"お気に入り表示"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>m("video"),className:"bg-white rounded-xl border-2 border-gray-200 p-6 text-center hover:border-vivid-red hover:shadow-md transition-all duration-200",children:[r.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:r.jsx(Zo,{className:"w-7 h-7 text-vivid-red"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"動画学習"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"実践的な動画で視覚的に学習"}),r.jsx("div",{className:"text-2xl font-bold text-vivid-red",children:b}),r.jsx("p",{className:"text-xs text-gray-500",children:"コンテンツ"})]}),r.jsxs("button",{onClick:()=>m("audio"),className:"bg-white rounded-xl border-2 border-gray-200 p-6 text-center hover:border-success-green hover:shadow-md transition-all duration-200",children:[r.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:r.jsx(Go,{className:"w-7 h-7 text-success-green"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"音声学習"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"移動中でも聞いて学習"}),r.jsx("div",{className:"text-2xl font-bold text-success-green",children:S}),r.jsx("p",{className:"text-xs text-gray-500",children:"コンテンツ"})]}),r.jsxs("button",{onClick:()=>m("simulation"),className:"bg-white rounded-xl border-2 border-gray-200 p-6 text-center hover:border-purple-600 hover:shadow-md transition-all duration-200",children:[r.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:r.jsx(ta,{className:"w-7 h-7 text-purple-600"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"AIシミュレーション"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e==="beginner"?"選択式で基礎を練習":"自由回答で実践練習"}),r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:y}),r.jsx("p",{className:"text-xs text-gray-500",children:"シナリオ"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"すべてのコンテンツ"}),Object.entries(x).map(([N,k])=>r.jsxs("div",{className:"mb-6 last:mb-0",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 pb-2 border-b border-gray-200",children:N}),r.jsx("div",{className:"grid grid-cols-1 gap-3",children:k.map(C=>{const j=La(C.type);return r.jsxs("div",{className:"flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors group",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${Ma(C.type)}`,children:r.jsx(j,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:C.title}),r.jsx("button",{onClick:()=>g(C.id),className:`p-1 rounded-full transition-colors ${C.isFavorite?"text-vivid-red hover:text-red-600":"text-gray-400 hover:text-vivid-red"}`,children:r.jsx(fs,{className:`w-4 h-4 ${C.isFavorite?"fill-current":""}`})})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[r.jsx(er,{className:"w-3 h-3"}),r.jsx("span",{children:C.duration})]}),C.scenarioCount&&r.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:[C.scenarioCount,"シナリオ"]}),C.completed&&r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"完了"})]})]}),r.jsx("button",{className:"px-3 py-1 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",onClick:C.type==="simulation"?()=>t():void 0,children:"開始"})]},C.id)})})]},N))]}),d&&f.length===0&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[r.jsx(fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"お気に入りがありません"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"学習コンテンツのハートマークをクリックしてお気に入りに追加しましょう"}),r.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"すべてのコンテンツを表示"})]})]})]})}const tc=class tc{static async generateResponse(e,s,n,i=[]){try{const a=await fetch(`${this.baseUrl}/ai-chat`,{method:"POST",headers:{Authorization:"Bearer undefined","Content-Type":"application/json"},body:JSON.stringify({message:e,mode:s,scenario:n,context:i})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const l=await a.json();return l.error?(console.error("AI Service Error:",l.error),l.response?l.response:l.fallback||this.getFallbackResponse(s)):l.response}catch(a){return console.error("AI Service Request Failed:",a),a instanceof Error&&console.error("Error details:",a.message),this.getFallbackResponse(s)}}static getFallbackResponse(e){const n={customer:["そうですね、もう少し詳しく教えていただけますか？","なるほど、年会費はどのくらいでしょうか？","ポイント還元率はどのくらいですか？","ありがとうございます。検討してみます。"],staff:["ありがとうございます。カードの詳細をご説明させていただきますね。","かしこまりました。お客様に最適なカードをご案内いたします。","そうですね、その点について詳しくお話しします。","お客様のライフスタイルに合った最適なカードをご案内いたします。"]}[e];return n[Math.floor(Math.random()*n.length)]}};tc.baseUrl="undefined/functions/v1";let Wl=tc;const Di=class Di{static async evaluateConversation(e){var s,n,i;try{const a=this.createEvaluationPrompt(e),l=await fetch(`${this.baseUrl}?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}],generationConfig:{temperature:.3,topK:40,topP:.95,maxOutputTokens:1024},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]})});if(!l.ok)throw new Error(`Gemini API error: ${l.status}`);const c=(i=(n=(s=(await l.json()).candidates[0])==null?void 0:s.content)==null?void 0:n.parts[0])==null?void 0:i.text;if(!c)throw new Error("No evaluation content received from Gemini");return this.parseEvaluationResponse(c,e)}catch(a){return console.error("Gemini evaluation error:",a),this.generateFallbackEvaluation(e)}}static createEvaluationPrompt(e){return`
あなたは接客スキル評価の専門家です。以下のカード営業会話を分析し、詳細な評価を行ってください。

【シナリオ】: ${e.scenario}
【会話時間】: ${Math.floor(e.duration/60)}分
【会話履歴】:
${e.conversationHistory.map((s,n)=>`${n%2===0?"お客様":"店員"}: ${s}`).join(`
`)}

以下の5つの観点で0-100点で評価し、JSON形式で回答してください：

1. コミュニケーション力（聞く力、話す力、会話の流れ）
2. 共感力（お客様の気持ちへの理解と配慮）
3. 問題解決力（ニーズの把握と適切な提案）
4. 商品知識（カードの特徴やメリットの説明）
5. プロフェッショナリズム（礼儀正しさ、信頼感）

また、以下も含めてください：
- 全体的なフィードバック（100文字程度）
- 強み（3つまで）
- 改善点（3つまで）
- 感情分析（tone: positive/neutral/negative, confidence: 0-100, engagement: 0-100）

回答例：
{
  "overallScore": 85,
  "categoryScores": {
    "communication": 80,
    "empathy": 90,
    "problemSolving": 85,
    "productKnowledge": 88,
    "professionalism": 82
  },
  "feedback": "お客様との自然な会話ができており、カードのメリットを分かりやすく説明できています。",
  "strengths": ["親しみやすい話し方", "適切なタイミングでの提案", "お客様の反応への配慮"],
  "improvements": ["より具体的な特典説明", "断られた時の代替提案", "会話のペース調整"],
  "emotionalAnalysis": {
    "tone": "positive",
    "confidence": 75,
    "engagement": 80
  }
}
`}static parseEvaluationResponse(e,s){var n,i,a,l,o,c,d,u;try{const h=e.match(/\{[\s\S]*\}/);if(h){const f=JSON.parse(h[0]);return{overallScore:f.overallScore||75,categoryScores:{communication:((n=f.categoryScores)==null?void 0:n.communication)||75,empathy:((i=f.categoryScores)==null?void 0:i.empathy)||75,problemSolving:((a=f.categoryScores)==null?void 0:a.problemSolving)||75,productKnowledge:((l=f.categoryScores)==null?void 0:l.productKnowledge)||75,professionalism:((o=f.categoryScores)==null?void 0:o.professionalism)||75},feedback:f.feedback||"AIによる詳細な評価を実施しました。",strengths:f.strengths||["自然な会話","適切な提案","丁寧な対応"],improvements:f.improvements||["より具体的な説明","タイミングの調整","感情への配慮"],emotionalAnalysis:{tone:((c=f.emotionalAnalysis)==null?void 0:c.tone)||"positive",confidence:((d=f.emotionalAnalysis)==null?void 0:d.confidence)||75,engagement:((u=f.emotionalAnalysis)==null?void 0:u.engagement)||75}}}}catch(h){console.error("Failed to parse Gemini response:",h)}return this.generateFallbackEvaluation(s)}static generateFallbackEvaluation(e){const s=e.conversationHistory.length,n=e.userResponses.reduce((a,l)=>a+l.length,0)/e.userResponses.length||0,i=Math.min(90,60+s*2+(n>30?10:0));return{overallScore:i,categoryScores:{communication:Math.max(60,i+Math.floor(Math.random()*10)-5),empathy:Math.max(60,i+Math.floor(Math.random()*10)-5),problemSolving:Math.max(60,i+Math.floor(Math.random()*10)-5),productKnowledge:Math.max(60,i+Math.floor(Math.random()*10)-5),professionalism:Math.max(60,i+Math.floor(Math.random()*10)-5)},feedback:"お客様との会話を通じて、カード営業の基本的なスキルを確認できました。継続的な練習で更なる向上が期待できます。",strengths:["自然な会話の流れ","丁寧な対応","適切な提案タイミング"],improvements:["より具体的な特典説明","感情への配慮","クロージング技術"],emotionalAnalysis:{tone:"positive",confidence:Math.max(60,i),engagement:Math.max(60,i+5)}}}};Di.apiKey="YOUR_API_KEY",Di.baseUrl="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent";let Kl=Di;const ae={scenario:"クレジットカード口コミ",description:"レジでお会計中のお客様にクレジットカードの魅力を自然にお伝えし、申込みを促してください。",duration:300,customerProfile:"20代男性、アニメグッズ購入、イベント参加者、カード未所持"};function by({onComplete:t}){const[e,s]=_.useState(!1),[n,i]=_.useState(!1),[a,l]=_.useState(!1),[o,c]=_.useState(ae.duration),[d,u]=_.useState(""),[h,f]=_.useState(!1),[v,x]=_.useState([]),[b,S]=_.useState([]),[y,m]=_.useState(""),[p,g]=_.useState(""),[N,k]=_.useState([]),[C,j]=_.useState(null),M=_.useRef(null);_.useRef(null);const U=_.useRef(null),E=_.useRef(null);_.useEffect(()=>()=>{E.current&&clearInterval(E.current),z()},[]);const P=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});U.current=R,M.current&&(M.current.srcObject=R),l(!0)}catch(R){console.error("カメラの起動に失敗しました:",R),alert("カメラとマイクへのアクセスが必要です。ブラウザの設定を確認してください。")}},z=()=>{U.current&&(U.current.getTracks().forEach(R=>R.stop()),U.current=null),l(!1)},se=()=>{if(U.current)if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const R=window.SpeechRecognition||window.webkitSpeechRecognition,$=new R;$.continuous=!0,$.interimResults=!0,$.lang="ja-JP",$.onresult=L=>{let Q="",Tt="";for(let He=L.resultIndex;He<L.results.length;He++){const ns=L.results[He][0].transcript;L.results[He].isFinal?Q+=ns:Tt+=ns}g(Tt),Q&&(m(Q),g(""),we(Q))},$.onerror=L=>{console.error("音声認識エラー:",L.error),i(!1)},$.onend=()=>{i(!1)},$.start(),j($),i(!0)}else alert("お使いのブラウザは音声認識に対応していません。Chrome、Edge、Safariをお試しください。")},$e=()=>{C&&n&&(C.stop(),i(!1))},we=async R=>{try{S(L=>[...L,R]),k(L=>[...L,R]);const $=await Wl.generateResponse(R,"staff",ae.scenario,b);if(u($),f(!0),S(L=>[...L,$]),"speechSynthesis"in window){const L=new SpeechSynthesisUtterance($);L.lang="ja-JP",L.rate=.9,L.onend=()=>f(!1),speechSynthesis.speak(L)}x(L=>[...L,$]),m("")}catch($){console.error("AI応答エラー:",$);const L="そうですね、もう少し詳しく教えていただけますか？";if(u(L),f(!0),S(Q=>[...Q,L]),"speechSynthesis"in window){const Q=new SpeechSynthesisUtterance(L);Q.lang="ja-JP",Q.rate=.9,Q.onend=()=>f(!1),speechSynthesis.speak(Q)}x(Q=>[...Q,L]),m("")}},Ce=async()=>{await P(),s(!0),c(ae.duration),E.current=setInterval(()=>{c(R=>R<=1?(A(),0):R-1)},1e3),setTimeout(async()=>{try{const R="お会計お願いします。このフィギュア、イベント限定なんですよね！";if(u(R),f(!0),S([R]),"speechSynthesis"in window){const $=new SpeechSynthesisUtterance(R);$.lang="ja-JP",$.rate=.9,$.onend=()=>f(!1),speechSynthesis.speak($)}}catch{const $="お会計お願いします。このフィギュア、イベント限定なんですよね！";if(u($),f(!0),S([$]),"speechSynthesis"in window){const L=new SpeechSynthesisUtterance($);L.lang="ja-JP",L.rate=.9,L.onend=()=>f(!1),speechSynthesis.speak(L)}}},1e3)},A=async()=>{E.current&&clearInterval(E.current),$e(),z();try{const R=await Kl.evaluateConversation({conversationHistory:b,userResponses:N,scenario:ae.scenario,duration:ae.duration-o}),$={...R.categoryScores,overallScore:R.overallScore,feedback:R.feedback,strengths:R.strengths,improvements:R.improvements,emotionalAnalysis:R.emotionalAnalysis,sessionMessages:b,completedAt:new Date};t($)}catch(R){console.error("評価生成エラー:",R);const $={communication:Math.floor(Math.random()*20)+75,empathy:Math.floor(Math.random()*20)+70,problemSolving:Math.floor(Math.random()*20)+80,productKnowledge:Math.floor(Math.random()*20)+85,professionalism:Math.floor(Math.random()*20)+78,sessionMessages:b,completedAt:new Date};t($)}},w=()=>{E.current&&clearInterval(E.current),$e(),z(),s(!1),c(ae.duration),u(""),S([]),x([]),m(""),g(""),k([])},D=R=>{const $=Math.floor(R/60),L=R%60;return`${$}:${L.toString().padStart(2,"0")}`};return e?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"スキル診断実行中"}),r.jsx("p",{className:"text-gray-600 mt-1",children:ae.scenario})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-vivid-red",children:D(o)}),r.jsx("div",{className:"text-sm text-gray-600",children:"残り時間"})]}),r.jsx("button",{onClick:A,className:"px-4 py-2 bg-sunshine-yellow text-charcoal-gray rounded-lg hover:bg-yellow-500 transition-colors font-medium",children:"強制終了"}),r.jsx("button",{onClick:w,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Yo,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"カメラ映像"}),r.jsxs("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden aspect-video",children:[r.jsx("video",{ref:M,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}),!a&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx(si,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm opacity-75",children:"カメラを起動中..."})]})}),r.jsx("div",{className:"absolute top-4 right-4 flex space-x-2",children:n&&r.jsx("div",{className:"w-3 h-3 bg-vivid-red rounded-full animate-pulse"})})]}),r.jsx("div",{className:"flex items-center justify-center space-x-4 mt-4",children:r.jsxs("button",{onClick:n?$e:se,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${n?"bg-vivid-red text-white hover:bg-red-600":"bg-success-green text-white hover:bg-emerald-green"}`,children:[n?r.jsx(ry,{className:"w-4 h-4"}):r.jsx(Hl,{className:"w-4 h-4"}),r.jsx("span",{children:n?"録音停止":"録音開始"})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI お客様"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 min-h-32",children:[r.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[b.map((R,$)=>r.jsxs("div",{className:`p-3 rounded-lg ${$%2===1?"bg-blue-50 border-l-4 border-sky-blue":"bg-yellow-50 border-l-4 border-sunshine-yellow"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${$%2===1?"bg-sky-blue":"bg-sunshine-yellow"}`,children:r.jsx("span",{className:"text-xs font-medium text-white",children:$%2===1?"店":"客"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:$%2===1?"あなた（店員）":"AIお客様"})]}),r.jsx("p",{className:"text-sm text-gray-700",children:R})]},$)),(p||y)&&r.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-sky-blue rounded-lg opacity-75",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-sky-blue rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-white",children:"店"})}),r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["あなた（店員）",p?"- 認識中":""]})]}),r.jsx("p",{className:"text-sm text-gray-700",children:p||y})]}),h&&r.jsxs("div",{className:"p-3 bg-yellow-50 border-l-4 border-sunshine-yellow rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-sunshine-yellow rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-charcoal-gray",children:"客"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"AIお客様"}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-sunshine-yellow rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-sunshine-yellow rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-sunshine-yellow rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),r.jsx("p",{className:"text-sm text-gray-700",children:d||"応答を生成中..."})]})]}),b.length===0&&!y&&!p&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border-l-4 border-sky-blue",children:r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-sky-blue rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-medium text-white",children:"店"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"お客様からの質問を待っています..."})]})})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-sky-blue mb-2",children:"シナリオ詳細"}),r.jsx("p",{className:"text-sm text-gray-700 mb-2",children:ae.description}),r.jsxs("p",{className:"text-xs text-gray-600",children:["👤 ",ae.customerProfile]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"診断進行状況"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"進行時間"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[D(ae.duration-o)," / ",D(ae.duration)]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-sky-blue to-lime-green transition-all duration-1000",style:{width:`${(ae.duration-o)/ae.duration*100}%`}})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-sky-blue",children:v.length}),r.jsx("div",{className:"text-xs text-gray-600",children:"会話回数"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-success-green",children:n?"録音中":"待機中"}),r.jsx("div",{className:"text-xs text-gray-600",children:"音声状態"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-sunshine-yellow",children:a?"ON":"OFF"}),r.jsx("div",{className:"text-xs text-gray-600",children:"カメラ"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-lg font-bold text-vivid-red",children:[Math.floor((ae.duration-o)/ae.duration*100),"%"]}),r.jsx("div",{className:"text-xs text-gray-600",children:"完了率"})]})]})]})]}),o<=30&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-sunshine-yellow rounded-full animate-pulse"}),r.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["診断終了まで残り",o,"秒です"]})]})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"スキル診断"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"AIとの実際の接客シミュレーションであなたのスキルを診断します"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-vivid-red to-red-600 rounded-xl flex items-center justify-center",children:r.jsx(si,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"音声・映像診断"}),r.jsx("p",{className:"text-gray-600",children:"リアルタイムAI分析による総合評価"})]})]}),r.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-vivid-red mb-2",children:"診断シナリオ"}),r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:ae.scenario}),r.jsx("p",{className:"text-sm text-gray-700 mb-3",children:ae.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.jsxs("span",{children:["👤 ",ae.customerProfile]}),r.jsxs("span",{children:["⏱️ ",Math.floor(ae.duration/60),"分間"]})]})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(si,{className:"w-5 h-5 text-sky-blue"}),r.jsx("span",{className:"text-sm text-gray-700",children:"カメラで表情や身振りを分析"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Hl,{className:"w-5 h-5 text-success-green"}),r.jsx("span",{className:"text-sm text-gray-700",children:"音声で話し方や内容を評価"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(kt,{className:"w-5 h-5 text-sunshine-yellow"}),r.jsx("span",{className:"text-sm text-gray-700",children:"AIがリアルタイムでお客様役を演じます"})]})]}),r.jsxs("button",{onClick:Ce,className:"w-full flex items-center justify-center space-x-3 px-6 py-4 bg-vivid-red text-white rounded-lg hover:bg-red-600 transition-colors font-semibold text-lg",children:[r.jsx(kt,{className:"w-6 h-6"}),r.jsx("span",{children:"診断を開始"})]})]})]})}const wy=[{id:"1",title:"口コミ初心者卒業",description:"基本シナリオを5回完了",icon:"GraduationCap",unlockedAt:new Date("2024-01-15"),progress:5,maxProgress:5},{id:"2",title:"カードマスター",description:"カード口コミスコア80点以上を3回達成",icon:"CreditCard",progress:2,maxProgress:3},{id:"3",title:"イベント口コミの達人",description:"アニメイベントシナリオで90点以上を取得",icon:"Star",progress:0,maxProgress:1}],Vn=[{id:"1",title:"カード口コミ力強化プラン",description:"レジでの自然な口コミテクニックを身につける",type:"strength",estimatedDuration:30,scenarios:["1","2"],tags:["提案力","タイミング感覚"]},{id:"2",title:"イベント特化口コミプラン",description:"アニメイベントでの効果的な口コミ手法をマスター",type:"strength",estimatedDuration:45,scenarios:["2","3"],tags:["イベント対応","ファン心理理解"]},{id:"3",title:"断り対応スキルアップ",description:"断られた時の適切な対応方法を習得",type:"improvement",estimatedDuration:25,scenarios:["3"],tags:["感情コントロール","代替提案"]}],Cr=[{date:new Date("2024-01-01"),scores:{communication:65,productKnowledge:70,empathy:80,professionalism:60,problemSolving:55}},{date:new Date("2024-01-15"),scores:{communication:72,productKnowledge:75,empathy:85,professionalism:68,problemSolving:62}},{date:new Date("2024-02-01"),scores:{communication:78,productKnowledge:82,empathy:88,professionalism:75,problemSolving:70}}],jy=[{skill:"ヒアリング力",userScore:78,averageScore:65,percentile:75},{skill:"提案力",userScore:82,averageScore:70,percentile:80},{skill:"親しみやすさ",userScore:88,averageScore:72,percentile:90},{skill:"タイミング感覚",userScore:75,averageScore:68,percentile:70},{skill:"柔軟対応力",userScore:70,averageScore:75,percentile:45}],ps=[{id:"1",title:"アニメファンのお客様への効果的なカード口コミ",situation:"20代男性、アニメイベントでグッズ購入、初回来店",innovation:"お客様の好きなアニメ作品について会話を始め、そのアニメの関連商品でポイントが貯まることを具体例で説明",result:"お客様が興味を示し、「次回のイベントでも使えますね」と前向きな反応。その場でカード申込み",learning:"お客様の趣味に寄り添った具体例を示すことで、カードの価値を実感してもらえる",tags:["#アニメファン","#初回接客","#具体例活用","#趣味理解"],author:{name:"佐藤 花子",department:"アニメイト渋谷店",avatar:"https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},visibility:"public",eventId:"1",reactions:{like:24,empathy:18,helpful:32},comments:[{id:"1",author:{name:"田中 一郎",department:"アニメイト新宿店",avatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},content:"同じような場面でいつも困っていました。具体例を示すアプローチ、参考になります！",createdAt:new Date("2024-01-20T10:30:00")}],views:156,createdAt:new Date("2024-01-18T14:20:00"),aiSummary:"趣味に特化した具体例提示により、カードの価値を実感させる成功事例",isApprovedForAI:!0},{id:"2",title:"五条悟推しのお客様とのキャラ愛トーク",situation:"10代女性、呪術廻戦フェアで五条悟グッズを大量購入",innovation:"「五条先生いいですよね！私も好きです」と共感。「次回のコラボでも五条先生グッズ出ると思うので、カードがあるとポイントでさらにグッズが買えますよ」と提案",result:"お客様が「それは嬉しい！絶対作ります！」と即決。SNSでも「店員さんも五条推しで話が盛り上がった」と投稿",learning:"キャラ愛を共有することで心の距離が縮まり、提案が自然に受け入れられる",tags:["#呪術廻戦","#キャラ愛","#共感","#ファン心理"],author:{name:"山田 美咲",department:"マルイ渋谷店",avatar:"https://images.pexels.com/photos/762020/pexels-photo-762020.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},visibility:"public",eventId:"1",reactions:{like:45,empathy:38,helpful:52},comments:[{id:"2",author:{name:"鈴木 太郎",department:"マルイ新宿店",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},content:"ファンの気持ちに寄り添うの大事ですね！参考になります！",createdAt:new Date("2024-01-19T16:45:00")}],views:298,createdAt:new Date("2024-01-19T11:15:00"),aiSummary:"キャラクター愛を共有することで信頼関係を築き、自然なカード提案につなげた成功事例",isApprovedForAI:!0},{id:"3",title:"クレーム対応からカード口コミへの転換",situation:"40代男性、商品の不具合でクレーム、怒りを感じている状態",innovation:"まず誠実に謝罪し、迅速に交換対応。その後、「今後このようなことがないよう、カード会員様には優先サポートをご提供している」と自然に紹介",result:"お客様の怒りが収まり、「そういうサービスがあるなら安心ですね」とカード申込み",learning:"クレーム対応では信頼回復が最優先。その後の付加価値提案が効果的",tags:["#クレーム対応","#信頼回復","#付加価値提案","#優先サポート"],author:{name:"高橋 健太",department:"マルイ池袋店",avatar:"https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},visibility:"department",targetDepartment:"マルイ各店舗",reactions:{like:19,empathy:35,helpful:28},comments:[],views:89,createdAt:new Date("2024-01-16T09:30:00"),aiSummary:"クレーム対応後の信頼回復を活用したカード口コミの成功パターン"}],ec=["#初回接客","#リピート促進","#クレーム対応","#断り対応","#アニメファン","#ファミリー層","#シニア層","#学生","#具体例活用","#信頼関係","#タイミング重視","#感情配慮","#QRコード活用","#優先サポート","#特典説明","#ポイント活用"],Em=["マルイ渋谷店","マルイ新宿店","マルイ池袋店","マルイ有楽町店","アニメイト渋谷店","アニメイト新宿店","アニメイト池袋店","エポスカード本社","フィンテック事業部","カスタマーサポート"],Pm=["リピート促進","クレーム対応","新規開拓","ファン層攻略","シニア対応","ファミリー対応","イベント活用","デジタル活用"];function Ny({scores:t}){const e=[{key:"communication",label:"ヒアリング力",value:t.communication},{key:"empathy",label:"親しみやすさ",value:t.empathy},{key:"problemSolving",label:"柔軟対応力",value:t.problemSolving},{key:"productKnowledge",label:"口コミ力",value:t.productKnowledge},{key:"professionalism",label:"会話スピード",value:t.professionalism}],s=100,n=a=>{const l={communication:"ヒアリング力",empathy:"親しみやすさ",problemSolving:"柔軟対応力",productKnowledge:"口コミ力",professionalism:"会話スピード"};return jy.find(o=>o.skill===l[a])},i=(a,l)=>{const o=a-l;return o>5?r.jsx(pr,{className:"w-4 h-4 text-success-green"}):o<-5?r.jsx(iy,{className:"w-4 h-4 text-vivid-red"}):r.jsx(Gg,{className:"w-4 h-4 text-gray-400"})};return r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"スキル分析"}),r.jsx("div",{className:"space-y-4",children:e.map(a=>{const l=a.value/s*100,o=n(a.key);return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.label}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-bold text-gray-900",children:a.value}),o&&i(a.value,o.averageScore)]})]}),r.jsxs("div",{className:"relative w-full bg-gray-200 rounded-full h-3",children:[o&&r.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-gray-400 rounded-full",style:{left:`${o.averageScore/s*100}%`},title:`平均: ${o.averageScore}`}),r.jsx("div",{className:`h-3 rounded-full transition-all duration-700 ${o&&a.value>o.averageScore?"bg-gradient-to-r from-success-green to-emerald-green":"bg-gradient-to-r from-sky-blue to-blue-500"}`,style:{width:`${l}%`}})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-500",children:[l>=90&&"優秀",l>=80&&l<90&&"良好",l>=70&&l<80&&"標準",l>=60&&l<70&&"要改善",l<60&&"要重点強化"]}),o&&r.jsxs("span",{className:"text-gray-400",children:["平均 ",o.averageScore," | 上位",100-o.percentile,"%"]})]})]},a.key)})}),r.jsxs("div",{className:"p-4 bg-gradient-to-r from-red-50 to-yellow-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"総合評価"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold text-vivid-red",children:Math.round(Object.values(t).reduce((a,l)=>a+l,0)/Object.values(t).length)}),r.jsx("div",{className:"text-sm text-gray-600",children:"/100点"}),r.jsx("div",{className:"ml-4 text-sm text-gray-600",children:"社内平均: 75点"})]})]})]})}function ky({evaluationData:t}){const e=[{key:"communication",label:"ヒアリング力",score:t.communication},{key:"empathy",label:"親しみやすさ",score:t.empathy},{key:"problemSolving",label:"柔軟対応力",score:t.problemSolving},{key:"productKnowledge",label:"提案力",score:t.productKnowledge},{key:"professionalism",label:"会話スピード",score:t.professionalism}],s=e.reduce((l,o)=>l.score>o.score?l:o),n=e.reduce((l,o)=>l.score<o.score?l:o),i=Vn.find(l=>l.type==="strength"&&l.targetSkill===s.key)||Vn.find(l=>l.type==="strength"),a=Vn.find(l=>l.type==="improvement"&&l.targetSkill===n.key)||Vn.find(l=>l.type==="improvement");return r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Xt,{className:"w-6 h-6 text-vivid-red"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"あなた専用学習プラン"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i&&r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-lime-50 rounded-lg p-6 border border-green-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(hn,{className:"w-5 h-5 text-success-green"}),r.jsx("span",{className:"px-3 py-1 bg-green-100 text-success-green text-xs font-medium rounded-full",children:"得意を伸ばす"})]}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:i.title}),r.jsx("p",{className:"text-sm text-gray-700 mb-4",children:i.description}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"対象スキル:"}),r.jsxs("span",{className:"font-medium text-success-green",children:[s.label," (",s.score,"点)"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"推定時間:"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[i.estimatedDuration,"分"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"シナリオ数:"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[i.scenarios.length,"個"]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:i.tags.map((l,o)=>r.jsx("span",{className:"text-xs bg-white text-success-green px-2 py-1 rounded border border-green-200",children:l},o))}),r.jsxs("button",{className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-success-green text-white rounded-lg hover:bg-emerald-green transition-colors font-medium",children:[r.jsx(kt,{className:"w-4 h-4"}),r.jsx("span",{children:"学習を開始"})]})]}),a&&r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 rounded-lg p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(Xt,{className:"w-5 h-5 text-sky-blue"}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-sky-blue text-xs font-medium rounded-full",children:"課題を克服"})]}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:a.title}),r.jsx("p",{className:"text-sm text-gray-700 mb-4",children:a.description}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"対象スキル:"}),r.jsxs("span",{className:"font-medium text-sky-blue",children:[n.label," (",n.score,"点)"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"推定時間:"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[a.estimatedDuration,"分"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"シナリオ数:"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[a.scenarios.length,"個"]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.tags.map((l,o)=>r.jsx("span",{className:"text-xs bg-white text-sky-blue px-2 py-1 rounded border border-blue-200",children:l},o))}),r.jsxs("button",{className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[r.jsx(kt,{className:"w-4 h-4"}),r.jsx("span",{children:"学習を開始"})]})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[r.jsx("h4",{className:"font-medium text-sunshine-yellow mb-2",children:"💡 学習のコツ"}),r.jsxs("p",{className:"text-sm text-gray-700",children:["得意分野を伸ばすことで自信がつき、全体的なパフォーマンス向上につながります。 まずは「",s.label,"」をさらに磨いて、口コミの武器にしましょう！"]})]})]})}function _y(){const t=Cr[Cr.length-1],e=Cr[Cr.length-2],s={communication:"ヒアリング力",empathy:"親しみやすさ",problemSolving:"柔軟対応力",productKnowledge:"口コミ力",professionalism:"会話スピード"},n=l=>e?t.scores[l]-e.scores[l]:0,i=l=>l>0?"text-success-green":l<0?"text-vivid-red":"text-gray-500",a=l=>l>0?"↗":l<0?"↘":"→";return r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx(pr,{className:"w-5 h-5 text-sky-blue"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"成長記録"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-success-green",children:Cr.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"診断回数"})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-success-green",children:Math.round(Object.values(t.scores).reduce((l,o)=>l+o,0)/5)}),r.jsx("div",{className:"text-sm text-gray-600",children:"最新スコア"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"前回からの変化"}),Object.entries(s).map(([l,o])=>{const c=n(l),d=t.scores[l];return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:o}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-bold text-gray-900",children:d}),r.jsxs("span",{className:`text-sm font-medium ${i(c)}`,children:[a(c)," ",Math.abs(c)]})]})]},l)})]}),r.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-yellow-50 to-red-50 rounded-lg border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(De,{className:"w-4 h-4 text-sunshine-yellow"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"次回診断予定"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"継続的な成長のため、1週間後の診断をお勧めします"})]})]})]})}function Sy({evaluationData:t,onRetakeDiagnosis:e}){const s=t.overallScore||Math.round(Object.values(t).slice(0,5).reduce((a,l)=>a+l,0)/5),i=(a=>{if(t.feedback&&t.strengths&&t.improvements)return{strengths:t.strengths,improvements:t.improvements};const l=[],o=[];return a.productKnowledge>=85&&l.push("カード知識が豊富で、お客様に分かりやすく口コミできています"),a.professionalism>=85&&l.push("プロフェッショナルな対応で信頼感を与えています"),a.empathy>=85&&l.push("共感力を活かしてお客様の気持ちに寄り添えています"),a.communication<80&&o.push("もう少し積極的にコミュニケーションを取りましょう"),a.problemSolving<80&&o.push("問題解決において、より具体的な口コミを心がけましょう"),a.empathy<80&&o.push("お客様の立場に立った対応を意識してみてください"),{strengths:l,improvements:o}})(t);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"診断結果"})}),r.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(Yo,{className:"w-4 h-4"}),r.jsx("span",{children:"再診断"})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl p-6 border border-red-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl font-bold text-vivid-red mb-2",children:s}),r.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1",children:"総合スコア"}),t.feedback?r.jsx("div",{className:"text-sm text-gray-700 max-w-2xl mx-auto",children:t.feedback}):r.jsxs("div",{className:"text-sm text-gray-600",children:[s>=90&&"優秀な接客スキルです！",s>=80&&s<90&&"良好な接客ができています",s>=70&&s<80&&"標準的なレベルです",s<70&&"更なる向上の余地があります"]}),t.emotionalAnalysis&&r.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-sky-blue",children:t.emotionalAnalysis.confidence}),r.jsx("div",{className:"text-xs text-gray-600",children:"自信度"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-success-green",children:t.emotionalAnalysis.engagement}),r.jsx("div",{className:"text-xs text-gray-600",children:"積極性"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-sunshine-yellow",children:t.emotionalAnalysis.tone==="positive"?"前向き":t.emotionalAnalysis.tone==="negative"?"消極的":"普通"}),r.jsx("div",{className:"text-xs text-gray-600",children:"トーン"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Ny,{scores:t})}),r.jsxs("div",{className:"space-y-6",children:[i.strengths.length>0&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(ft,{className:"w-5 h-5 text-success-green"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"強み"})]}),r.jsx("div",{className:"space-y-3",children:i.strengths.map((a,l)=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-success-green rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-gray-700",children:a})]},l))})]}),i.improvements.length>0&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(pr,{className:"w-5 h-5 text-sunshine-yellow"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"改善点"})]}),r.jsx("div",{className:"space-y-3",children:i.improvements.map((a,l)=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-sunshine-yellow rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-gray-700",children:a})]},l))})]})]})]}),r.jsx(ky,{evaluationData:t}),r.jsx(_y,{}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(De,{className:"w-5 h-5 text-sky-blue"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"診断セッション詳細"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-sky-blue",children:t.sessionMessages.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"AI応答回数"})]}),r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"text-lg font-bold text-lime-green",children:[Math.floor(300/60),"分"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"診断時間"})]}),r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[r.jsx("div",{className:"text-lg font-bold text-sunshine-yellow",children:"音声+映像"}),r.jsx("div",{className:"text-sm text-gray-600",children:"分析方法"})]})]})]})]})}function Cy(){const[t,e]=_.useState("diagnosis"),[s,n]=_.useState(null),i=l=>{n(l),e("results")},a=()=>{e("diagnosis"),n(null)};return r.jsx("div",{className:"min-h-0",children:t==="diagnosis"?r.jsx(by,{onComplete:i}):r.jsx(Sy,{evaluationData:s,onRetakeDiagnosis:a})})}function Ey({onSubmit:t,onCancel:e}){const[s,n]=_.useState({title:"",situation:"",innovation:"",result:"",learning:"",tags:[],visibility:"public"}),[i,a]=_.useState(""),[l,o]=_.useState(!1),[c,d]=_.useState({}),[u,h]=_.useState([]),[f,v]=_.useState(!1),x=(g,N)=>{n(k=>({...k,[g]:N})),c[g]&&d(k=>({...k,[g]:""})),(g==="title"||g==="situation"||g==="innovation")&&setTimeout(()=>{const k=[];(N.includes("アニメ")||N.includes("イベント"))&&k.push("#アニメファン","#イベント対応"),(N.includes("断り")||N.includes("拒否"))&&k.push("#断り対応","#感情コントロール"),(N.includes("シニア")||N.includes("年配"))&&k.push("#シニア層","#丁寧対応"),h(k)},500)},b=g=>{!s.tags.includes(g)&&s.tags.length<8&&n(N=>({...N,tags:[...N.tags,g]})),a(""),o(!1)},S=g=>{n(N=>({...N,tags:N.tags.filter(k=>k!==g)}))},y=()=>{const g={};return s.title.trim()||(g.title="タイトルは必須です"),s.situation.trim()||(g.situation="状況の説明は必須です"),s.innovation.trim()||(g.innovation="工夫したことは必須です"),s.result.trim()||(g.result="結果の説明は必須です"),s.learning.trim()||(g.learning="学び・気づきは必須です"),s.tags.length===0&&(g.tags="最低1つのタグを選択してください"),s.visibility==="department"&&!s.targetDepartment&&(g.targetDepartment="部署を選択してください"),s.visibility==="theme"&&!s.targetTheme&&(g.targetTheme="テーマを選択してください"),d(g),Object.keys(g).length===0},m=g=>{g.preventDefault(),y()&&t(s)},p=ec.filter(g=>g.toLowerCase().includes(i.toLowerCase())&&!s.tags.includes(g));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(jt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"成功事例を投稿"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"あなたの接客成功体験を仲間と共有しましょう"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(pt,{className:"w-5 h-5 text-sky-blue mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sky-blue mb-1",children:"AI学習データとして活用"}),r.jsx("p",{className:"text-sm text-blue-700",children:"投稿された事例は管理者承認後、AI学習データとして活用され、 より良い学習コンテンツの作成に貢献します。"})]})]})}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ty,{className:"w-5 h-5 text-success-green mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-success-green mb-1",children:"AIによる自動チェック"}),r.jsx("p",{className:"text-sm text-green-700",children:"投稿内容は自動で個人情報チェックを行い、適切でない内容は投稿前にお知らせします。"})]})]})}),r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["タイトル ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("input",{type:"text",value:s.title,onChange:g=>x("title",g.target.value),placeholder:"例：アニメファンのお客様への効果的なカード口コミ",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.title?"border-red-300":"border-gray-300"}`,maxLength:100}),c.title&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:c.title})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["状況（顧客属性・場面） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:s.situation,onChange:g=>x("situation",g.target.value),placeholder:"例：20代男性、アニメイベントでグッズ購入、初回来店",rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.situation?"border-red-300":"border-gray-300"}`,maxLength:500}),c.situation&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:c.situation})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["工夫したこと（接客上の工夫・意識点） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:s.innovation,onChange:g=>x("innovation",g.target.value),placeholder:"例：お客様の好きなアニメ作品について会話を始め、そのアニメの関連商品でポイントが貯まることを具体例で説明",rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.innovation?"border-red-300":"border-gray-300"}`,maxLength:1e3}),c.innovation&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:c.innovation})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["結果（顧客反応・成果） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:s.result,onChange:g=>x("result",g.target.value),placeholder:"例：お客様が興味を示し、「次回のイベントでも使えますね」と前向きな反応。その場でカード申込み",rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.result?"border-red-300":"border-gray-300"}`,maxLength:500}),c.result&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:c.result})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["学び・気づき（得られた教訓） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:s.learning,onChange:g=>x("learning",g.target.value),placeholder:"例：お客様の趣味に寄り添った具体例を示すことで、カードの価値を実感してもらえる",rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.learning?"border-red-300":"border-gray-300"}`,maxLength:500}),c.learning&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:c.learning})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-4",children:["タグ ",r.jsx("span",{className:"text-vivid-red",children:"*"}),r.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"（最大8個まで）"})]}),u.length>0&&r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(sa,{className:"w-4 h-4 text-sky-blue"}),r.jsx("span",{className:"text-sm font-medium text-sky-blue",children:"AI提案タグ"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(g=>r.jsxs("button",{type:"button",onClick:()=>b(g),className:"px-3 py-1 bg-sky-blue text-white text-sm rounded-full hover:bg-blue-600 transition-colors",children:["+ ",g]},g))})]}),s.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map(g=>r.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-sky-blue text-white text-sm rounded-full",children:[r.jsx("span",{children:g}),r.jsx("button",{type:"button",onClick:()=>S(g),className:"text-white hover:text-gray-200",children:"×"})]},g))}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:i,onChange:g=>a(g.target.value),onFocus:()=>o(!0),placeholder:"タグを入力または選択...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",onKeyPress:g=>{g.key==="Enter"&&(g.preventDefault(),i.trim()&&!i.startsWith("#")?b("#"+i.trim()):i.trim()&&b(i.trim()))}}),l&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:p.length>0?p.map(g=>r.jsx("button",{type:"button",onClick:()=>b(g),className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:g},g)):r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"候補がありません"})})]}),c.tags&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:c.tags})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-4",children:["公開範囲 ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"visibility",value:"public",checked:s.visibility==="public",onChange:g=>x("visibility",g.target.value),className:"text-sky-blue focus:ring-sky-blue"}),r.jsx(cr,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"全社オープン"}),r.jsx("div",{className:"text-sm text-gray-600",children:"すべての社員が閲覧可能"})]})]}),r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"visibility",value:"department",checked:s.visibility==="department",onChange:g=>x("visibility",g.target.value),className:"text-sky-blue focus:ring-sky-blue"}),r.jsx(ea,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"部署限定"}),r.jsx("div",{className:"text-sm text-gray-600",children:"指定した部署のメンバーのみ"})]})]}),r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"visibility",value:"theme",checked:s.visibility==="theme",onChange:g=>x("visibility",g.target.value),className:"text-sky-blue focus:ring-sky-blue"}),r.jsx(ue,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"テーマ別コミュニティ"}),r.jsx("div",{className:"text-sm text-gray-600",children:"特定のテーマに興味のあるメンバー"})]})]})]}),s.visibility==="department"&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("select",{value:s.targetDepartment||"",onChange:g=>x("targetDepartment",g.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.targetDepartment?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"部署を選択してください"}),Em.map(g=>r.jsx("option",{value:g,children:g},g))]}),c.targetDepartment&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.targetDepartment})]}),s.visibility==="theme"&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("select",{value:s.targetTheme||"",onChange:g=>x("targetTheme",g.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${c.targetTheme?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"テーマを選択してください"}),Pm.map(g=>r.jsx("option",{value:g,children:g},g))]}),c.targetTheme&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.targetTheme})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:r.jsxs("label",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",checked:f,onChange:g=>v(g.target.checked),className:"mt-1 text-sky-blue focus:ring-sky-blue"}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"プライバシーポリシーに同意します"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"投稿内容にお客様の個人情報（名前、連絡先等）が含まれていないことを確認しました。 投稿はAI学習データとして活用される場合があります。"})]})]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"キャンセル"}),r.jsx("button",{type:"submit",disabled:!f,className:"flex-1 px-6 py-3 bg-vivid-red text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"投稿する"})]})]})]})}function Py({post:t,onReaction:e,onClick:s}){const i=(()=>{switch(t.visibility){case"public":return{icon:cr,label:"全社公開",color:"text-green-600 bg-green-100"};case"department":return{icon:ea,label:t.targetDepartment||"部署限定",color:"text-blue-600 bg-blue-100"};case"theme":return{icon:ue,label:t.targetTheme||"テーマ別",color:"text-purple-600 bg-purple-100"};default:return{icon:cr,label:"公開",color:"text-gray-600 bg-gray-100"}}})(),a=i.icon;t.reactions.like+t.reactions.empathy+t.reactions.helpful;const l=(o,c)=>{o.stopPropagation(),e(t.id,c)};return r.jsxs("div",{onClick:s,className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"w-10 h-10 rounded-full object-cover"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:t.author.name}),r.jsx("div",{className:"text-sm text-gray-600",children:t.author.department})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${i.color}`,children:[r.jsx(a,{className:"w-3 h-3"}),r.jsx("span",{children:i.label})]}),t.isApprovedForAI&&r.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700",children:[r.jsx(pt,{className:"w-3 h-3"}),r.jsx("span",{children:"AI学習採用"})]}),new Date().getTime()-t.createdAt.getTime()<24*60*60*1e3&&r.jsx("span",{className:"inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-vivid-red",children:r.jsx("span",{children:"NEW"})}),r.jsx(Nt,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 transition-colors"})]})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 group-hover:text-sky-blue transition-colors",children:t.title}),t.aiSummary&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(pt,{className:"w-4 h-4 text-sky-blue mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-medium text-sky-blue mb-1",children:"AI要約"}),r.jsx("p",{className:"text-sm text-blue-700",children:t.aiSummary})]})]})}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"状況"}),r.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:t.situation})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"工夫"}),r.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:t.innovation})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.tags.slice(0,4).map((o,c)=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:o},c)),t.tags.length>4&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-md",children:["+",t.tags.length-4,"個"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:o=>l(o,"like"),className:`flex items-center space-x-1 px-2 py-1 rounded-md text-sm transition-colors ${t.userReaction==="like"?"bg-blue-100 text-sky-blue":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Zt,{className:"w-4 h-4"}),r.jsx("span",{children:t.reactions.like})]}),r.jsxs("button",{onClick:o=>l(o,"empathy"),className:`flex items-center space-x-1 px-2 py-1 rounded-md text-sm transition-colors ${t.userReaction==="empathy"?"bg-red-100 text-vivid-red":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(fs,{className:"w-4 h-4"}),r.jsx("span",{children:t.reactions.empathy})]}),r.jsxs("button",{onClick:o=>l(o,"helpful"),className:`flex items-center space-x-1 px-2 py-1 rounded-md text-sm transition-colors ${t.userReaction==="helpful"?"bg-yellow-100 text-sunshine-yellow":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(un,{className:"w-4 h-4"}),r.jsx("span",{children:t.reactions.helpful})]}),r.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-sm",children:[r.jsx(Ne,{className:"w-4 h-4"}),r.jsx("span",{children:t.comments.length})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Yt,{className:"w-4 h-4"}),r.jsx("span",{children:t.views})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(De,{className:"w-4 h-4"}),r.jsx("span",{children:t.createdAt.toLocaleDateString("ja-JP")})]})]})]})]})}function Tm({post:t,onBack:e,onReaction:s}){const[n,i]=_.useState(""),[a,l]=_.useState(t.comments),c=(()=>{switch(t.visibility){case"public":return{icon:cr,label:"全社公開",color:"text-green-600 bg-green-100"};case"department":return{icon:ea,label:t.targetDepartment||"部署限定",color:"text-blue-600 bg-blue-100"};case"theme":return{icon:ue,label:t.targetTheme||"テーマ別",color:"text-purple-600 bg-purple-100"};default:return{icon:cr,label:"公開",color:"text-gray-600 bg-gray-100"}}})(),d=c.icon,u=f=>{if(f.preventDefault(),!n.trim())return;const v={id:Date.now().toString(),author:{name:"田中 太郎",department:"カード口コミ部",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},content:n,createdAt:new Date};l([...a,v]),i("")},h=f=>{s(t.id,f)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(jt,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.title})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ey,{className:"w-5 h-5"})}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Mg,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"w-12 h-12 rounded-full object-cover"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900",children:t.author.name}),r.jsx("div",{className:"text-sm text-gray-600",children:t.author.department})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:`inline-flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full ${c.color}`,children:[r.jsx(d,{className:"w-4 h-4"}),r.jsx("span",{children:c.label})]}),t.isApprovedForAI&&r.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-700",children:[r.jsx(pt,{className:"w-4 h-4"}),r.jsx("span",{children:"AI学習採用"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(De,{className:"w-4 h-4"}),r.jsx("span",{children:t.createdAt.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Yt,{className:"w-4 h-4"}),r.jsxs("span",{children:[t.views," 回閲覧"]})]})]})]}),t.aiSummary&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(pt,{className:"w-6 h-6 text-sky-blue mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sky-blue mb-2",children:"AI要約"}),r.jsx("p",{className:"text-blue-700",children:t.aiSummary})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[r.jsx("span",{className:"w-6 h-6 bg-blue-100 text-sky-blue rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),r.jsx("span",{children:"状況（顧客属性・場面）"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed pl-8",children:t.situation})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[r.jsx("span",{className:"w-6 h-6 bg-green-100 text-success-green rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),r.jsx("span",{children:"工夫したこと（接客上の工夫・意識点）"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed pl-8",children:t.innovation})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[r.jsx("span",{className:"w-6 h-6 bg-yellow-100 text-sunshine-yellow rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),r.jsx("span",{children:"結果（顧客反応・成果）"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed pl-8",children:t.result})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[r.jsx("span",{className:"w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),r.jsx("span",{children:"学び・気づき（得られた教訓）"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed pl-8",children:t.learning})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"関連タグ"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((f,v)=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200 cursor-pointer transition-colors",children:f},v))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-5 h-5"}),r.jsxs("span",{children:["コメント (",a.length,")"]})]}),r.jsx("form",{onSubmit:u,className:"mb-6",children:r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("img",{src:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",alt:"あなた",className:"w-8 h-8 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("textarea",{value:n,onChange:f=>i(f.target.value),placeholder:"コメントを入力...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent resize-none"}),r.jsx("div",{className:"flex justify-end mt-2",children:r.jsxs("button",{type:"submit",disabled:!n.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(Xo,{className:"w-4 h-4"}),r.jsx("span",{children:"投稿"})]})})]})]})}),r.jsx("div",{className:"space-y-4",children:a.map(f=>r.jsxs("div",{className:"flex space-x-3 p-4 bg-gray-50 rounded-lg",children:[r.jsx("img",{src:f.author.avatar,alt:f.author.name,className:"w-8 h-8 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:f.author.name}),r.jsx("span",{className:"text-sm text-gray-500",children:f.author.department}),r.jsx("span",{className:"text-sm text-gray-400",children:f.createdAt.toLocaleDateString("ja-JP")})]}),r.jsx("p",{className:"text-gray-700",children:f.content})]})]},f.id))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"リアクション"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>h("like"),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${t.userReaction==="like"?"bg-blue-50 border-sky-blue text-sky-blue":"border-gray-200 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Zt,{className:"w-5 h-5"}),r.jsx("span",{children:"いいね"})]}),r.jsx("span",{className:"font-semibold",children:t.reactions.like})]}),r.jsxs("button",{onClick:()=>h("empathy"),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${t.userReaction==="empathy"?"bg-red-50 border-vivid-red text-vivid-red":"border-gray-200 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(fs,{className:"w-5 h-5"}),r.jsx("span",{children:"共感"})]}),r.jsx("span",{className:"font-semibold",children:t.reactions.empathy})]}),r.jsxs("button",{onClick:()=>h("helpful"),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-colors ${t.userReaction==="helpful"?"bg-yellow-50 border-sunshine-yellow text-sunshine-yellow":"border-gray-200 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(un,{className:"w-5 h-5"}),r.jsx("span",{children:"参考になった"})]}),r.jsx("span",{className:"font-semibold",children:t.reactions.helpful})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"関連シミュレーション"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm",children:"アニメファン接客練習"}),r.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"この事例に基づいた練習シナリオ"})]}),r.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm",children:"趣味理解型口コミ"}),r.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"顧客の趣味に合わせた提案練習"})]})]})]})]})]})]})}async function Ty(){const{data:t,error:e}=await Fe.from("case_posts").select("*").eq("category","other").order("created_at",{ascending:!1});if(e)throw console.error("Failed to fetch case_posts (other):",e),new Error(e.message||"fetchOtherCasePosts failed");if(!t||t.length===0)return[];const s=Array.from(new Set((t||[]).map(i=>i.author_id))).filter(Boolean);let n=new Map;if(s.length>0){const{data:i,error:a}=await Fe.from("users").select("id,name,department,avatar").in("id",s);if(a)console.error("Failed to fetch users for case_posts:",a);else if(i)for(const l of i)n.set(l.id,l)}return(t||[]).map(i=>{const a=n.get(i.author_id);return{id:i.id,title:i.title,situation:i.situation,innovation:i.approach,result:i.result,learning:i.notes,tags:Array.isArray(i.tags)?i.tags:[],author:{name:(a==null?void 0:a.name)||"不明なユーザー",department:(a==null?void 0:a.department)||"不明な部署",avatar:(a==null?void 0:a.avatar)||"https://placehold.co/80x80"},visibility:"public",eventId:i.related_event_id||void 0,reactions:{like:i.like_count??0,empathy:i.empathy_count??0,helpful:i.helpful_count??0},comments:[],views:0,createdAt:new Date(i.created_at),aiSummary:void 0,isApprovedForAI:!!i.is_ai_adopted}})}async function Dy(t){const{authorId:e,title:s,situation:n,approach:i,result:a,notes:l,tags:o}=t,c={author_id:e,category:"other",title:s,related_event_id:null,situation:n,approach:i,result:a,notes:l,tags:o},{error:d}=await Fe.from("case_posts").insert([c]);return d?(console.error("Failed to insert other case post:",d),!1):!0}async function Ay(t){const e=t==null?void 0:t.sinceDays,s=new Date(Date.now()-e*24*60*60*1e3).toISOString();let{data:n,error:i}=await Fe.from("case_posts").select("*").eq("category","favorite_event").gte("created_at",s).order("created_at",{ascending:!1});if(i)throw console.error("Failed to fetch favorite_event posts:",i),new Error(i.message||"fetchFavoriteEventPosts failed");if(!n||n.length===0){const o=await Fe.from("case_posts").select("*").eq("category","favorite_event").order("created_at",{ascending:!1});o.error||(n=o.data||[])}const a=Array.from(new Set((n||[]).map(o=>o.author_id))).filter(Boolean);let l=new Map;if(a.length>0){const{data:o,error:c}=await Fe.from("users").select("id,name,department,avatar").in("id",a);if(!c&&o)for(const d of o)l.set(d.id,d)}return(n||[]).map(o=>{const c=l.get(o.author_id);return{id:o.id,title:o.title,situation:o.situation,innovation:o.approach,result:o.result,learning:o.notes,tags:Array.isArray(o.tags)?o.tags:[],author:{name:(c==null?void 0:c.name)||"不明なユーザー",department:(c==null?void 0:c.department)||"不明な部署",avatar:(c==null?void 0:c.avatar)||"https://placehold.co/80x80"},visibility:"public",eventId:o.related_event_id||void 0,reactions:{like:o.like_count??0,empathy:o.empathy_count??0,helpful:o.helpful_count??0},comments:[],views:0,createdAt:new Date(o.created_at),aiSummary:void 0,isApprovedForAI:!!o.is_ai_adopted}})}function Dm({reloadKey:t=0}){const[e,s]=_.useState("list"),[n,i]=_.useState(null),[a,l]=_.useState([]),[o,c]=_.useState(!0),[d,u]=_.useState(null);_.useEffect(()=>{(async()=>{console.log("Community: Loading posts from database..."),c(!0),u(null);try{const P=await Ty();console.log("Community: Loaded posts:",P),l(P)}catch(P){console.error("Community: Error loading posts:",P),u("投稿の読み込みに失敗しました")}finally{c(!1)}})()},[t]);const[h,f]=_.useState(""),[v,x]=_.useState([]),[b,S]=_.useState("latest"),[y,m]=_.useState("all"),[p,g]=_.useState(!1),[N,k]=_.useState([{id:"1",type:"reaction",message:"あなたの投稿「アニメファン接客事例」に👍いいねがつきました",timestamp:new Date("2024-01-20T10:30:00"),read:!1},{id:"2",type:"ai_adoption",message:"あなたの投稿がAI学習データとして採用されました",timestamp:new Date("2024-01-19T15:45:00"),read:!1}]),C=E=>{const P={id:Date.now().toString(),...E,author:{name:"田中 太郎",department:"カード口コミ部",avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop"},reactions:{like:0,empathy:0,helpful:0},comments:[],views:0,createdAt:new Date,aiSummary:"AI分析中...",isApprovedForAI:!1};setTimeout(()=>{const z={...P};["呪術廻戦","MGAフェス","バレンタイン","イベント"].some(we=>P.title.includes(we)||P.tags.some(Ce=>Ce.includes(we)))?z.aiSummary="イベント関連の成功事例として自動分類されました。イベントページにも反映されます。":z.aiSummary="AI分析完了：効果的な接客テクニックが含まれています。",l(we=>we.map(Ce=>Ce.id===P.id?z:Ce))},2e3),l([P,...a]),s("list")},j=(E,P)=>{l(a.map(z=>{if(z.id===E){const se={...z.reactions};return z.userReaction&&se[z.userReaction]--,z.userReaction!==P?(se[P]++,{...z,reactions:se,userReaction:P}):{...z,reactions:se,userReaction:null}}return z}))},M=a.filter(E=>!(h&&!E.title.toLowerCase().includes(h.toLowerCase())&&!E.situation.toLowerCase().includes(h.toLowerCase())&&!E.tags.some(P=>P.toLowerCase().includes(h.toLowerCase()))||v.length>0&&!v.some(P=>E.tags.includes(P))||y!=="all"&&E.visibility!==y)).sort((E,P)=>{switch(b){case"popular":const z=E.reactions.like+E.reactions.empathy+E.reactions.helpful;return P.reactions.like+P.reactions.empathy+P.reactions.helpful-z;case"views":return P.views-E.views;case"trending":const $e=(E.reactions.like+E.reactions.empathy+E.reactions.helpful)*2+E.views;return(P.reactions.like+P.reactions.empathy+P.reactions.helpful)*2+P.views-$e;case"latest":default:return P.createdAt.getTime()-E.createdAt.getTime()}}),U=ec.slice(0,8);return a.reduce((E,P)=>E+P.reactions.like+P.reactions.empathy+P.reactions.helpful,0),N.filter(E=>!E.read).length,e==="create"?r.jsx(Ey,{onSubmit:C,onCancel:()=>s("list")}):e==="detail"&&n?r.jsx(Tm,{post:n,onBack:()=>s("list"),onReaction:j}):r.jsxs("div",{className:"space-y-6 w-full max-w-full overflow-x-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-red-50 rounded-xl p-6 border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(ft,{className:"w-6 h-6 text-sunshine-yellow"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"今週の人気事例TOP3"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.sort((E,P)=>{const z=E.reactions.like+E.reactions.empathy+E.reactions.helpful;return P.reactions.like+P.reactions.empathy+P.reactions.helpful-z}).slice(0,3).map((E,P)=>r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold ${P===0?"bg-sunshine-yellow":P===1?"bg-gray-400":"bg-orange-500"}`,children:P+1}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.author.department})]}),r.jsx("h4",{className:"font-medium text-gray-900 text-sm mb-2 line-clamp-2",children:E.title}),r.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[r.jsxs("span",{children:[E.reactions.like+E.reactions.empathy+E.reactions.helpful," リアクション"]}),r.jsxs("span",{children:[E.views," 閲覧"]})]})]},E.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[r.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:r.jsx(Ne,{className:"w-5 h-5 text-vivid-red"})}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:a.length}),r.jsx("p",{className:"text-sm text-gray-600",children:"投稿事例"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[r.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:r.jsx(pt,{className:"w-5 h-5 text-sunshine-yellow"})}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:a.filter(E=>E.isApprovedForAI).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"AI学習採用"})]})]}),r.jsxs("div",{className:"hidden bg-gradient-to-r from-yellow-50 to-red-50 rounded-xl p-6 border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(ft,{className:"w-6 h-6 text-sunshine-yellow"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"今週の人気事例TOP3"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.sort((E,P)=>{const z=E.reactions.like+E.reactions.empathy+E.reactions.helpful;return P.reactions.like+P.reactions.empathy+P.reactions.helpful-z}).slice(0,3).map((E,P)=>r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold ${P===0?"bg-sunshine-yellow":P===1?"bg-gray-400":"bg-orange-500"}`,children:P+1}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.author.department})]}),r.jsx("h4",{className:"font-medium text-gray-900 text-sm mb-2 line-clamp-2",children:E.title}),r.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[r.jsxs("span",{children:[E.reactions.like+E.reactions.empathy+E.reactions.helpful," リアクション"]}),r.jsxs("span",{children:[E.views," 閲覧"]})]})]},E.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"事例を検索...",value:h,onChange:E=>f(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("select",{value:b,onChange:E=>S(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",children:[r.jsx("option",{value:"latest",children:"最新順"}),r.jsx("option",{value:"popular",children:"人気順"}),r.jsx("option",{value:"trending",children:"トレンド順"}),r.jsx("option",{value:"views",children:"閲覧数順"})]}),r.jsxs("select",{value:y,onChange:E=>m(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",children:[r.jsx("option",{value:"all",children:"すべて"}),r.jsx("option",{value:"public",children:"全社公開"}),r.jsx("option",{value:"department",children:"部署限定"}),r.jsx("option",{value:"theme",children:"テーマ別"})]}),r.jsx("button",{onClick:()=>g(!p),className:`px-3 py-2 border rounded-lg transition-colors ${p?"bg-sky-blue text-white border-sky-blue":"border-gray-300 hover:bg-gray-50"}`,children:r.jsx(Wg,{className:"w-4 h-4"})})]})]}),p&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"人気タグで絞り込み"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(E=>r.jsx("button",{onClick:()=>{v.includes(E)?x(v.filter(P=>P!==E)):x([...v,E])},className:`px-3 py-1 text-sm rounded-full border transition-colors ${v.includes(E)?"bg-sky-blue text-white border-sky-blue":"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200"}`,children:E},E))})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(sa,{className:"w-6 h-6 text-sky-blue"}),r.jsx("h3",{className:"font-semibold text-sky-blue",children:"あなたにおすすめの事例"})]}),r.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"あなたのスキル診断結果に基づいて、参考になりそうな事例をAIが選びました"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.slice(0,2).map(E=>r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:E.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:E.situation}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[r.jsx("span",{children:E.author.department}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:[E.reactions.like+E.reactions.empathy+E.reactions.helpful," リアクション"]})]}),r.jsx("button",{className:"text-sky-blue hover:text-blue-600 text-sm font-medium",children:"詳細を見る"})]})]},E.id))})]}),r.jsxs("div",{className:"space-y-4",children:[o&&r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-600",children:"読み込み中..."}),!o&&d&&r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-red-600",children:d}),!o&&!d&&M.length===0?r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[r.jsx(Ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"該当する事例が見つかりません"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"検索条件を変更するか、新しい事例を投稿してみましょう"}),r.jsx("button",{onClick:()=>s("create"),className:"px-4 py-2 bg-vivid-red text-white rounded-lg hover:bg-red-600 transition-colors",children:"事例を投稿する"})]}):!o&&!d&&M.map(E=>r.jsx(Py,{post:E,onReaction:j,onClick:()=>{i(E),s("detail")}},E.id))]})]})}const Ry=[{id:"customer-service",title:"接客スキル相談",description:"声かけ、リピート促進、断られたときの対応など",icon:ue,color:"text-sky-blue",bgColor:"bg-blue-50 border-blue-200",subcategories:["声かけのタイミング","リピート促進","断り対応","初回接客"]},{id:"product-situation",title:"商品・シチュエーション別相談",description:"フィンテック商品、シニア層、時間がない客など",icon:Xt,color:"text-success-green",bgColor:"bg-green-50 border-green-200",subcategories:["フィンテック商品","シニア層対応","時間制約","ファミリー層"]},{id:"expression",title:"言い回し・表現相談",description:"言葉づかい、失礼チェック、フレーズ提案",icon:ta,color:"text-sunshine-yellow",bgColor:"bg-yellow-50 border-yellow-200",subcategories:["敬語チェック","フレーズ提案","失礼回避","自然な表現"]},{id:"roleplay",title:"ロールプレイ相談",description:"AIが顧客役になって対話練習",icon:sa,color:"text-vivid-red",bgColor:"bg-red-50 border-red-200",subcategories:["対話練習","シナリオ練習","実践トレーニング","フィードバック"]},{id:"learning-support",title:"学習支援相談",description:"おすすめ練習シナリオ、事例紹介、個別アドバイス",icon:wn,color:"text-purple-600",bgColor:"bg-purple-50 border-purple-200",subcategories:["学習プラン","事例紹介","個別アドバイス","スキル診断"]}],Iy=[{id:"1",category:"接客スキル相談",question:"アニメイベントでお客様に自然に声をかける方法を教えてください",answer:`アニメイベントでの声かけは、お客様の興味に寄り添うことが重要です。

【おすすめアプローチ】
1. 商品への関心を確認：「このフィギュア、とても人気ですよね！」
2. 共感を示す：「私もこのシリーズ好きなんです」
3. 自然な提案：「実は、アニメグッズのお買い物でお得になるカードがあるんです」

【具体的なフレーズ例】
「イベント限定品、素敵な選択ですね！実は、次回のイベントでもお得に使えるカードがあるんですが、ご興味ありますか？」`,timestamp:new Date("2024-01-20T14:30:00"),rating:5},{id:"2",category:"言い回し・表現相談",question:"「カードを作りませんか」という言い方が直接的すぎる気がします",answer:`より自然で柔らかい表現をご提案します。

【改善案】
❌ 「カードを作りませんか？」
✅ 「お得な会員サービスがあるんですが、ご案内させていただいてもよろしいですか？」

【その他の自然な表現】
• 「ポイントが貯まるサービスをご利用いただけますが...」
• 「次回からもっとお得にお買い物いただける方法があります」
• 「会員様限定の特典をご紹介できるのですが...」

相手の立場に立った「提案」として伝えることで、押し付けがましさを避けられます。`,timestamp:new Date("2024-01-18T11:15:00"),rating:4}];function Oy(){const[t,e]=_.useState(null),[s,n]=_.useState(""),[i,a]=_.useState(""),[l,o]=_.useState(!1),[c,d]=_.useState(""),[u,h]=_.useState(!1),[f,v]=_.useState(Iy),x=m=>{e(m),n(""),a(""),d("")},b=async()=>{!i.trim()||!t||(o(!0),setTimeout(()=>{const m=S(t.id,i);d(m);const p={id:Date.now().toString(),category:t.title,question:i,answer:m,timestamp:new Date};v([p,...f]),o(!1)},2e3))},S=(m,p)=>({"customer-service":`接客スキルについてお答えします。

【基本アプローチ】
1. お客様の状況を観察し、適切なタイミングを見計らう
2. 共感を示しながら自然な会話を始める
3. お客様のメリットを具体的に説明する

【具体的なフレーズ例】
「お忙しい中恐れ入ります。実は、今日のお買い物がもっとお得になる方法があるんです」

【関連する練習シナリオ】
• 基本的な声かけ練習
• タイミング判断トレーニング`,"product-situation":`商品・シチュエーション別のアドバイスをお伝えします。

【状況分析】
お客様の属性や購買状況に応じたアプローチが重要です。

【おすすめ手法】
1. 相手の立場に立った提案
2. 具体的なメリットの提示
3. 次回来店時の価値創造

【実践例】
「${p}」のような場面では、お客様の時間を尊重しつつ、簡潔で魅力的な提案を心がけましょう。`,expression:`言い回し・表現についてアドバイスします。

【改善のポイント】
• より自然で親しみやすい表現を使用
• 相手の立場を考慮した言葉選び
• 押し付けがましくない提案方法

【推奨フレーズ】
「もしよろしければ、お得な情報をご案内させていただけますか？」
「次回からもっと便利にお買い物いただける方法があります」

【避けるべき表現】
直接的すぎる勧誘や、断りにくい表現は控えましょう。`,roleplay:`ロールプレイ練習を開始します。

【練習シナリオ】
私がお客様役を演じますので、実際の接客のように対応してください。

【お客様設定】
20代女性、アニメグッズ購入、初回来店

【シーン開始】
「お会計お願いします。このキーホルダー、可愛いですね！」

あなたの対応をお聞かせください。適切なタイミングでカードのご案内をしてみましょう。`,"learning-support":`学習支援についてお答えします。

【おすすめ学習プラン】
1. 基礎スキル診断で現在のレベルを確認
2. 弱点分野の集中練習
3. 実践シミュレーションで応用力向上

【関連事例】
コミュニティで同様の相談事例を確認できます。

【次のステップ】
• AIシミュレーションでの実践練習
• スキル評価での定期的な成長確認
• コミュニティでの事例共有`})[m]||"申し訳ございません。適切な回答を生成できませんでした。もう一度お試しください。",y=()=>{e(null),n(""),a(""),d("")};return u?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(jt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"相談履歴"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"過去の相談内容と回答を確認できます"})]})]}),r.jsx("div",{className:"space-y-4",children:f.map(m=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-sky-blue text-sm font-medium rounded-full mb-2",children:m.category}),r.jsx("h3",{className:"font-semibold text-gray-900",children:m.question})]}),r.jsx("div",{className:"text-sm text-gray-500",children:m.timestamp.toLocaleDateString("ja-JP")})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"AI回答"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:m.answer})]}),m.rating&&r.jsxs("div",{className:"flex items-center space-x-1 mt-3",children:[[...Array(5)].map((p,g)=>r.jsx(hn,{className:`w-4 h-4 ${g<m.rating?"text-sunshine-yellow fill-current":"text-gray-300"}`},g)),r.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"評価済み"})]})]},m.id))})]}):c?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(jt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI回答"}),r.jsx("p",{className:"text-gray-600 mt-1",children:t==null?void 0:t.title})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"あなたの相談"}),r.jsx("p",{className:"text-gray-700 bg-gray-50 rounded-lg p-4",children:i})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[r.jsx(un,{className:"w-5 h-5 text-sunshine-yellow"}),r.jsx("span",{children:"AI回答"})]}),r.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:c})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[r.jsx("h4",{className:"font-medium text-success-green mb-2",children:"関連シミュレーション"}),r.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"この相談内容に関連する練習シナリオ"}),r.jsxs("button",{className:"text-success-green hover:text-emerald-green font-medium text-sm flex items-center space-x-1",children:[r.jsx("span",{children:"練習を開始"}),r.jsx(Nt,{className:"w-4 h-4"})]})]}),r.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[r.jsx("h4",{className:"font-medium text-sunshine-yellow mb-2",children:"関連事例"}),r.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"コミュニティの類似事例を確認"}),r.jsxs("button",{className:"text-sunshine-yellow hover:text-yellow-600 font-medium text-sm flex items-center space-x-1",children:[r.jsx("span",{children:"事例を見る"}),r.jsx(Nt,{className:"w-4 h-4"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"この回答は役に立ちましたか？"}),r.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(m=>r.jsx("button",{className:"w-8 h-8 text-gray-300 hover:text-sunshine-yellow transition-colors",children:r.jsx(hn,{className:"w-full h-full"})},m))})]}),r.jsx("button",{onClick:y,className:"px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:"新しい相談をする"})]})]})]}):t?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>e(null),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(jt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.title}),r.jsx("p",{className:"text-gray-600 mt-1",children:t.description})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:"詳細カテゴリ（任意）"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:t.subcategories.map(m=>r.jsx("button",{onClick:()=>n(m),className:`p-3 text-sm rounded-lg border transition-colors ${s===m?`${t.bgColor} ${t.color} border-current`:"border-gray-200 hover:bg-gray-50"}`,children:m},m))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-3",children:["相談内容 ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:i,onChange:m=>a(m.target.value),placeholder:"具体的な状況や悩みを詳しく教えてください。例：「アニメイベントでお客様に自然に声をかける方法を知りたいです」",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent resize-none",maxLength:1e3}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"具体的な状況を教えていただくと、より適切な回答ができます"}),r.jsxs("span",{className:"text-sm text-gray-400",children:[i.length,"/1000"]})]})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>e(null),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"戻る"}),r.jsx("button",{onClick:b,disabled:!i.trim()||l,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-sky-blue text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"AI回答生成中..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Xo,{className:"w-4 h-4"}),r.jsx("span",{children:"相談する"})]})})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"相談コーナー"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"口コミに関する悩みや疑問をAIに相談できます"})]}),r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(er,{className:"w-4 h-4"}),r.jsx("span",{children:"相談履歴"})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-sky-blue rounded-lg flex items-center justify-center",children:r.jsx(Jo,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"AIがあなたの相談にお答えします"}),r.jsx("p",{className:"text-gray-700 text-sm",children:"カテゴリを選択して具体的な相談内容を入力すると、AIが実践的なアドバイスや フレーズ例、関連する練習シナリオを提案します。"})]})]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"相談カテゴリを選択"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ry.map(m=>{const p=m.icon;return r.jsxs("button",{onClick:()=>x(m),className:`p-6 rounded-xl border-2 transition-all duration-200 text-left hover:shadow-lg group ${m.bgColor}`,children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${m.color.replace("text-","bg-").replace("blue","sky-blue").replace("green","success-green").replace("yellow","sunshine-yellow").replace("red","vivid-red")}`,children:r.jsx(p,{className:"w-6 h-6 text-white"})}),r.jsx(Nt,{className:`w-5 h-5 ${m.color} group-hover:translate-x-1 transition-transform`})]}),r.jsx("h3",{className:`text-lg font-semibold mb-2 ${m.color}`,children:m.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:m.description}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.subcategories.slice(0,3).map((g,N)=>r.jsx("span",{className:"px-2 py-1 bg-white bg-opacity-70 text-gray-600 text-xs rounded-md",children:g},N)),m.subcategories.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-white bg-opacity-70 text-gray-500 text-xs rounded-md",children:["+",m.subcategories.length-3,"個"]})]})]},m.id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"よくある相談例"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"「断られた後の対応方法」"}),r.jsx("p",{className:"text-sm text-gray-600",children:"お客様に断られた時の自然なフォローアップ方法"})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"「忙しそうなお客様への声かけ」"}),r.jsx("p",{className:"text-sm text-gray-600",children:"時間がなさそうなお客様への適切なアプローチ"})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"「シニア層への説明方法」"}),r.jsx("p",{className:"text-sm text-gray-600",children:"年配のお客様にも分かりやすい説明テクニック"})]}),r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"「自然な言い回しの提案」"}),r.jsx("p",{className:"text-sm text-gray-600",children:"押し付けがましくない自然な表現方法"})]})]})]})]})}function $y({onSubmit:t,onCancel:e,events:s}){const[n,i]=_.useState({title:"",eventId:"",situation:"",innovation:"",result:"",learning:"",tags:[],visibility:"public"}),[a,l]=_.useState(""),[o,c]=_.useState(!1),[d,u]=_.useState({}),[h,f]=_.useState([]),[v,x]=_.useState(!1),b=(j,M)=>{i(U=>({...U,[j]:M})),d[j]&&u(U=>({...U,[j]:""})),(j==="title"||j==="situation"||j==="innovation")&&setTimeout(()=>{const U=[];(M.includes("アニメ")||M.includes("イベント"))&&U.push("#アニメファン","#イベント対応"),(M.includes("断り")||M.includes("拒否"))&&U.push("#断り対応","#感情コントロール"),(M.includes("シニア")||M.includes("年配"))&&U.push("#シニア層","#丁寧対応"),f(U)},500)},S=j=>{!n.tags.includes(j)&&n.tags.length<8&&i(M=>({...M,tags:[...M.tags,j]})),l(""),c(!1)},y=j=>{i(M=>({...M,tags:M.tags.filter(U=>U!==j)}))},m=()=>{const j={};return n.title.trim()||(j.title="タイトルは必須です"),n.eventId||(j.eventId="イベントの選択は必須です"),n.situation.trim()||(j.situation="状況の説明は必須です"),n.innovation.trim()||(j.innovation="工夫したことは必須です"),n.result.trim()||(j.result="結果の説明は必須です"),n.learning.trim()||(j.learning="学び・気づきは必須です"),n.tags.length===0&&(j.tags="最低1つのタグを選択してください"),n.visibility==="department"&&!n.targetDepartment&&(j.targetDepartment="部署を選択してください"),n.visibility==="theme"&&!n.targetTheme&&(j.targetTheme="テーマを選択してください"),u(j),Object.keys(j).length===0},p=j=>{j.preventDefault(),m()&&t(n)},g=s.find(j=>j.id===n.eventId),N=j=>{switch(j){case"active":return"text-success-green";case"completed":return"text-gray-600";case"upcoming":return"text-sky-blue";default:return"text-gray-600"}},k=j=>{switch(j){case"active":return"開催中";case"completed":return"終了";case"upcoming":return"開催予定";default:return"不明"}},C=ec.filter(j=>j.toLowerCase().includes(a.toLowerCase())&&!n.tags.includes(j));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(jt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"イベント事例を投稿"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"イベントでの成功体験を仲間と共有しましょう"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(De,{className:"w-5 h-5 text-sky-blue mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-sky-blue mb-1",children:"イベント事例として投稿"}),r.jsx("p",{className:"text-sm text-blue-700",children:"この投稿は選択したイベントページにも自動で反映され、 他の店舗スタッフがイベント準備時に参考にできます。"})]})]})}),r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["対象イベント ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("select",{value:n.eventId,onChange:j=>b("eventId",j.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.eventId?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"イベントを選択してください"}),s.map(j=>r.jsxs("option",{value:j.id,children:[j.name," (",k(j.status),")"]},j.id))]}),g&&r.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"選択中:"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:g.name}),r.jsxs("span",{className:`text-sm ${N(g.status)}`,children:["(",k(g.status),")"]})]}),d.eventId&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.eventId})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["タイトル ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("input",{type:"text",value:n.title,onChange:j=>b("title",j.target.value),placeholder:"例：呪術廻戦フェアでのアニメファン接客成功事例",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.title?"border-red-300":"border-gray-300"}`,maxLength:100}),d.title&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.title})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["状況（顧客属性・場面） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:n.situation,onChange:j=>b("situation",j.target.value),placeholder:"例：20代男性、呪術廻戦フェアでフィギュア購入、イベント初日来店",rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.situation?"border-red-300":"border-gray-300"}`,maxLength:500}),d.situation&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.situation})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["工夫したこと（接客上の工夫・意識点） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:n.innovation,onChange:j=>b("innovation",j.target.value),placeholder:"例：お客様の好きなキャラクターについて会話を始め、そのキャラクターグッズでポイントが貯まることを具体例で説明",rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.innovation?"border-red-300":"border-gray-300"}`,maxLength:1e3}),d.innovation&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.innovation})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["結果（顧客反応・成果） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:n.result,onChange:j=>b("result",j.target.value),placeholder:"例：お客様が興味を示し、「次回のイベントでも使えますね」と前向きな反応。その場でカード申込み",rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.result?"border-red-300":"border-gray-300"}`,maxLength:500}),d.result&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.result})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["学び・気づき（得られた教訓） ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("textarea",{value:n.learning,onChange:j=>b("learning",j.target.value),placeholder:"例：お客様の趣味に寄り添った具体例を示すことで、カードの価値を実感してもらえる",rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.learning?"border-red-300":"border-gray-300"}`,maxLength:500}),d.learning&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.learning})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-4",children:["タグ ",r.jsx("span",{className:"text-vivid-red",children:"*"}),r.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"（最大8個まで）"})]}),h.length>0&&r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(sa,{className:"w-4 h-4 text-sky-blue"}),r.jsx("span",{className:"text-sm font-medium text-sky-blue",children:"AI提案タグ"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(j=>r.jsxs("button",{type:"button",onClick:()=>S(j),className:"px-3 py-1 bg-sky-blue text-white text-sm rounded-full hover:bg-blue-600 transition-colors",children:["+ ",j]},j))})]}),n.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map(j=>r.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-sky-blue text-white text-sm rounded-full",children:[r.jsx("span",{children:j}),r.jsx("button",{type:"button",onClick:()=>y(j),className:"text-white hover:text-gray-200",children:"×"})]},j))}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:a,onChange:j=>l(j.target.value),onFocus:()=>c(!0),placeholder:"タグを入力または選択...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",onKeyPress:j=>{j.key==="Enter"&&(j.preventDefault(),a.trim()&&!a.startsWith("#")?S("#"+a.trim()):a.trim()&&S(a.trim()))}}),o&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:C.length>0?C.map(j=>r.jsx("button",{type:"button",onClick:()=>S(j),className:"w-full text-left px-4 py-2 hover:bg-gray-50 text-sm",children:j},j)):r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"候補がありません"})})]}),d.tags&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(fe,{className:"w-4 h-4"}),r.jsx("span",{children:d.tags})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-4",children:["公開範囲 ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"visibility",value:"public",checked:n.visibility==="public",onChange:j=>b("visibility",j.target.value),className:"text-sky-blue focus:ring-sky-blue"}),r.jsx(cr,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"全社オープン"}),r.jsx("div",{className:"text-sm text-gray-600",children:"すべての社員が閲覧可能"})]})]}),r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"visibility",value:"department",checked:n.visibility==="department",onChange:j=>b("visibility",j.target.value),className:"text-sky-blue focus:ring-sky-blue"}),r.jsx(ea,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"部署限定"}),r.jsx("div",{className:"text-sm text-gray-600",children:"指定した部署のメンバーのみ"})]})]}),r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"visibility",value:"theme",checked:n.visibility==="theme",onChange:j=>b("visibility",j.target.value),className:"text-sky-blue focus:ring-sky-blue"}),r.jsx(ue,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:"テーマ別コミュニティ"}),r.jsx("div",{className:"text-sm text-gray-600",children:"特定のテーマに興味のあるメンバー"})]})]})]}),n.visibility==="department"&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("select",{value:n.targetDepartment||"",onChange:j=>b("targetDepartment",j.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.targetDepartment?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"部署を選択してください"}),Em.map(j=>r.jsx("option",{value:j,children:j},j))]}),d.targetDepartment&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.targetDepartment})]}),n.visibility==="theme"&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("select",{value:n.targetTheme||"",onChange:j=>b("targetTheme",j.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent ${d.targetTheme?"border-red-300":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"テーマを選択してください"}),Pm.map(j=>r.jsx("option",{value:j,children:j},j))]}),d.targetTheme&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.targetTheme})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:r.jsxs("label",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",checked:v,onChange:j=>x(j.target.checked),className:"mt-1 text-sky-blue focus:ring-sky-blue"}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"プライバシーポリシーに同意します"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"投稿内容にお客様の個人情報（名前、連絡先等）が含まれていないことを確認しました。 投稿はAI学習データとして活用される場合があります。"})]})]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"キャンセル"}),r.jsx("button",{type:"submit",disabled:!v,className:"flex-1 px-6 py-3 bg-vivid-red text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"投稿する"})]})]})]})}const Er=[{id:"1",name:"呪術廻戦フェア",description:"人気アニメ「呪術廻戦」とのコラボレーションイベント。限定グッズ販売とカード口コミ強化キャンペーン",startDate:new Date("2024-01-15"),endDate:new Date("2024-02-15"),status:"active",tags:["#呪術廻戦","#アニメコラボ","#限定グッズ","#カード口コミ"],totalPosts:12,totalViews:456,totalReactions:89,stores:["渋谷店","新宿店","池袋店","有楽町店"],bestPractices:ps.slice(0,2),successPatterns:["キャラクター愛を共感ポイントにした自然な声かけ","イベント限定特典を活用したカード提案","ファン心理を理解した丁寧な接客"],keyPhrases:["「このキャラクター、人気ですよね！」","「イベント期間中だけの特典があるんです」","「次回のコラボでもお得に使えます」"],aiSummary:"アニメファンの心理を理解し、共感を示すことで自然なカード口コミにつなげる成功パターンが多数報告されています。特に限定感を演出する声かけが効果的です。",essentialKnowledge:{overview:"「呪術廻戦」は呪霊と呪術師の戦いを描く人気アニメ作品。現代日本を舞台に、高校生の主人公が呪術師として成長していく物語。",mainCharacters:["虎杖悠仁：明るく正義感の強い主人公","五条悟：最強の呪術師で人気No.1キャラクター","伏黒恵：クールで冷静な同級生"],fanBase:["学生・若年層（10代〜20代）が中心","SNSで拡散力が強い","女性ファンが多数を占める","キャラクターグッズへの購買意欲が高い"],precautions:["人気グッズは即完売するため、限定感を強調","ファン心理を尊重し、作品への理解を示す","初手でカード勧誘せず、会話から自然に導入","キャラクター名や設定を間違えないよう注意"],servicePoints:["キャラ愛に共感してから会話に入る","限定特典をカード提案のきっかけに","熱量を尊重し、過度に営業的にならない","「次回のコラボでもお得」というメリットを提示"],officialSiteUrl:"https://jujutsukaisen.jp/"}},{id:"2",name:"MGAフェス2024",description:"マルイグループ年次イベント。全店舗参加の大型キャンペーン",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-29"),status:"completed",tags:["#MGAフェス","#全店舗","#年次イベント","#キャンペーン"],totalPosts:28,totalViews:1234,totalReactions:267,stores:["全店舗"],bestPractices:ps.slice(1,3),successPatterns:["イベント特典を活用した積極的な声かけ","お客様の購買意欲が高い時期を狙った提案","チーム一丸となった接客体制"],keyPhrases:["「フェス期間中の特別特典です」","「今だけのお得なキャンペーンがあります」","「年に一度の大チャンスです」"],aiSummary:"全店舗参加の大型イベントでは、統一された声かけパターンと特典活用が成功の鍵となっています。お客様の購買意欲が高まる時期を活用した積極的なアプローチが効果的です。"},{id:"3",name:"バレンタインフェア",description:"バレンタインシーズンの特別企画。ギフト需要を狙ったカード口コミ強化",startDate:new Date("2024-02-01"),endDate:new Date("2024-02-14"),status:"active",tags:["#バレンタイン","#ギフト","#季節イベント","#カップル"],totalPosts:8,totalViews:234,totalReactions:45,stores:["渋谷店","新宿店","池袋店"],bestPractices:[],successPatterns:["ギフト需要を意識したペア提案","特別感を演出するカード特典の紹介","カップルや家族連れへの温かい接客"],keyPhrases:["「プレゼントにぴったりの特典があります」","「カードがあれば次回もお得にご利用いただけます」","「バレンタイン限定のポイント還元キャンペーン中です」"],aiSummary:"ギフト需要が高まるバレンタインシーズンは、カップルやファミリー層へのアプローチが効果的です。特別感を演出する声かけとペア提案が成功のポイントです。"},{id:"4",name:"チェンソーマンコラボ",description:"大人気アニメ「チェンソーマン」とのコラボイベント。限定グッズと特典満載",startDate:new Date("2024-01-20"),endDate:new Date("2024-03-31"),status:"active",tags:["#チェンソーマン","#アニメコラボ","#限定グッズ","#若年層"],totalPosts:15,totalViews:567,totalReactions:102,stores:["アニメイト渋谷店","アニメイト新宿店","アニメイト池袋店"],bestPractices:ps.slice(0,1),successPatterns:["ファン心理を理解した共感的アプローチ","コラボ限定特典を活用した提案","作品への愛を尊重した丁寧な接客"],keyPhrases:["「チェンソーマンファンですか？限定特典があるんです」","「次のコラボイベントでもお得に使えますよ」","「カード会員様だけの先行販売もあります」"],aiSummary:"アニメファンへのアプローチでは、作品への理解と共感が鍵となります。限定感と特別感を演出することで自然なカード提案につながっています。"},{id:"5",name:"スプリングセール2024",description:"春の大型セールイベント。新生活応援キャンペーン",startDate:new Date("2024-03-01"),endDate:new Date("2024-03-31"),status:"active",tags:["#スプリングセール","#新生活","#大型セール","#全店舗"],totalPosts:22,totalViews:892,totalReactions:156,stores:["全店舗"],bestPractices:ps.slice(1,3),successPatterns:["新生活需要を捉えた積極的な提案","セール特典とカード特典の組み合わせ訴求","購買意欲の高いお客様への効果的なアプローチ"],keyPhrases:["「新生活の準備にカードがあると便利ですよ」","「セール価格からさらにポイント還元があります」","「今後のお買い物でずっとお得になります」"],aiSummary:"新生活シーズンは購買意欲が高まる時期です。セール特典とカード特典を組み合わせた提案が効果的で、長期的なメリットを伝えることが成功のポイントです。"},{id:"6",name:"推しの子コラボフェア",description:"話題沸騰中「推しの子」とのコラボレーションイベント",startDate:new Date("2024-02-15"),endDate:new Date("2024-04-15"),status:"active",tags:["#推しの子","#アニメコラボ","#若年層","#SNS映え"],totalPosts:18,totalViews:678,totalReactions:134,stores:["アニメイト渋谷店","アニメイト新宿店","アニメイト池袋店","アニメイト秋葉原店"],bestPractices:[],successPatterns:["SNS世代を意識したデジタル特典の訴求","キャラクター人気を活用した声かけ","写真撮影スポットでの自然な接客"],keyPhrases:["「推しの子ファンの方に大人気の特典です」","「カード限定のデジタル特典もありますよ」","「SNSでシェアすると特典があります」"],aiSummary:"SNS世代が多い若年層イベントでは、デジタル特典や限定感が重要です。写真撮影などの体験と組み合わせた自然なアプローチが効果的です。"},{id:"7",name:"ファミリーフェスタ",description:"家族連れ向けの大型イベント。親子で楽しめる企画満載",startDate:new Date("2024-03-10"),endDate:new Date("2024-03-24"),status:"active",tags:["#ファミリー","#親子","#キッズ","#体験型"],totalPosts:10,totalViews:345,totalReactions:67,stores:["マルイ渋谷店","マルイ新宿店","マルイ有楽町店"],bestPractices:[],successPatterns:["家族全体のメリットを訴求する提案","子育て世代向けの特典説明","安心感を与える丁寧な説明"],keyPhrases:["「お子様向けの特典もご用意しています」","「家族カードもお得に作れます」","「次回のご来店時にもポイントが使えます」"],aiSummary:"ファミリー層には、家族全体のメリットと安心感の訴求が重要です。子育て世代向けの特典を丁寧に説明することで信頼を得られます。"},{id:"8",name:"鬼滅の刃フェア2023",description:"社会現象となったアニメ「鬼滅の刃」とのコラボイベント",startDate:new Date("2023-10-01"),endDate:new Date("2023-11-30"),status:"completed",tags:["#鬼滅の刃","#アニメコラボ","#限定グッズ"],totalPosts:45,totalViews:2100,totalReactions:410,stores:["札幌店","仙台店","東京店","名古屋店","大阪店","福岡店"],bestPractices:[],successPatterns:["キャラクター人気を活用した声かけ","限定感の演出","ファン心理の理解"],keyPhrases:["「推しキャラのグッズ残りわずかです」","「次回入荷は未定です」"],aiSummary:"鬼滅の刃ブームを活用した成功事例が多数。限定感の訴求が効果的でした。"},{id:"9",name:"原神×大阪コラボフェスタ2023",description:"世界的人気ゲーム「原神」とのコラボレーションイベント",startDate:new Date("2023-07-01"),endDate:new Date("2023-08-31"),status:"completed",tags:["#原神","#ゲームコラボ","#大阪限定","#限定グッズ"],totalPosts:32,totalViews:890,totalReactions:145,stores:["大阪梅田店","大阪難波店","大阪天王寺店"],bestPractices:[],successPatterns:["ゲームファンへの共感アプローチ","キャラクターグッズの限定感演出"],keyPhrases:["「推しキャラのグッズ入荷しました」","「原神ファンの方に大人気です」"],aiSummary:"ゲームファン層への理解を示した提案が効果的でした。"},{id:"10",name:"ホロライブVtuberハロウィンフェスタ2023",description:"人気Vtuberグループ「ホロライブ」とのハロウィンコラボ",startDate:new Date("2023-10-01"),endDate:new Date("2023-10-31"),status:"completed",tags:["#ホロライブ","#Vtuber","#ハロウィン","#限定グッズ"],totalPosts:28,totalViews:756,totalReactions:132,stores:["全店舗"],bestPractices:[],successPatterns:["Vtuberファンへの丁寧な対応","コラボ限定特典の訴求"],keyPhrases:["「推しの限定グッズありますよ」","「ハロウィン限定デザインです」"],aiSummary:"Vtuberファン層への理解を示した接客が成功のポイント。"},{id:"11",name:"初音ミク×雪ミクフェア2023",description:"北海道限定「雪ミク」とのコラボレーションイベント",startDate:new Date("2023-12-01"),endDate:new Date("2024-02-28"),status:"completed",tags:["#初音ミク","#雪ミク","#Vocaloid","#北海道限定"],totalPosts:19,totalViews:521,totalReactions:98,stores:["札幌店","札幌ステラプレイス店"],bestPractices:[],successPatterns:["地域限定キャラクターの活用","ボカロファンへの共感"],keyPhrases:["「雪ミク限定グッズです」","「北海道でしか買えません」"],aiSummary:"地域限定キャラクターの特別感を活かした提案が成功しています。"},{id:"12",name:"にじさんじ×名古屋コラボフェア2023",description:"大人気Vtuberグループ「にじさんじ」とのコラボイベント",startDate:new Date("2023-09-01"),endDate:new Date("2023-09-30"),status:"completed",tags:["#にじさんじ","#Vtuber","#名古屋限定","#限定グッズ"],totalPosts:24,totalViews:612,totalReactions:118,stores:["名古屋店","名古屋栄店"],bestPractices:[],successPatterns:["Vtuberファンコミュニティへの理解","限定感の演出"],keyPhrases:["「推しライバーのグッズあります」","「名古屋限定デザインです」"],aiSummary:"Vtuberファンの熱量を理解した提案が効果的でした。"},{id:"13",name:"東京リベンジャーズ×春フェア2022",description:"人気アニメ「東京卍リベンジャーズ」とのコラボイベント",startDate:new Date("2022-03-01"),endDate:new Date("2022-04-30"),status:"completed",tags:["#東京リベンジャーズ","#アニメコラボ","#春","#限定グッズ"],totalPosts:38,totalViews:1245,totalReactions:256,stores:["渋谷店","新宿店","池袋店","有楽町店"],bestPractices:[],successPatterns:["アニメファンへの共感的アプローチ","キャラクター人気の活用"],keyPhrases:["「マイキーのグッズ入荷しました」","「限定デザインです」"],aiSummary:"若年層に人気のアニメを活用した提案が成功しています。"},{id:"14",name:"モンスターハンター×福岡コラボ2022",description:"大人気ゲーム「モンスターハンター」とのコラボイベント",startDate:new Date("2022-05-01"),endDate:new Date("2022-05-31"),status:"completed",tags:["#モンハン","#ゲームコラボ","#福岡限定","#限定グッズ"],totalPosts:22,totalViews:689,totalReactions:134,stores:["福岡天神店","福岡博多店"],bestPractices:[],successPatterns:["ゲームファンへの理解を示す","ハンターへの共感"],keyPhrases:["「モンハン好きの方に人気です」","「限定武器グッズあります」"],aiSummary:"ゲームファン層への理解を示した接客が効果的でした。"},{id:"15",name:"ラブライブ!サンシャイン!!×神奈川2022",description:"人気アニメ「ラブライブ!サンシャイン!!」とのコラボ",startDate:new Date("2022-07-15"),endDate:new Date("2022-08-31"),status:"completed",tags:["#ラブライブ","#アニメコラボ","#神奈川","#夏"],totalPosts:27,totalViews:743,totalReactions:156,stores:["横浜店","川崎店"],bestPractices:[],successPatterns:["アニメ聖地巡礼客への対応","キャラクター愛の尊重"],keyPhrases:["「推しメンのグッズあります」","「限定缶バッジ入荷しました」"],aiSummary:"アニメファンの聖地巡礼需要を捉えた提案が成功。"},{id:"16",name:"ポケモン×千葉オータムフェア2022",description:"大人気キャラクター「ポケモン」とのコラボイベント",startDate:new Date("2022-10-01"),endDate:new Date("2022-11-30"),status:"completed",tags:["#ポケモン","#キャラクターコラボ","#千葉","#秋"],totalPosts:18,totalViews:456,totalReactions:89,stores:["千葉店","船橋店"],bestPractices:[],successPatterns:["幅広い年齢層へのアプローチ","ファミリー層への提案"],keyPhrases:["「ピカチュウグッズ大人気です」","「お子様にも喜ばれます」"],aiSummary:"全年齢層に人気のキャラクターを活用した提案が効果的でした。"},{id:"17",name:"SPY×FAMILYコラボ2022",description:"大人気アニメ「SPY×FAMILY」とのコラボイベント",startDate:new Date("2022-06-01"),endDate:new Date("2022-07-31"),status:"completed",tags:["#SPY×FAMILY","#アニメコラボ","#限定グッズ"],totalPosts:52,totalViews:2340,totalReactions:489,stores:["全店舗"],bestPractices:[],successPatterns:["家族層への訴求","キャラクターグッズの限定感演出"],keyPhrases:["「アーニャのグッズ大人気です」"],aiSummary:"家族で楽しめるアニメという特性を活かした提案が成功。"},{id:"18",name:"ウマ娘×埼玉スプリングフェア2024",description:"大人気ゲーム「ウマ娘」とのコラボイベント",startDate:new Date("2024-04-01"),endDate:new Date("2024-04-30"),status:"upcoming",tags:["#ウマ娘","#ゲームコラボ","#埼玉","#春"],totalPosts:0,totalViews:0,totalReactions:0,stores:["大宮店","川越店","浦和店"],bestPractices:[],successPatterns:[],keyPhrases:[],aiSummary:""},{id:"19",name:"Fate×京都桜フェスティバル2024",description:"アニメ・ゲーム「Fate」シリーズとのコラボ",startDate:new Date("2024-03-20"),endDate:new Date("2024-04-10"),status:"upcoming",tags:["#Fate","#アニメコラボ","#京都","#春"],totalPosts:0,totalViews:0,totalReactions:0,stores:["京都店","京都河原町店"],bestPractices:[],successPatterns:[],keyPhrases:[],aiSummary:""},{id:"20",name:"ガンダム×広島サマーフェア2023",description:"人気アニメ「機動戦士ガンダム」とのコラボイベント",startDate:new Date("2023-08-01"),endDate:new Date("2023-08-15"),status:"completed",tags:["#ガンダム","#アニメコラボ","#広島","#夏"],totalPosts:16,totalViews:432,totalReactions:87,stores:["広島店","広島八丁堀店"],bestPractices:[],successPatterns:["幅広い世代のガンダムファンへの対応"],keyPhrases:["「ガンプラ好きの方に人気です」","「限定デザインです」"],aiSummary:"幅広い世代に人気のアニメを活用した提案が成功しました。"},{id:"21",name:"ブルーアーカイブ×仙台コラボ2023",description:"人気スマホゲーム「ブルーアーカイブ」とのコラボイベント",startDate:new Date("2023-08-06"),endDate:new Date("2023-08-08"),status:"completed",tags:["#ブルアカ","#ゲームコラボ","#仙台","#夏"],totalPosts:21,totalViews:578,totalReactions:112,stores:["仙台店","仙台泉店"],bestPractices:[],successPatterns:["スマホゲームファンへの理解","推しキャラへの共感"],keyPhrases:["「先生、限定グッズあります」","「推し生徒のグッズ入荷しました」"],aiSummary:"ゲームコミュニティへの理解を示した提案が好評でした。"},{id:"22",name:"ワンピース×沖縄サマーフェア2023",description:"大人気アニメ「ONE PIECE」とのコラボイベント",startDate:new Date("2023-06-01"),endDate:new Date("2023-08-31"),status:"completed",tags:["#ワンピース","#アニメコラボ","#沖縄","#夏"],totalPosts:25,totalViews:692,totalReactions:141,stores:["那覇店"],bestPractices:[],successPatterns:["幅広い世代への対応","キャラクター人気の活用"],keyPhrases:["「麦わらの一味グッズあります」","「限定デザインです」"],aiSummary:"国民的アニメを活用した提案が成功しています。"},{id:"23",name:"アイドルマスター×神戸フェア2022",description:"人気ゲーム「アイドルマスター」シリーズとのコラボ",startDate:new Date("2022-10-15"),endDate:new Date("2022-10-31"),status:"completed",tags:["#アイマス","#ゲームコラボ","#神戸","#秋"],totalPosts:29,totalViews:812,totalReactions:167,stores:["神戸店","神戸三宮店"],bestPractices:[],successPatterns:["プロデューサーへの共感","推しアイドルへの理解"],keyPhrases:["「担当アイドルのグッズありますよ」","「限定デザインです」"],aiSummary:"アイドルゲームファンへの理解を示した提案が成功しています。"},{id:"24",name:"艦これ×横浜コラボフェス2023",description:"人気ゲーム「艦隊これくしょん」とのコラボイベント",startDate:new Date("2023-02-01"),endDate:new Date("2023-02-28"),status:"completed",tags:["#艦これ","#ゲームコラボ","#横浜","#冬"],totalPosts:33,totalViews:945,totalReactions:189,stores:["横浜店"],bestPractices:[],successPatterns:["提督への丁寧な対応","艦娘人気の活用"],keyPhrases:["「提督、嫁艦のグッズあります」","「限定グッズです」"],aiSummary:"ゲームファンへの理解を示した接客が効果的でした。"},{id:"25",name:"ちいかわ×静岡コラボ2023",description:"大人気キャラクター「ちいかわ」とのコラボイベント",startDate:new Date("2023-07-01"),endDate:new Date("2023-08-31"),status:"completed",tags:["#ちいかわ","#キャラクターコラボ","#静岡","#夏"],totalPosts:17,totalViews:467,totalReactions:91,stores:["静岡店"],bestPractices:[],successPatterns:["癒し系キャラの人気活用","幅広い層へのアプローチ"],keyPhrases:["「ちいかわグッズ入荷しました」","「限定デザインです」"],aiSummary:"癒し系キャラクターの人気を活用した提案が成功。"},{id:"26",name:"プロジェクトセカイ×長野ウィンターフェア2023",description:"人気リズムゲーム「プロジェクトセカイ」とのコラボ",startDate:new Date("2023-12-01"),endDate:new Date("2024-03-31"),status:"completed",tags:["#プロセカ","#ゲームコラボ","#長野","#冬"],totalPosts:22,totalViews:634,totalReactions:128,stores:["長野店"],bestPractices:[],successPatterns:["若年層への理解","キャラクター人気の活用"],keyPhrases:["「推しキャラのグッズあります」","「プロセカファンに人気です」"],aiSummary:"音楽ゲームファンへの提案が成功しています。"},{id:"27",name:"崩壊スターレイル×金沢コラボ2022",description:"人気RPGゲーム「崩壊:スターレイル」とのコラボイベント",startDate:new Date("2022-11-01"),endDate:new Date("2022-11-30"),status:"completed",tags:["#スターレイル","#ゲームコラボ","#金沢","#秋"],totalPosts:14,totalViews:389,totalReactions:76,stores:["金沢店"],bestPractices:[],successPatterns:["中国発ゲームファンへの対応","キャラクター人気の活用"],keyPhrases:["「推しキャラのグッズあります」","「限定デザインです」"],aiSummary:"グローバルゲームファンへの提案が成功。"},{id:"28",name:"あんさんぶるスターズ×新潟フェア2023",description:"人気アイドルゲーム「あんさんぶるスターズ!」とのコラボ",startDate:new Date("2023-10-01"),endDate:new Date("2023-11-30"),status:"completed",tags:["#あんスタ","#ゲームコラボ","#新潟","#秋"],totalPosts:19,totalViews:512,totalReactions:103,stores:["新潟店"],bestPractices:[],successPatterns:["アイドルゲームファンへの理解","推しユニットへの共感"],keyPhrases:["「推しユニットのグッズあります」","「担当のグッズ入荷しました」"],aiSummary:"女性向けアイドルゲームファンへの提案が効果的でした。"},{id:"29",name:"すとぷり×岡山コラボフェスティバル2023",description:"人気歌い手グループ「すとぷり」とのコラボイベント",startDate:new Date("2023-08-01"),endDate:new Date("2023-08-31"),status:"completed",tags:["#すとぷり","#音楽","#岡山","#夏"],totalPosts:16,totalViews:445,totalReactions:88,stores:["岡山店"],bestPractices:[],successPatterns:["歌い手ファンへの理解","若年層への対応"],keyPhrases:["「すとぷりグッズ入荷しました」","「推しカラーのグッズあります」"],aiSummary:"音楽グループファンへの提案が好評でした。"},{id:"30",name:"ツイステッドワンダーランド×熊本2022",description:"人気ゲーム「ツイステッドワンダーランド」とのコラボ",startDate:new Date("2022-09-01"),endDate:new Date("2022-09-30"),status:"completed",tags:["#ツイステ","#ゲームコラボ","#熊本","#秋"],totalPosts:31,totalViews:867,totalReactions:178,stores:["熊本店"],bestPractices:[],successPatterns:["女性向けゲームファンへの対応","寮別グッズの提案"],keyPhrases:["「推し寮のグッズあります」","「限定デザインです」"],aiSummary:"ディズニー系ゲームファンへの提案が成功。"},{id:"31",name:"バーチャルYouTuber×群馬ウィンターフェア2023",description:"人気VTuber事務所とのコラボレーションイベント",startDate:new Date("2023-11-01"),endDate:new Date("2024-01-31"),status:"completed",tags:["#VTuber","#配信者","#群馬","#冬"],totalPosts:13,totalViews:376,totalReactions:74,stores:["高崎店"],bestPractices:[],successPatterns:["VTuberファンへの理解","配信文化への共感"],keyPhrases:["「推しの限定グッズあります」","「配信で紹介されたグッズです」"],aiSummary:"VTuber文化への理解を示した提案が成功しています。"},{id:"32",name:"スプラトゥーン3×栃木フェア2024",description:"人気ゲーム「スプラトゥーン3」とのコラボイベント",startDate:new Date("2024-01-01"),endDate:new Date("2024-02-29"),status:"active",tags:["#スプラトゥーン","#任天堂","#栃木","#冬春"],totalPosts:11,totalViews:298,totalReactions:59,stores:["宇都宮店"],bestPractices:[],successPatterns:["任天堂ファンへの対応","ファミリー層への提案"],keyPhrases:["「イカグッズ入荷しました」","「お子様に大人気です」"],aiSummary:"任天堂ゲームファンへの提案が効果的。"},{id:"33",name:"アークナイツ×茨城ウィンターフェア2023",description:"人気タワーディフェンスゲーム「アークナイツ」とのコラボ",startDate:new Date("2023-12-01"),endDate:new Date("2023-12-31"),status:"completed",tags:["#アークナイツ","#ゲームコラボ","#茨城","#年末"],totalPosts:26,totalViews:723,totalReactions:149,stores:["つくば店"],bestPractices:[],successPatterns:["戦略ゲームファンへの対応","オペレーター人気の活用"],keyPhrases:["「推しオペレーターのグッズあります」","「限定デザインです」"],aiSummary:"タワーディフェンスゲームファンへの提案が成功しています。"},{id:"34",name:"エヴァンゲリオン×山梨コラボ2023",description:"人気アニメ「新世紀エヴァンゲリオン」とのコラボイベント",startDate:new Date("2023-07-15"),endDate:new Date("2023-08-31"),status:"completed",tags:["#エヴァンゲリオン","#アニメコラボ","#山梨","#夏"],totalPosts:20,totalViews:567,totalReactions:115,stores:["甲府店"],bestPractices:[],successPatterns:["幅広い世代のファンへの対応","レトロアニメファンへの共感"],keyPhrases:["「エヴァグッズ入荷しました」","「初号機カラーの限定デザインです」"],aiSummary:"世代を超えて愛されるアニメの活用が効果的でした。"},{id:"35",name:"ラブライブ!スーパースター!!×愛媛2023",description:"人気アイドルアニメ「ラブライブ!スーパースター!!」とのコラボ",startDate:new Date("2023-11-01"),endDate:new Date("2023-12-31"),status:"completed",tags:["#ラブライブ","#アニメコラボ","#愛媛","#冬"],totalPosts:15,totalViews:423,totalReactions:85,stores:["松山店"],bestPractices:[],successPatterns:["アイドルアニメファンへの理解","推しメンへの共感"],keyPhrases:["「推しメンのグッズあります」","「限定缶バッジ入荷しました」"],aiSummary:"アイドルアニメファンへの提案が成功。"},{id:"36",name:"バンドリ!×香川コラボフェア2022",description:"人気音楽ゲーム「BanG Dream!」とのコラボイベント",startDate:new Date("2022-10-01"),endDate:new Date("2022-10-31"),status:"completed",tags:["#バンドリ","#ゲームコラボ","#香川","#秋"],totalPosts:18,totalViews:498,totalReactions:97,stores:["高松店"],bestPractices:[],successPatterns:["音楽ゲームファンへの理解","バンド別グッズの提案"],keyPhrases:["「推しバンドのグッズあります」","「ライブ会場限定デザインです」"],aiSummary:"音楽ゲームファンへの提案が好評でした。"},{id:"37",name:"うたの☆プリンスさまっ♪×徳島2023",description:"人気女性向けゲーム「うたプリ」とのコラボイベント",startDate:new Date("2023-08-12"),endDate:new Date("2023-08-15"),status:"completed",tags:["#うたプリ","#ゲームコラボ","#徳島","#夏"],totalPosts:17,totalViews:487,totalReactions:94,stores:["徳島店"],bestPractices:[],successPatterns:["女性向けゲームファンへの対応","アイドル別グッズの提案"],keyPhrases:["「推しアイドルのグッズあります」","「限定デザインです」"],aiSummary:"女性向けアイドルゲームファンへの提案が成功。"},{id:"38",name:"FGO×高知サマーフェア2023",description:"人気ゲーム「Fate/Grand Order」とのコラボイベント",startDate:new Date("2023-08-09"),endDate:new Date("2023-08-12"),status:"completed",tags:["#FGO","#ゲームコラボ","#高知","#夏"],totalPosts:16,totalViews:454,totalReactions:89,stores:["高知店"],bestPractices:[],successPatterns:["マスターへの丁寧な対応","サーヴァント人気の活用"],keyPhrases:["「推しサーヴァントのグッズあります」","「マスターに人気です」"],aiSummary:"RPGゲームファンへの提案が効果的でした。"},{id:"39",name:"ヒプノシスマイク×佐賀コラボ2023",description:"人気音楽プロジェクト「ヒプノシスマイク」とのコラボ",startDate:new Date("2023-11-01"),endDate:new Date("2023-11-05"),status:"completed",tags:["#ヒプマイ","#音楽コンテンツ","#佐賀","#秋"],totalPosts:14,totalViews:398,totalReactions:78,stores:["佐賀店"],bestPractices:[],successPatterns:["女性向けコンテンツファンへの理解","ディビジョン別の提案"],keyPhrases:["「推しディビジョンのグッズあります」","「限定デザインです」"],aiSummary:"音楽プロジェクトファンへの提案が成功しました。"},{id:"40",name:"刀剣乱舞×長崎ウィンターフェア2023",description:"人気ゲーム「刀剣乱舞」とのコラボイベント",startDate:new Date("2023-01-22"),endDate:new Date("2023-02-05"),status:"completed",tags:["#刀剣乱舞","#ゲームコラボ","#長崎","#冬"],totalPosts:23,totalViews:645,totalReactions:132,stores:["長崎店"],bestPractices:[],successPatterns:["女性向けゲームファンへの対応","推し刀剣への理解"],keyPhrases:["「推し刀のグッズあります」","「審神者に人気です」"],aiSummary:"歴史系ゲームファンへの提案が成功。"},{id:"41",name:"グランブルーファンタジー×大分2023",description:"人気RPGゲーム「グランブルーファンタジー」とのコラボ",startDate:new Date("2023-10-01"),endDate:new Date("2023-12-31"),status:"completed",tags:["#グラブル","#ゲームコラボ","#大分","#秋冬"],totalPosts:19,totalViews:534,totalReactions:107,stores:["大分店"],bestPractices:[],successPatterns:["RPGゲームファンへの理解","キャラクター人気の活用"],keyPhrases:["「推しキャラのグッズあります」","「騎空士に人気です」"],aiSummary:"ソーシャルゲームファンへの提案が効果的でした。"},{id:"42",name:"とあるシリーズ×宮崎サマーフェア2023",description:"人気ライトノベル「とある」シリーズとのコラボ",startDate:new Date("2023-06-01"),endDate:new Date("2023-08-31"),status:"completed",tags:["#とあるシリーズ","#ライトノベル","#宮崎","#夏"],totalPosts:17,totalViews:478,totalReactions:95,stores:["宮崎店"],bestPractices:[],successPatterns:["ラノベファンへの理解","キャラクター人気の活用"],keyPhrases:["「御坂美琴グッズ入荷しました」","「限定デザインです」"],aiSummary:"ライトノベルファンへの提案が成功しました。"},{id:"43",name:"アイカツ!×鹿児島コラボフェア2022",description:"人気アイドルゲーム「アイカツ!」とのコラボイベント",startDate:new Date("2022-11-01"),endDate:new Date("2022-11-30"),status:"completed",tags:["#アイカツ","#ゲームコラボ","#鹿児島","#秋"],totalPosts:15,totalViews:421,totalReactions:83,stores:["鹿児島店"],bestPractices:[],successPatterns:["子供向けコンテンツの家族提案","ファミリー層への対応"],keyPhrases:["「お子様に大人気です」","「アイドル活動グッズあります」"],aiSummary:"キッズ向けゲームの家族提案が成功。"},{id:"44",name:"ヴァイオレット・エヴァーガーデン×青森2023",description:"感動アニメ「ヴァイオレット・エヴァーガーデン」とのコラボ",startDate:new Date("2023-08-02"),endDate:new Date("2023-08-07"),status:"completed",tags:["#ヴァイオレット","#アニメコラボ","#青森","#夏"],totalPosts:21,totalViews:589,totalReactions:118,stores:["青森店"],bestPractices:[],successPatterns:["感動系アニメファンへの丁寧な対応","作品の世界観への理解"],keyPhrases:["「ヴァイオレットグッズ入荷しました」","「美しいデザインです」"],aiSummary:"感動系アニメファンへの提案が好評でした。"},{id:"45",name:"バーチャルさんはみている×岩手2023",description:"VTuber番組「バーチャルさんはみている」とのコラボ",startDate:new Date("2023-09-01"),endDate:new Date("2023-10-31"),status:"completed",tags:["#VTuber","#バーチャル","#岩手","#秋"],totalPosts:13,totalViews:367,totalReactions:72,stores:["盛岡店"],bestPractices:[],successPatterns:["VTuberファンへの理解","バーチャル文化への共感"],keyPhrases:["「推しVTuberのグッズあります」","「限定デザインです」"],aiSummary:"VTuberコンテンツファンへの提案が成功。"},{id:"46",name:"Re:ゼロから始める異世界生活×秋田2023",description:"人気アニメ「Re:ゼロ」とのコラボイベント",startDate:new Date("2023-08-03"),endDate:new Date("2023-08-06"),status:"completed",tags:["#リゼロ","#アニメコラボ","#秋田","#夏"],totalPosts:16,totalViews:445,totalReactions:88,stores:["秋田店"],bestPractices:[],successPatterns:["異世界系アニメファンへの理解","キャラクター人気の活用"],keyPhrases:["「レムのグッズ入荷しました」","「エミリアグッズも人気です」"],aiSummary:"異世界アニメファンへの提案が効果的でした。"},{id:"47",name:"アズールレーン×山形コラボ2023",description:"人気ゲーム「アズールレーン」とのコラボイベント",startDate:new Date("2023-06-01"),endDate:new Date("2023-07-31"),status:"completed",tags:["#アズレン","#ゲームコラボ","#山形","#夏"],totalPosts:18,totalViews:501,totalReactions:101,stores:["山形店"],bestPractices:[],successPatterns:["ミリタリーゲームファンへの対応","艦船擬人化人気の活用"],keyPhrases:["「推しKAN-SENのグッズあります」","「指揮官に人気です」"],aiSummary:"ミリタリー系ゲームファンへの提案が成功しました。"},{id:"48",name:"プリキュアシリーズ×福島フェア2023",description:"人気アニメ「プリキュア」シリーズとのコラボ",startDate:new Date("2023-07-01"),endDate:new Date("2023-08-31"),status:"completed",tags:["#プリキュア","#アニメコラボ","#福島","#夏"],totalPosts:17,totalViews:473,totalReactions:94,stores:["福島店","郡山店"],bestPractices:[],successPatterns:["ファミリー層への提案","子供向けコンテンツの家族対応"],keyPhrases:["「お子様に大人気のプリキュアグッズです」","「親子で楽しめます」"],aiSummary:"キッズ向けアニメの家族提案が効果的でした。"},{id:"49",name:"ドラゴンクエスト×三重コラボ2023",description:"国民的RPG「ドラゴンクエスト」とのコラボイベント",startDate:new Date("2023-01-01"),endDate:new Date("2023-03-31"),status:"completed",tags:["#ドラクエ","#ゲームコラボ","#三重","#新春"],totalPosts:24,totalViews:678,totalReactions:136,stores:["四日市店","津店"],bestPractices:[],successPatterns:["幅広い世代への対応","国民的ゲームの活用"],keyPhrases:["「スライムグッズ入荷しました」","「ドラクエファンに大人気です」"],aiSummary:"国民的RPGを活用した提案が成功しました。"},{id:"50",name:"けいおん!×滋賀サマーフェスティバル2023",description:"人気アニメ「けいおん!」の聖地滋賀でのコラボイベント",startDate:new Date("2023-07-15"),endDate:new Date("2023-08-31"),status:"completed",tags:["#けいおん","#アニメコラボ","#滋賀","#夏"],totalPosts:16,totalViews:448,totalReactions:89,stores:["大津店","草津店"],bestPractices:[],successPatterns:["聖地巡礼客への対応","アニメファンへの理解"],keyPhrases:["「聖地巡礼の思い出にグッズをどうぞ」","「放課後ティータイムグッズあります」"],aiSummary:"聖地巡礼需要を活用した提案が効果的でした。"}];function Am(){const{user:t,updateUser:e}=Zi(),[s,n]=_.useState("list"),[i,a]=_.useState(null),[l,o]=_.useState(""),[c,d]=_.useState("all"),[u,h]=_.useState(!1),[f,v]=_.useState([]),[x,b]=_.useState("all"),[S,y]=_.useState(!1),[m,p]=_.useState("knowledge"),[g,N]=_.useState(!1),[k,C]=_.useState("all"),[j,M]=_.useState("all");_.useEffect(()=>{(async()=>{if(t!=null&&t.id){const D=await Bl(t.id);v(D)}})()},[t==null?void 0:t.id]);const U=Er.filter(w=>{const D=w.name.toLowerCase().includes(l.toLowerCase())||w.tags.some($=>$.toLowerCase().includes(l.toLowerCase())),R=c==="all"||w.status===c||c==="my-events"&&f.includes(w.id);return D&&R}),E=w=>{switch(w){case"active":return"bg-green-100 text-success-green";case"completed":return"bg-gray-100 text-gray-600";case"upcoming":return"bg-blue-100 text-sky-blue";default:return"bg-gray-100 text-gray-600"}},P=w=>{switch(w){case"active":return"開催中";case"completed":return"終了";case"upcoming":return"開催予定";default:return"不明"}},z=w=>{a(w),n("detail")},se=()=>{a(null),n("list")},$e=w=>{console.log("イベント投稿:",w),n("list")},we=w=>{v(D=>D.includes(w)?D.filter(R=>R!==w):[...D,w])},Ce=async()=>{if(!(t!=null&&t.id)){console.error("ユーザーIDがありません");return}y(!0);try{if(console.log("💾 保存処理開始 - ユーザーID:",t.id,"イベントID:",f),await Tg(t.id,f)){console.log("✅ 保存成功 - データベースから再読み込み中...");const D=await Bl(t.id);console.log("📥 再読み込み完了:",D),v(D),h(!1),alert("参加イベントを保存しました")}else console.error("❌ 参加イベントの保存に失敗しました"),alert("保存に失敗しました。もう一度お試しください。")}catch(w){console.error("❌ 参加イベント保存エラー:",w),alert("保存中にエラーが発生しました")}finally{y(!1)}},A=Er.filter(w=>{const D=w.startDate.getFullYear()===2024||w.endDate.getFullYear()===2024;if(x==="all")return D;const $={北海道:["北海道","札幌"],東北:["青森","岩手","宮城","秋田","山形","福島","仙台"],関東:["東京","神奈川","埼玉","千葉","茨城","栃木","群馬","渋谷","新宿","池袋","有楽町","秋葉原","横浜","大宮"],中部:["新潟","富山","石川","福井","山梨","長野","岐阜","静岡","愛知","名古屋"],近畿:["三重","滋賀","京都","大阪","兵庫","奈良","和歌山","梅田","神戸"],中国:["鳥取","島根","岡山","広島","山口"],四国:["徳島","香川","愛媛","高知"],九州:["福岡","佐賀","長崎","熊本","大分","宮崎","鹿児島","沖縄","博多","天神"]}[x]||[],L=w.stores.some(Q=>$.some(Tt=>Q.includes(Tt)))||w.stores.includes("全店舗");return D&&L});return s==="create"?r.jsx($y,{onSubmit:$e,onCancel:se,events:Er.map(w=>({id:w.id,name:w.name,status:w.status}))}):s==="detail"&&i?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:se,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Nt,{className:"w-5 h-5 rotate-180"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),r.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${E(i.status)}`,children:P(i.status)})]}),r.jsx("p",{className:"text-gray-600",children:i.description})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-1",children:r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsx("button",{onClick:()=>p("knowledge"),className:`px-4 py-3 rounded-lg font-medium transition-colors text-sm ${m==="knowledge"?"bg-vivid-red text-white":"text-gray-600 hover:bg-gray-100"}`,children:"💫 ファンの楽しみを理解するための基礎情報"}),r.jsx("button",{onClick:()=>p("overview"),className:`px-4 py-3 rounded-lg font-medium transition-colors text-sm ${m==="overview"?"bg-vivid-red text-white":"text-gray-600 hover:bg-gray-100"}`,children:"📊 概要"}),r.jsx("button",{onClick:()=>p("patterns"),className:`px-4 py-3 rounded-lg font-medium transition-colors text-sm ${m==="patterns"?"bg-vivid-red text-white":"text-gray-600 hover:bg-gray-100"}`,children:"✨ 成功パターン"}),r.jsx("button",{onClick:()=>p("phrases"),className:`px-4 py-3 rounded-lg font-medium transition-colors text-sm ${m==="phrases"?"bg-vivid-red text-white":"text-gray-600 hover:bg-gray-100"}`,children:"💬 フレーズ集"})]})}),m==="knowledge"&&i.essentialKnowledge&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"📖"}),r.jsx("span",{children:"作品概要"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:i.essentialKnowledge.overview}),i.essentialKnowledge.officialSiteUrl&&r.jsxs("a",{href:i.essentialKnowledge.officialSiteUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:[r.jsx(Hg,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"公式サイトを見る"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"👥"}),r.jsx("span",{children:"主要キャラクターTOP3"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.essentialKnowledge.mainCharacters.map((w,D)=>r.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:D+1}),r.jsx("p",{className:"text-gray-800 font-medium",children:w})]})},D))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"🎯"}),r.jsx("span",{children:"ファン層の特徴"})]}),r.jsx("ul",{className:"space-y-3",children:i.essentialKnowledge.fanBase.map((w,D)=>r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-sky-blue mt-1",children:"●"}),r.jsx("span",{className:"text-gray-700 flex-1",children:w})]},D))})]}),r.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl border border-pink-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"💬"}),r.jsx("span",{children:"ファンと楽しく話すためのヒント"})]}),r.jsx("ul",{className:"space-y-3",children:i.essentialKnowledge.precautions.map((w,D)=>r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-pink-500 mt-1",children:"💡"}),r.jsx("span",{className:"text-gray-800 flex-1",children:w})]},D))})]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"🌟"}),r.jsx("span",{children:"会話のきっかけポイント"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.essentialKnowledge.servicePoints.map((w,D)=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white rounded-lg border border-blue-200 shadow-sm",children:[r.jsx("span",{className:"text-blue-500 text-xl",children:"💬"}),r.jsx("span",{className:"text-gray-800 flex-1",children:w})]},D))})]})]}),m==="overview"&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(Ne,{className:"w-8 h-8 text-sky-blue mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:i.totalPosts}),r.jsx("div",{className:"text-sm text-gray-600",children:"投稿事例"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx(Yt,{className:"w-8 h-8 text-success-green mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:i.totalViews}),r.jsx("div",{className:"text-sm text-gray-600",children:"総閲覧数"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx(Zt,{className:"w-8 h-8 text-sunshine-yellow mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:i.totalReactions}),r.jsx("div",{className:"text-sm text-gray-600",children:"総リアクション"})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[r.jsx(ue,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:i.stores.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"参加店舗"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(pt,{className:"w-5 h-5 text-sky-blue mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sky-blue mb-2",children:"AI分析サマリー"}),r.jsx("p",{className:"text-blue-700",children:i.aiSummary})]})]})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(ue,{className:"w-5 h-5 text-purple-600"}),r.jsx("span",{children:"参加店舗"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:i.stores.map((w,D)=>r.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full",children:w},D))})]})]}),m==="patterns"&&i.successPatterns.length>0&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(ft,{className:"w-5 h-5 text-sunshine-yellow"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"成功パターンTOP3"})]}),r.jsx("div",{className:"space-y-3",children:i.successPatterns.map((w,D)=>r.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[r.jsx("div",{className:"w-8 h-8 bg-sunshine-yellow text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:D+1}),r.jsx("p",{className:"text-gray-800 flex-1 text-base",children:w})]},D))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(Ne,{className:"w-5 h-5 text-sky-blue"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"みんなの投稿事例"})]}),r.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-red-50 rounded-xl p-6 border border-yellow-200 mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(ft,{className:"w-5 h-5 text-sunshine-yellow"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"今週の人気事例TOP3"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:ps.filter(w=>w.eventId===i.id).sort((w,D)=>{const R=w.reactions.like+w.reactions.empathy+w.reactions.helpful;return D.reactions.like+D.reactions.empathy+D.reactions.helpful-R}).slice(0,3).map((w,D)=>r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold ${D===0?"bg-sunshine-yellow":D===1?"bg-gray-400":"bg-orange-500"}`,children:D+1}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:w.author.department})]}),r.jsx("h4",{className:"font-medium text-gray-900 text-sm mb-2 line-clamp-2",children:w.title}),r.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[r.jsxs("span",{children:[w.reactions.like+w.reactions.empathy+w.reactions.helpful," リアクション"]}),r.jsxs("span",{children:[w.views," 閲覧"]})]})]},w.id))})]}),r.jsx("div",{className:"space-y-4",children:ps.filter(w=>w.eventId===i.id).map(w=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[r.jsx("img",{src:w.author.avatar,alt:w.author.name,className:"w-12 h-12 rounded-full object-cover"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:w.title}),r.jsxs("p",{className:"text-sm text-gray-600",children:[w.author.name," · ",w.author.department]})]}),r.jsx("div",{className:"text-sm text-gray-500",children:w.createdAt.toLocaleDateString("ja-JP")})]})})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-semibold text-purple-600 uppercase",children:"状況"}),r.jsx("p",{className:"text-gray-700 mt-1",children:w.situation})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase",children:"工夫したこと"}),r.jsx("p",{className:"text-gray-700 mt-1",children:w.innovation})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-semibold text-green-600 uppercase",children:"結果"}),r.jsx("p",{className:"text-gray-700 mt-1",children:w.result})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[r.jsx("div",{className:"flex flex-wrap gap-2",children:w.tags.map((D,R)=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:D},R))}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Zt,{className:"w-4 h-4"}),r.jsx("span",{children:w.reactions.like})]}),r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Yt,{className:"w-4 h-4"}),r.jsx("span",{children:w.views})]})]})]})]},w.id))})]})]}),m==="phrases"&&i.keyPhrases.length>0&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(Ne,{className:"w-5 h-5 text-success-green"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"効果的な声かけフレーズ"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.keyPhrases.map((w,D)=>r.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:r.jsx("p",{className:"text-gray-800 font-medium text-base",children:w})},D))})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>h(!0),className:"bg-white rounded-xl border border-gray-200 p-4 text-center hover:border-purple-600 hover:shadow-md transition-all",children:[r.jsx(ue,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:f.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"参加中イベント"}),r.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"クリックして選択"})]}),r.jsxs("button",{onClick:()=>N(!0),className:"bg-white rounded-xl border border-gray-200 p-4 text-center hover:border-sky-blue hover:shadow-md transition-all",children:[r.jsx(De,{className:"w-8 h-8 text-sky-blue mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:Er.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"総イベント数"}),r.jsx("div",{className:"text-xs text-sky-blue mt-1",children:"クリックして過去イベントを確認"})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"イベント名やタグで検索...",value:l,onChange:w=>o(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent"})]}),r.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",children:[r.jsx("option",{value:"all",children:"すべて"}),r.jsx("option",{value:"my-events",children:"参加中のイベント"}),r.jsx("option",{value:"active",children:"開催中"}),r.jsx("option",{value:"upcoming",children:"開催予定"}),r.jsx("option",{value:"completed",children:"終了"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:U.map(w=>r.jsxs("div",{onClick:()=>z(w),className:`bg-white rounded-xl border p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group ${f.includes(w.id)?"border-purple-200 bg-purple-50":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[f.includes(w.id)&&r.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-700",children:[r.jsx(ue,{className:"w-3 h-3"}),r.jsx("span",{children:"参加中"})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-sky-blue transition-colors",children:w.name}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E(w.status)}`,children:P(w.status)})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.description})]}),r.jsx(Nt,{className:"w-5 h-5 text-gray-400 group-hover:text-sky-blue transition-colors"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-sky-blue",children:w.totalPosts}),r.jsx("div",{className:"text-xs text-gray-600",children:"投稿事例"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-success-green",children:w.totalReactions}),r.jsx("div",{className:"text-xs text-gray-600",children:"リアクション"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-sunshine-yellow",children:w.bestPractices.length}),r.jsx("div",{className:"text-xs text-gray-600",children:"ベスト事例"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[w.tags.slice(0,3).map((D,R)=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:D},R)),w.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-md",children:["+",w.tags.length-3,"個"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(De,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.startDate.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})," -",w.endDate.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ue,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.stores.length,"店舗"]})]})]})]},w.id))}),U.length===0&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[r.jsx(De,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c==="my-events"?"参加中のイベントがありません":"該当するイベントが見つかりません"}),r.jsx("p",{className:"text-gray-600",children:c==="my-events"?"イベントに参加して事例を共有しましょう":"検索条件を変更してお試しください"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"font-semibold text-sky-blue mb-2",children:"💡 イベントページの活用方法"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"事前準備"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• 過去の類似イベント事例を確認"}),r.jsx("li",{children:"• 成功パターンを事前学習"}),r.jsx("li",{children:"• 効果的なフレーズを準備"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"イベント中"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• ベストプラクティスを実践"}),r.jsx("li",{children:"• 新しい成功事例をコミュニティに投稿"}),r.jsx("li",{children:"• 他店舗の最新事例をチェック"})]})]})]})]}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"参加イベントを選択"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"開催中のイベントから参加するものを選んでください"})]}),r.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ks,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"エリア:"}),["all","北海道","東北","関東","中部","近畿","中国","四国","九州"].map(w=>r.jsx("button",{onClick:()=>b(w),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${x===w?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:w==="all"?"すべて":w},w))]})]}),r.jsx("div",{className:"p-6 space-y-4",children:A.length>0?A.map(w=>r.jsx("button",{onClick:()=>we(w.id),className:`w-full text-left p-4 rounded-xl border-2 transition-all ${f.includes(w.id)?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-success-green",children:"開催中"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(De,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.startDate.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})," -",w.endDate.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ue,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.stores.length,"店舗参加"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.totalPosts,"件の事例"]})]})]})]}),r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ml-3 ${f.includes(w.id)?"border-purple-600 bg-purple-600":"border-gray-300"}`,children:f.includes(w.id)&&r.jsx(Fg,{className:"w-4 h-4 text-white"})})]})},w.id)):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(De,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"現在開催中のイベントはありません"})]})}),r.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 flex justify-between items-center",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[f.length,"件のイベントを選択中"]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"キャンセル"}),r.jsx("button",{onClick:Ce,disabled:S,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed",children:S?"保存中...":"保存"})]})]})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"過去のイベント一覧"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"過去に開催されたイベントを確認できます"})]}),r.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ks,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"エリア"}),r.jsxs("select",{value:k,onChange:w=>C(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",children:[r.jsx("option",{value:"all",children:"すべてのエリア"}),r.jsx("option",{value:"全国",children:"全国"}),r.jsx("option",{value:"北海道",children:"北海道"}),r.jsx("option",{value:"東北",children:"東北"}),r.jsx("option",{value:"関東",children:"関東"}),r.jsx("option",{value:"中部",children:"中部"}),r.jsx("option",{value:"近畿",children:"近畿"}),r.jsx("option",{value:"中国",children:"中国"}),r.jsx("option",{value:"四国",children:"四国"}),r.jsx("option",{value:"九州・沖縄",children:"九州・沖縄"})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"年度"}),r.jsxs("select",{value:j,onChange:w=>M(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",children:[r.jsx("option",{value:"all",children:"すべての年度"}),r.jsx("option",{value:"2024",children:"2024年"}),r.jsx("option",{value:"2023",children:"2023年"}),r.jsx("option",{value:"2022",children:"2022年"}),r.jsx("option",{value:"2021",children:"2021年"})]})]})]})]}),r.jsx("div",{className:"p-6 space-y-4",children:Er.filter(w=>{const D=L=>L.includes("全店舗")?"全国":L.includes("札幌")?"北海道":L.includes("仙台")?"東北":L.includes("東京")||L.includes("渋谷")||L.includes("新宿")||L.includes("池袋")||L.includes("有楽町")||L.includes("秋葉原")||L.includes("横浜")||L.includes("川崎")||L.includes("埼玉")||L.includes("千葉")?"関東":L.includes("名古屋")?"中部":L.includes("大阪")||L.includes("梅田")||L.includes("難波")||L.includes("天王寺")?"近畿":L.includes("福岡")||L.includes("天神")||L.includes("博多")?"九州・沖縄":"全国",R=k==="all"||w.stores.some(L=>D(L)===k)||k==="全国"&&w.stores.includes("全店舗"),$=j==="all"||w.startDate.getFullYear().toString()===j;return R&&$}).map(w=>r.jsx("div",{onClick:()=>{N(!1),z(w)},className:"p-4 rounded-xl border-2 border-gray-200 hover:border-sky-blue hover:bg-gray-50 transition-all cursor-pointer",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E(w.status)}`,children:P(w.status)})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(De,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.startDate.toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})," -",w.endDate.toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ue,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.stores.length,"店舗参加"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),r.jsxs("span",{children:[w.totalPosts,"件の事例"]})]})]})]}),r.jsx(Nt,{className:"w-5 h-5 text-gray-400 flex-shrink-0 ml-3"})]})},w.id))})]})})]})}function Ly(){const{user:t,updateUser:e}=Zi(),[s,n]=_.useState(!1);_.useState({});const[i,a]=_.useState({name:(t==null?void 0:t.name)||"",introduction:"丸井でカード口コミを担当しています。お客様に喜んでいただける提案を心がけています。",learningGoals:"今月は断り対応スキルを重点的に向上させたいと思います。"}),l={totalSessions:47,totalLearningHours:23.5,averageScore:78.5,communityPosts:3,aiAdoptedPosts:2,totalReactions:74,comments:12,badges:8},o=[{id:"1",title:"今月の学習回数",target:20,current:14,deadline:new Date("2024-01-31")},{id:"2",title:"コミュニケーションスコア",target:85,current:78,deadline:new Date("2024-01-31")},{id:"3",title:"コミュニティ投稿",target:5,current:3,deadline:new Date("2024-01-31")}],c=[{id:"1",type:"simulation",title:"アニメイベント口コミ実践",score:85,date:new Date("2024-01-20"),icon:Ne,color:"text-sky-blue"},{id:"2",type:"community",title:"アニメファン接客事例を投稿",reactions:24,date:new Date("2024-01-18"),icon:ue,color:"text-success-green"},{id:"3",type:"achievement",title:"口コミ初心者卒業バッジ獲得",date:new Date("2024-01-15"),icon:ri,color:"text-sunshine-yellow"},{id:"4",type:"consultation",title:"AI相談：断り対応について",date:new Date("2024-01-12"),icon:un,color:"text-purple-600"}],d=[{name:"ヒアリング力",score:78,change:5,color:"bg-sky-blue"},{name:"親しみやすさ",score:85,change:3,color:"bg-success-green"},{name:"柔軟対応力",score:72,change:8,color:"bg-sunshine-yellow"},{name:"口コミ力",score:82,change:2,color:"bg-vivid-red"},{name:"会話スピード",score:75,change:6,color:"bg-purple-600"}],u=wy.filter(x=>x.unlockedAt),h=ps.reduce((x,b)=>x+b.reactions.like+b.reactions.empathy+b.reactions.helpful,0),f=()=>{t&&e({name:i.name}),n(!1)},v=()=>{a({name:(t==null?void 0:t.name)||"",introduction:"丸井でカード口コミを担当しています。お客様に喜んでいただける提案を心がけています。",learningGoals:"今月は断り対応スキルを重点的に向上させたいと思います。"}),n(!1)};return t?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"プロフィール"}),r.jsxs("button",{onClick:()=>n(!s),className:"flex items-center space-x-2 px-4 py-2 bg-sky-blue text-white rounded-lg hover:bg-blue-600 transition-colors",children:[r.jsx(Qg,{className:"w-4 h-4"}),r.jsx("span",{children:s?"キャンセル":"編集"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("div",{className:"relative inline-block",children:[r.jsx("img",{src:t.avatar||"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop",alt:t.name,className:"w-24 h-24 rounded-full object-cover mx-auto"}),s&&r.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-sky-blue text-white rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors",children:r.jsx(si,{className:"w-4 h-4"})})]}),s?r.jsx("input",{type:"text",value:i.name,onChange:x=>a(b=>({...b,name:x.target.value})),className:"mt-4 text-xl font-bold text-center w-full border border-gray-300 rounded-lg px-3 py-2"}):r.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-4",children:t.name}),r.jsx("p",{className:"text-gray-600",children:t.department}),r.jsx("p",{className:"text-sm text-gray-500",children:"社員ID: EMP001"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"自己紹介"}),s?r.jsx("textarea",{value:i.introduction,onChange:x=>a(b=>({...b,introduction:x.target.value})),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"}):r.jsx("p",{className:"text-sm text-gray-700",children:i.introduction})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"学習目標"}),s?r.jsx("textarea",{value:i.learningGoals,onChange:x=>a(b=>({...b,learningGoals:x.target.value})),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm"}):r.jsx("p",{className:"text-sm text-gray-700",children:i.learningGoals})]}),s&&r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:f,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-success-green text-white rounded-lg hover:bg-emerald-green transition-colors",children:[r.jsx(Zg,{className:"w-4 h-4"}),r.jsx("span",{children:"保存"})]}),r.jsxs("button",{onClick:v,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[r.jsx(ks,{className:"w-4 h-4"}),r.jsx("span",{children:"キャンセル"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mt-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"活動統計"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-bold text-sky-blue",children:l.totalSessions}),r.jsx("div",{className:"text-xs text-gray-600",children:"学習回数"})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-bold text-success-green",children:l.averageScore}),r.jsx("div",{className:"text-xs text-gray-600",children:"平均スコア"})]}),r.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-bold text-sunshine-yellow",children:l.communityPosts}),r.jsx("div",{className:"text-xs text-gray-600",children:"投稿数"})]}),r.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-bold text-vivid-red",children:l.badges}),r.jsx("div",{className:"text-xs text-gray-600",children:"バッジ数"})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(Xt,{className:"w-5 h-5 text-vivid-red"}),r.jsx("span",{children:"今月の学習目標"})]}),r.jsx("div",{className:"space-y-4",children:o.map(x=>{const b=x.current/x.target*100;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:x.title}),r.jsxs("span",{className:"text-sm text-gray-600",children:[x.current," / ",x.target]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-sky-blue to-success-green transition-all duration-500",style:{width:`${Math.min(b,100)}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500",children:["期限: ",x.deadline.toLocaleDateString("ja-JP")]})]},x.id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(qo,{className:"w-5 h-5 text-sky-blue"}),r.jsx("span",{children:"スキル評価"})]}),r.jsx("div",{className:"space-y-4",children:d.map((x,b)=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:x.name}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-bold text-gray-900",children:x.score}),r.jsx("span",{className:`text-sm font-medium ${x.change>0?"text-success-green":"text-gray-500"}`,children:x.change>0?`+${x.change}`:x.change})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${x.color} transition-all duration-500`,style:{width:`${x.score}%`}})})]},b))})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(De,{className:"w-5 h-5 text-success-green"}),r.jsx("span",{children:"最近の活動"})]}),r.jsx("div",{className:"space-y-4",children:c.map(x=>{const b=x.icon;return r.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gray-100",children:r.jsx(b,{className:`w-5 h-5 ${x.color}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:x.title}),r.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[r.jsx("span",{children:x.date.toLocaleDateString("ja-JP")}),x.score&&r.jsxs("span",{children:["スコア: ",x.score,"点"]}),x.reactions&&r.jsxs("span",{children:[x.reactions,"リアクション"]})]})]}),r.jsx(Nt,{className:"w-5 h-5 text-gray-400"})]},x.id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(ri,{className:"w-5 h-5 text-sunshine-yellow"}),r.jsx("span",{children:"獲得バッジ"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:u.map(x=>{var b;return r.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-red-50 rounded-lg border border-yellow-200",children:[r.jsx("div",{className:"w-12 h-12 bg-sunshine-yellow rounded-lg flex items-center justify-center mx-auto mb-2",children:r.jsx(ri,{className:"w-6 h-6 text-white"})}),r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:x.title}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:(b=x.unlockedAt)==null?void 0:b.toLocaleDateString("ja-JP")})]},x.id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(ue,{className:"w-5 h-5 text-purple-600"}),r.jsx("span",{children:"コミュニティ貢献"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[r.jsx(Zt,{className:"w-5 h-5 text-sky-blue"}),r.jsx(fs,{className:"w-5 h-5 text-vivid-red"}),r.jsx(un,{className:"w-5 h-5 text-sunshine-yellow"})]}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:h}),r.jsx("div",{className:"text-sm text-gray-600",children:"総リアクション"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx(Ne,{className:"w-8 h-8 text-success-green mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:l.comments}),r.jsx("div",{className:"text-sm text-gray-600",children:"コメント数"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx(hn,{className:"w-8 h-8 text-sunshine-yellow mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:l.aiAdoptedPosts}),r.jsx("div",{className:"text-sm text-gray-600",children:"AI学習採用"})]})]})]})]})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsx("p",{className:"text-gray-500",children:"ユーザー情報を読み込み中..."})})}function My(){const[t,e]=_.useState([]),[s,n]=_.useState(!0),[i,a]=_.useState(null),[l,o]=_.useState(null);_.useEffect(()=>{(async()=>{try{n(!0),a(null);const u=await Ay({sinceDays:7});e(u)}catch(u){console.error(u),a("人気事例の読み込みに失敗しました")}finally{n(!1)}})()},[]);const c=_.useMemo(()=>t.map(u=>({post:u,score:(u.reactions.like||0)+(u.reactions.empathy||0)+(u.reactions.helpful||0)})).sort((u,h)=>h.score-u.score).slice(0,3),[t]);if(s)return r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-6 text-yellow-700",children:"今週の人気事例TOP3を読み込み中..."});if(i)return r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-6 text-red-600",children:i});if(c.length===0)return null;if(l){const d=(u,h)=>{e(f=>f.map(v=>{if(v.id!==u)return v;const x={...v.reactions};return x[h]=(x[h]||0)+1,{...v,reactions:x}}))};return r.jsx("div",{className:"mb-6",children:r.jsx(Tm,{post:l,onBack:()=>o(null),onReaction:d})})}return r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(ft,{className:"w-6 h-6 text-yellow-600"}),r.jsx("h3",{className:"font-semibold text-yellow-800",children:"今週の人気事例TOP3"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:c.map(({post:d,score:u},h)=>r.jsxs("div",{onClick:()=>o(d),className:"bg-white rounded-xl border border-yellow-200 p-4 cursor-pointer hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-700 text-sm font-bold",children:h+1}),r.jsx("span",{className:"text-xs text-gray-500",children:d.author.department})]}),r.jsx("div",{className:"text-sm text-gray-900 font-medium line-clamp-1 mb-1",children:d.title}),r.jsx("div",{className:"text-xs text-gray-600 line-clamp-2 mb-3",children:d.situation}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("span",{children:[u," リアクション"]}),r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Yt,{className:"w-3 h-3"}),r.jsx("span",{children:d.views})]})]})]},d.id))})]})}function Uy({isOpen:t,onClose:e,onSubmit:s}){const[n,i]=_.useState({title:"",category:"event",situation:"",approach:"",result:"",notes:"",tags:[],eventId:""}),[a,l]=_.useState(""),o=u=>{u.preventDefault(),s(n),e(),i({title:"",category:"event",situation:"",approach:"",result:"",notes:"",tags:[],eventId:""})},c=()=>{a.trim()&&!n.tags.includes(a.trim())&&(i({...n,tags:[...n.tags,a.trim()]}),l(""))},d=u=>{i({...n,tags:n.tags.filter(h=>h!==u)})};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between rounded-t-2xl",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"事例を投稿"}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ks,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:o,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリー"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("button",{type:"button",onClick:()=>i({...n,category:"event"}),className:`flex-1 px-4 py-3 rounded-lg border-2 transition-all ${n.category==="event"?"border-vivid-red bg-red-50 text-vivid-red":"border-gray-200 text-gray-600 hover:border-gray-300"}`,children:[r.jsx(De,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("span",{className:"text-sm font-medium",children:"好きイベ事例"})]}),r.jsxs("button",{type:"button",onClick:()=>i({...n,category:"other"}),className:`flex-1 px-4 py-3 rounded-lg border-2 transition-all ${n.category==="other"?"border-vivid-red bg-red-50 text-vivid-red":"border-gray-200 text-gray-600 hover:border-gray-300"}`,children:[r.jsx(ue,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("span",{className:"text-sm font-medium",children:"その他事例"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["タイトル ",r.jsx("span",{className:"text-vivid-red",children:"*"})]}),r.jsx("input",{type:"text",id:"title",required:!0,value:n.title,onChange:u=>i({...n,title:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",placeholder:"例：呪術廻戦イベントでの接客成功事例"})]}),n.category==="event"&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"eventId",className:"block text-sm font-medium text-gray-700 mb-2",children:"関連イベント"}),r.jsxs("select",{id:"eventId",value:n.eventId,onChange:u=>i({...n,eventId:u.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",children:[r.jsx("option",{value:"",children:"選択してください"}),r.jsx("option",{value:"1",children:"呪術廻戦フェア"}),r.jsx("option",{value:"2",children:"MGAフェス2024"}),r.jsx("option",{value:"3",children:"バレンタインフェア"}),r.jsx("option",{value:"4",children:"チェンソーマンコラボ"}),r.jsx("option",{value:"5",children:"スプリングセール2024"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"situation",className:"block text-sm font-medium text-gray-700 mb-2",children:"状況"}),r.jsx("textarea",{id:"situation",value:n.situation,onChange:u=>i({...n,situation:u.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",placeholder:"どんな状況でしたか？"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"approach",className:"block text-sm font-medium text-gray-700 mb-2",children:"アプローチ・工夫"}),r.jsx("textarea",{id:"approach",value:n.approach,onChange:u=>i({...n,approach:u.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",placeholder:"どのように工夫しましたか？"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"result",className:"block text-sm font-medium text-gray-700 mb-2",children:"結果"}),r.jsx("textarea",{id:"result",value:n.result,onChange:u=>i({...n,result:u.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",placeholder:"どんな結果になりましたか？"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"補足"}),r.jsx("textarea",{id:"notes",value:n.notes,onChange:u=>i({...n,notes:u.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",placeholder:"その他補足事項があれば自由に記入してください"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タグ"}),r.jsxs("div",{className:"flex space-x-2 mb-2",children:[r.jsx("input",{type:"text",value:a,onChange:u=>l(u.target.value),onKeyDown:u=>{u.key==="Enter"&&(u.preventDefault(),c())},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-blue focus:border-transparent",placeholder:"タグを入力してEnter"}),r.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:r.jsx(ny,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map((u,h)=>r.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-sky-blue text-white rounded-full text-sm",children:[r.jsx("span",{children:u}),r.jsx("button",{type:"button",onClick:()=>d(u),className:"hover:bg-blue-600 rounded-full p-0.5",children:r.jsx(ks,{className:"w-3 h-3"})})]},h))})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"キャンセル"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-vivid-red text-white rounded-lg hover:bg-red-600 transition-colors font-medium",children:"投稿する"})]})]})]})}):null}function Fy(){const[t,e]=_.useState("events"),[s,n]=_.useState(!1),[i,a]=_.useState(0),{user:l}=Zi(),o=async c=>{try{if(c.category==="other"){if(!l){alert("ログインが必要です。");return}await Dy({authorId:l.id,title:c.title,situation:c.situation,approach:c.approach,result:c.result,notes:c.notes,tags:c.tags})?(e("other"),a(u=>u+1)):alert("投稿の保存に失敗しました")}else e("events")}catch(d){console.error(d),alert("投稿処理でエラーが発生しました")}};return r.jsxs("div",{className:"space-y-6 w-full max-w-full overflow-x-hidden",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"事例集"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"好きイベ事例とその他の成功事例を確認できます"})]}),r.jsx("div",{className:"flex justify-center overflow-hidden",children:r.jsxs("button",{onClick:()=>n(!0),className:"flex items-center space-x-3 px-8 py-4 bg-vivid-red text-white rounded-xl hover:bg-red-600 transition-all shadow-lg hover:shadow-xl md:transform md:hover:scale-105 font-bold text-lg",children:[r.jsx(Xg,{className:"w-6 h-6"}),r.jsx("span",{children:"投稿"})]})}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-1 overflow-hidden",children:r.jsxs("div",{className:"flex space-x-2 w-full",children:[r.jsxs("button",{onClick:()=>e("events"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors ${t==="events"?"bg-vivid-red text-white":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(De,{className:"w-5 h-5"}),r.jsx("span",{children:"好きイベ事例"})]}),r.jsx("p",{className:"text-xs mt-1 opacity-90",children:"イベント関連の成功事例"})]}),r.jsxs("button",{onClick:()=>e("other"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors ${t==="other"?"bg-vivid-red text-white":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(ue,{className:"w-5 h-5"}),r.jsx("span",{children:"その他事例"})]}),r.jsx("p",{className:"text-xs mt-1 opacity-90",children:"日常接客の成功事例"})]})]})}),r.jsx("div",{children:t==="events"?r.jsxs(r.Fragment,{children:[r.jsx(My,{}),r.jsx(Am,{})]}):r.jsx(Dm,{reloadKey:i})}),r.jsx(Uy,{isOpen:s,onClose:()=>n(!1),onSubmit:o})]})}function zy(){const{user:t,isAuthenticated:e,isLoading:s,login:n,logout:i}=Zi(),[a,l]=_.useState("dashboard"),[o,c]=_.useState(!1),[d,u]=_.useState(!0),[h,f]=_.useState("login");if(s)return r.jsx("div",{className:"min-h-screen bg-light-gray flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-sky-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"隱ｭ縺ｿ霎ｼ縺ｿ荳ｭ..."})]})});const v=async(p,g,N,k)=>await Ag({name:p,email:g,password:N,department:k,role:"learner"})&&await n(g,N)?(f("login"),!0):!1;if(!e)return h==="signup"?r.jsx(oy,{onSignup:v,onBackToLogin:()=>f("login")}):r.jsx(ay,{onLogin:n,onNavigateToSignup:()=>f("signup")});const x=()=>{u(!1),l("evaluation")},b=()=>{u(!0),l("dashboard")},S=()=>{i(),u(!0),l("dashboard")};if(d)return r.jsx(cy,{onComplete:x});const y=p=>({dashboard:"Dashboard",simulation:"Simulation",evaluation:"Evaluation",events:"Events",community:"Community",consultation:"Consultation",cases:"Cases"})[p]||"App",m=()=>{switch(a){case"dashboard":return r.jsx(Fd,{onNavigateToSimulation:()=>l("simulation")});case"simulation":return r.jsx(Cm,{});case"evaluation":return r.jsx(Cy,{});case"events":return r.jsx(Am,{});case"community":return r.jsx(Dm,{});case"consultation":return r.jsx(Oy,{});case"cases":return r.jsx(Fy,{});case"profile":return r.jsx(Ly,{});default:return r.jsx(Fd,{onNavigateToSimulation:()=>l("simulation")})}};return r.jsxs("div",{className:"min-h-screen bg-light-gray overflow-x-hidden",children:[r.jsx(dy,{title:y(a),onMenuToggle:()=>c(!0),onProfileClick:()=>l("profile"),onLogout:S,user:t}),r.jsx(fy,{isOpen:o,onClose:()=>c(!1),activeTab:a,onTabChange:l,onReturnToOnboarding:b,onLogout:S}),r.jsxs("div",{className:"flex",children:[r.jsx(hy,{activeTab:a,onTabChange:l,onReturnToOnboarding:b,onProfileClick:()=>l("profile"),onLogout:S}),r.jsx("main",{className:"flex-1 w-full p-4 sm:p-6 max-w-7xl mx-auto overflow-x-hidden",children:m()})]})]})}Zh(document.getElementById("root")).render(r.jsx(_.StrictMode,{children:r.jsx(zy,{})}));
